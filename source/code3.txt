r(let a=0;a<t.length;a+=1){const c=t[a];r&&c.type==="weekDay"||(o.push(c.format),s.push(Q0(c,"non-input",n)))}const i=o.join(" "),l=s.join(" ");return e.parse(l,i)},gee=e=>e.map(t=>`${t.startSeparator}${t.value||t.placeholder}${t.endSeparator}`).join(""),yee=(e,t,n)=>{const o=e.map(s=>{const i=Q0(s,n?"input-rtl":"input-ltr",t);return`${s.startSeparator}${i}${s.endSeparator}`}).join("");return n?`⁦${o}⁩`:o},vee=(e,t,n)=>{const r=e.date(void 0,n),o=e.endOfYear(r),s=e.endOfDay(r),{maxDaysInMonth:i,longestMonth:l}=W0(e,r).reduce((a,c)=>{const d=e.getDaysInMonth(c);return d>a.maxDaysInMonth?{maxDaysInMonth:d,longestMonth:c}:a},{maxDaysInMonth:0,longestMonth:null});return{year:({format:a})=>({minimum:0,maximum:GO(e,n,a)?9999:99}),month:()=>({minimum:1,maximum:e.getMonth(o)+1}),day:({currentDate:a})=>({minimum:1,maximum:a!=null&&e.isValid(a)?e.getDaysInMonth(a):i,longestMonth:l}),weekDay:({format:a,contentType:c})=>{if(c==="digit"){const d=Zm(e,n,a).map(Number);return{minimum:Math.min(...d),maximum:Math.max(...d)}}return{minimum:1,maximum:7}},hours:({format:a})=>{const c=e.getHours(s);return Il(e.formatByString(e.endOfDay(r),a),t)!==c.toString()?{minimum:1,maximum:Number(Il(e.formatByString(e.startOfDay(r),a),t))}:{minimum:0,maximum:c}},minutes:()=>({minimum:0,maximum:e.getMinutes(s)}),seconds:()=>({minimum:0,maximum:e.getSeconds(s)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},bee=(e,t,n,r,o)=>{switch(n.type){case"year":return e.setYear(o,e.getYear(r));case"month":return e.setMonth(o,e.getMonth(r));case"weekDay":{const s=Zm(e,t,n.format),i=e.formatByString(r,n.format),l=s.indexOf(i),c=s.indexOf(n.value)-l;return e.addDays(r,c)}case"day":return e.setDate(o,e.getDate(r));case"meridiem":{const s=e.getHours(r)<12,i=e.getHours(o);return s&&i>=12?e.addHours(o,-12):!s&&i<12?e.addHours(o,12):o}case"hours":return e.setHours(o,e.getHours(r));case"minutes":return e.setMinutes(o,e.getMinutes(r));case"seconds":return e.setSeconds(o,e.getSeconds(r));default:return o}},UP={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},GP=(e,t,n,r,o,s)=>[...r].sort((i,l)=>UP[i.type]-UP[l.type]).reduce((i,l)=>!s||l.modified?bee(e,t,l,n,i):i,o),xee=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,Cee=(e,t)=>{const n={};if(!t)return e.forEach((a,c)=>{const d=c===0?null:c-1,f=c===e.length-1?null:c+1;n[c]={leftIndex:d,rightIndex:f}}),{neighbors:n,startIndex:0,endIndex:e.length-1};const r={},o={};let s=0,i=0,l=e.length-1;for(;l>=0;){i=e.findIndex((a,c)=>{var d;return c>=s&&((d=a.endSeparator)==null?void 0:d.includes(" "))&&a.endSeparator!==" / "}),i===-1&&(i=e.length-1);for(let a=i;a>=s;a-=1)o[a]=l,r[l]=a,l-=1;s=i+1}return e.forEach((a,c)=>{const d=o[c],f=d===0?null:r[d-1],p=d===e.length-1?null:r[d+1];n[c]={leftIndex:f,rightIndex:p}}),{neighbors:n,startIndex:r[0],endIndex:r[e.length-1]}},tb=(e,t)=>e==null?null:e==="all"?"all":typeof e=="string"?t.findIndex(n=>n.type===e):e,wee=(e,t)=>{if(e.value)switch(e.type){case"month":{if(e.contentType==="digit")return t.format(t.setMonth(t.date(),Number(e.value)-1),"month");const n=t.parse(e.value,e.format);return n?t.format(n,"month"):void 0}case"day":return e.contentType==="digit"?t.format(t.setDate(t.startOfYear(t.date()),Number(e.value)),"dayOfMonthFull"):e.value;case"weekDay":return;default:return}},See=(e,t)=>{if(e.value)switch(e.type){case"weekDay":return e.contentType==="letter"?void 0:Number(e.value);case"meridiem":{const n=t.parse(`01:00 ${e.value}`,`${t.formats.hours12h}:${t.formats.minutes} ${e.format}`);return n?t.getHours(n)>=12?1:0:void 0}case"day":return e.contentType==="digit-with-letter"?parseInt(e.value,10):Number(e.value);case"month":{if(e.contentType==="digit")return Number(e.value);const n=t.parse(e.value,e.format);return n?t.getMonth(n)+1:void 0}default:return e.contentType!=="letter"?Number(e.value):void 0}},Pee=["value","referenceDate"],Bs={emptyValue:null,getTodayValue:zO,getInitialReferenceValue:e=>{let{value:t,referenceDate:n}=e,r=ne(e,Pee);return t!=null&&r.utils.isValid(t)?t:n??uee(r)},cleanValue:nee,areValuesEqual:ree,isSameError:(e,t)=>e===t,hasError:e=>e!=null,defaultErrorState:null,getTimezone:(e,t)=>t==null||!e.isValid(t)?null:e.getTimezone(t),setTimezone:(e,t,n)=>n==null?null:e.setTimezone(n,t)},Aee={updateReferenceValue:(e,t,n)=>t==null||!e.isValid(t)?n:t,getSectionsFromValue:(e,t,n,r)=>!e.isValid(t)&&!!n?n:r(t),getV7HiddenInputValueFromSections:gee,getV6InputValueFromSections:yee,getActiveDateManager:(e,t)=>({date:t.value,referenceDate:t.referenceValue,getSections:n=>n,getNewValuesFromNewActiveDate:n=>({value:n,referenceValue:n==null||!e.isValid(n)?t.referenceValue:n})}),parseValueStr:(e,t,n)=>n(e.trim(),t)},Eee=e=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:m({},e)}}}}),KO={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:e=>e==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(e,t,n)=>`Select ${e}. ${t===null?"No time selected":`Selected time is ${n.format(t,"fullTime")}`}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:(e,t)=>e!==null&&t.isValid(e)?`Choose date, selected date is ${t.format(e,"fullDate")}`:"Choose date",openTimePickerDialogue:(e,t)=>e!==null&&t.isValid(e)?`Choose time, selected time is ${t.format(e,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>e.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>e.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},kee=KO;Eee(KO);const Fl=()=>{const e=h.useContext(eb);if(e===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(e.utils===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const t=h.useMemo(()=>m({},kee,e.localeText),[e.localeText]);return h.useMemo(()=>m({},e,{localeText:t}),[e,t])},Bt=()=>Fl().utils,ef=()=>Fl().defaultDates,eg=e=>{const t=Bt(),n=h.useRef();return n.current===void 0&&(n.current=t.date(void 0,e)),n.current};function Iee(e){return Be("MuiPickersToolbar",e)}je("MuiPickersToolbar",["root","content"]);const Mee=["children","className","toolbarTitle","hidden","titleId","isLandscape","classes","landscapeDirection"],Tee=e=>{const{classes:t,isLandscape:n}=e;return Se({root:["root"],content:["content"],penIconButton:["penIconButton",n&&"penIconButtonLandscape"]},Iee,t)},Oee=X("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3),variants:[{props:{isLandscape:!0},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),Ree=X("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{isLandscape:!0},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{isLandscape:!0,landscapeDirection:"row"},style:{flexDirection:"row"}}]}),Dee=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiPickersToolbar"}),{children:o,className:s,toolbarTitle:i,hidden:l,titleId:a}=r,c=ne(r,Mee),d=r,f=Tee(d);return l?null:u.jsxs(Oee,m({ref:n,className:ce(f.root,s),ownerState:d},c,{children:[u.jsx(hr,{color:"text.secondary",variant:"overline",id:a,children:i}),u.jsx(Ree,{className:f.content,ownerState:d,children:o})]}))}),Ws=()=>Fl().localeText;function Fee(e){return Be("MuiDatePickerToolbar",e)}je("MuiDatePickerToolbar",["root","title"]);const jee=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className","onViewChange","view"],$ee=e=>{const{classes:t}=e;return Se({root:["root"],title:["title"]},Fee,t)},Lee=X(Dee,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Nee=X(hr,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(e,t)=>t.title})({variants:[{props:{isLandscape:!0},style:{margin:"auto 16px auto auto"}}]}),Bee=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiDatePickerToolbar"}),{value:o,isLandscape:s,toolbarFormat:i,toolbarPlaceholder:l="––",views:a,className:c}=r,d=ne(r,jee),f=Bt(),p=Ws(),b=$ee(r),v=h.useMemo(()=>{if(!o)return l;const C=U0(f,{format:i,views:a},!0);return f.formatByString(o,C)},[o,i,l,f,a]),x=r;return u.jsx(Lee,m({ref:n,toolbarTitle:p.datePickerToolbarTitle,isLandscape:s,className:ce(b.root,c)},d,{children:u.jsx(Nee,{variant:"h4",align:s?"left":"center",ownerState:x,className:b.title,children:v})}))});function YO(e,t){const n=Bt(),r=ef(),o=_t({props:e,name:t}),s=h.useMemo(()=>{var i;return((i=o.localeText)==null?void 0:i.toolbarTitle)==null?o.localeText:m({},o.localeText,{datePickerToolbarTitle:o.localeText.toolbarTitle})},[o.localeText]);return m({},o,{localeText:s},tee({views:o.views,openTo:o.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:o.disableFuture??!1,disablePast:o.disablePast??!1,minDate:mo(n,o.minDate,r.minDate),maxDate:mo(n,o.maxDate,r.maxDate),slots:m({toolbar:Bee},o.slots)})}const tg=({props:e,value:t,adapter:n})=>{if(t===null)return null;const{shouldDisableDate:r,shouldDisableMonth:o,shouldDisableYear:s,disablePast:i,disableFuture:l,timezone:a}=e,c=n.utils.date(void 0,a),d=mo(n.utils,e.minDate,n.defaultDates.minDate),f=mo(n.utils,e.maxDate,n.defaultDates.maxDate);switch(!0){case!n.utils.isValid(t):return"invalidDate";case!!(r&&r(t)):return"shouldDisableDate";case!!(o&&o(t)):return"shouldDisableMonth";case!!(s&&s(t)):return"shouldDisableYear";case!!(l&&n.utils.isAfterDay(t,c)):return"disableFuture";case!!(i&&n.utils.isBeforeDay(t,c)):return"disablePast";case!!(d&&n.utils.isBeforeDay(t,d)):return"minDate";case!!(f&&n.utils.isAfterDay(t,f)):return"maxDate";default:return null}};function Hee(e){return Be("MuiPickersPopper",e)}je("MuiPickersPopper",["root","paper"]);function zee(e,t){return Array.isArray(t)?t.every(n=>e.indexOf(n)!==-1):e.indexOf(t)!==-1}const _ee=(e,t)=>n=>{(n.key==="Enter"||n.key===" ")&&(e(n),n.preventDefault(),n.stopPropagation())},Tr=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?Tr(t.shadowRoot):t:null},Vee="@media (pointer: fine)",Wee="@media (prefers-reduced-motion: reduce)",za=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),QP=za&&za[1]?parseInt(za[1],10):null,KP=za&&za[2]?parseInt(za[2],10):null,Uee=QP&&QP<10||KP&&KP<13||!1,qO=()=>Em(Wee,{defaultMatches:!1})||Uee,Gee=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Qee=e=>{const{classes:t}=e;return Se({root:["root"],paper:["paper"]},Hee,t)},Kee=X($i,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({zIndex:e.zIndex.modal})),Yee=X($o,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})({outline:0,transformOrigin:"top center",variants:[{props:({placement:e})=>["top","top-start","top-end"].includes(e),style:{transformOrigin:"bottom center"}}]});function qee(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Xee(e,t){const n=h.useRef(!1),r=h.useRef(!1),o=h.useRef(null),s=h.useRef(!1);h.useEffect(()=>{if(!e)return;function a(){s.current=!0}return document.addEventListener("mousedown",a,!0),document.addEventListener("touchstart",a,!0),()=>{document.removeEventListener("mousedown",a,!0),document.removeEventListener("touchstart",a,!0),s.current=!1}},[e]);const i=Me(a=>{if(!s.current)return;const c=r.current;r.current=!1;const d=kt(o.current);if(!o.current||"clientX"in a&&qee(a,d))return;if(n.current){n.current=!1;return}let f;a.composedPath?f=a.composedPath().indexOf(o.current)>-1:f=!d.documentElement.contains(a.target)||o.current.contains(a.target),!f&&!c&&t(a)}),l=()=>{r.current=!0};return h.useEffect(()=>{if(e){const a=kt(o.current),c=()=>{n.current=!0};return a.addEventListener("touchstart",i),a.addEventListener("touchmove",c),()=>{a.removeEventListener("touchstart",i),a.removeEventListener("touchmove",c)}}},[e,i]),h.useEffect(()=>{if(e){const a=kt(o.current);return a.addEventListener("click",i),()=>{a.removeEventListener("click",i),r.current=!1}}},[e,i]),[o,l,l]}const Jee=h.forwardRef((e,t)=>{const{PaperComponent:n,popperPlacement:r,ownerState:o,children:s,paperSlotProps:i,paperClasses:l,onPaperClick:a,onPaperTouchStart:c}=e,d=ne(e,Gee),f=m({},o,{placement:r}),p=Ft({elementType:n,externalSlotProps:i,additionalProps:{tabIndex:-1,elevation:8,ref:t},className:l,ownerState:f});return u.jsx(n,m({},d,p,{onClick:b=>{var v;a(b),(v=p.onClick)==null||v.call(p,b)},onTouchStart:b=>{var v;c(b),(v=p.onTouchStart)==null||v.call(p,b)},ownerState:f,children:s}))});function Zee(e){const t=_t({props:e,name:"MuiPickersPopper"}),{anchorEl:n,children:r,containerRef:o=null,shouldRestoreFocus:s,onBlur:i,onDismiss:l,open:a,role:c,placement:d,slots:f,slotProps:p,reduceAnimations:b}=t;h.useEffect(()=>{function I(M){a&&M.key==="Escape"&&l()}return document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}},[l,a]);const v=h.useRef(null);h.useEffect(()=>{c==="tooltip"||s&&!s()||(a?v.current=Tr(document):v.current&&v.current instanceof HTMLElement&&setTimeout(()=>{v.current instanceof HTMLElement&&v.current.focus()}))},[a,c,s]);const[x,C,g]=Xee(a,i??l),y=h.useRef(null),w=rt(y,o),S=rt(w,x),P=t,E=Qee(P),A=qO(),k=b??A,j=I=>{I.key==="Escape"&&(I.stopPropagation(),l())},D=(f==null?void 0:f.desktopTransition)??k?Ec:Pl,N=(f==null?void 0:f.desktopTrapFocus)??Yx,F=(f==null?void 0:f.desktopPaper)??Yee,R=(f==null?void 0:f.popper)??Kee,O=Ft({elementType:R,externalSlotProps:p==null?void 0:p.popper,additionalProps:{transition:!0,role:c,open:a,anchorEl:n,placement:d,onKeyDown:j},className:E.root,ownerState:t});return u.jsx(R,m({},O,{children:({TransitionProps:I,placement:M})=>u.jsx(N,m({open:a,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:c==="tooltip",isEnabled:()=>!0},p==null?void 0:p.desktopTrapFocus,{children:u.jsx(D,m({},I,p==null?void 0:p.desktopTransition,{children:u.jsx(Jee,{PaperComponent:F,ownerState:P,popperPlacement:M,ref:S,onPaperClick:C,onPaperTouchStart:g,paperClasses:E.paper,paperSlotProps:p==null?void 0:p.desktopPaper,children:r})}))}))}))}const ete=({open:e,onOpen:t,onClose:n})=>{const r=h.useRef(typeof e=="boolean").current,[o,s]=h.useState(!1);h.useEffect(()=>{if(r){if(typeof e!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");s(e)}},[r,e]);const i=h.useCallback(l=>{r||s(l),l&&t&&t(),!l&&n&&n()},[r,t,n]);return{isOpen:o,setIsOpen:i}};function XO(e,t,n,r){const{value:o,onError:s}=e,i=Fl(),l=h.useRef(r),a=t({adapter:i,value:o,props:e});return h.useEffect(()=>{s&&!n(a,l.current)&&s(a,o),l.current=a},[n,s,l,a,o]),a}const K0=({timezone:e,value:t,defaultValue:n,onChange:r,valueManager:o})=>{const s=Bt(),i=h.useRef(n),l=t??i.current??o.emptyValue,a=h.useMemo(()=>o.getTimezone(s,l),[s,o,l]),c=Me(b=>a==null?b:o.setTimezone(s,a,b)),d=e??a??"default",f=h.useMemo(()=>o.setTimezone(s,d,l),[o,s,d,l]),p=Me((b,...v)=>{const x=c(b);r==null||r(x,...v)});return{value:f,handleValueChange:p,timezone:d}},Y0=({name:e,timezone:t,value:n,defaultValue:r,onChange:o,valueManager:s})=>{const[i,l]=zn({name:e,state:"value",controlled:n,default:r??s.emptyValue}),a=Me((c,...d)=>{l(c),o==null||o(c,...d)});return K0({timezone:t,value:i,defaultValue:void 0,onChange:a,valueManager:s})},tte=e=>{const{action:t,hasChanged:n,dateState:r,isControlled:o}=e,s=!o&&!r.hasBeenModifiedSinceMount;return t.name==="setValueFromField"?!0:t.name==="setValueFromAction"?s&&["accept","today","clear"].includes(t.pickerAction)?!0:n(r.lastPublishedValue):t.name==="setValueFromView"&&t.selectionState!=="shallow"||t.name==="setValueFromShortcut"?s?!0:n(r.lastPublishedValue):!1},nte=e=>{const{action:t,hasChanged:n,dateState:r,isControlled:o,closeOnSelect:s}=e,i=!o&&!r.hasBeenModifiedSinceMount;return t.name==="setValueFromAction"?i&&["accept","today","clear"].includes(t.pickerAction)?!0:n(r.lastCommittedValue):t.name==="setValueFromView"&&t.selectionState==="finish"&&s?i?!0:n(r.lastCommittedValue):t.name==="setValueFromShortcut"?t.changeImportance==="accept"&&n(r.lastCommittedValue):!1},rte=e=>{const{action:t,closeOnSelect:n}=e;return t.name==="setValueFromAction"?!0:t.name==="setValueFromView"?t.selectionState==="finish"&&n:t.name==="setValueFromShortcut"?t.changeImportance==="accept":!1},ote=({props:e,valueManager:t,valueType:n,wrapperVariant:r,validator:o})=>{const{onAccept:s,onChange:i,value:l,defaultValue:a,closeOnSelect:c=r==="desktop",timezone:d}=e,{current:f}=h.useRef(a),{current:p}=h.useRef(l!==void 0),b=Bt(),v=Fl(),{isOpen:x,setIsOpen:C}=ete(e),{timezone:g,value:y,handleValueChange:w}=K0({timezone:d,value:l,defaultValue:f,onChange:i,valueManager:t}),[S,P]=h.useState(()=>{let G;return y!==void 0?G=y:f!==void 0?G=f:G=t.emptyValue,{draft:G,lastPublishedValue:G,lastCommittedValue:G,lastControlledValue:y,hasBeenModifiedSinceMount:!1}});XO(m({},e,{value:S.draft,timezone:g}),o,t.isSameError,t.defaultErrorState);const E=Me(G=>{const Y={action:G,dateState:S,hasChanged:oe=>!t.areValuesEqual(b,G.value,oe),isControlled:p,closeOnSelect:c},V=tte(Y),Q=nte(Y),te=rte(Y);P(oe=>m({},oe,{draft:G.value,lastPublishedValue:V?G.value:oe.lastPublishedValue,lastCommittedValue:Q?G.value:oe.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let K=null;const J=()=>(K||(K={validationError:G.name==="setValueFromField"?G.context.validationError:o({adapter:v,value:G.value,props:m({},e,{value:G.value,timezone:g})})},G.name==="setValueFromShortcut"&&(K.shortcut=G.shortcut)),K);V&&w(G.value,J()),Q&&s&&s(G.value,J()),te&&C(!1)});if(y!==void 0&&(S.lastControlledValue===void 0||!t.areValuesEqual(b,S.lastControlledValue,y))){const G=t.areValuesEqual(b,S.draft,y);P(Y=>m({},Y,{lastControlledValue:y},G?{}:{lastCommittedValue:y,lastPublishedValue:y,draft:y,hasBeenModifiedSinceMount:!0}))}const A=Me(()=>{E({value:t.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),k=Me(()=>{E({value:S.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),j=Me(()=>{E({value:S.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),D=Me(()=>{E({value:S.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),N=Me(()=>{E({value:t.getTodayValue(b,g,n),name:"setValueFromAction",pickerAction:"today"})}),F=Me(G=>{G.preventDefault(),C(!0)}),R=Me(G=>{G==null||G.preventDefault(),C(!1)}),O=Me((G,Y="partial")=>E({name:"setValueFromView",value:G,selectionState:Y})),I=Me((G,Y,V)=>E({name:"setValueFromShortcut",value:G,changeImportance:Y,shortcut:V})),M=Me((G,Y)=>E({name:"setValueFromField",value:G,context:Y})),T={onClear:A,onAccept:k,onDismiss:j,onCancel:D,onSetToday:N,onOpen:F,onClose:R},$={value:S.draft,onChange:M},L=h.useMemo(()=>t.cleanValue(b,S.draft),[b,t,S.draft]),B={value:L,onChange:O,onClose:R,open:x},W=m({},T,{value:L,onChange:O,onSelectShortcut:I,isValid:G=>{const Y=o({adapter:v,value:G,props:m({},e,{value:G,timezone:g})});return!t.hasError(Y)}});return{open:x,fieldProps:$,viewProps:B,layoutProps:W,actions:T}};function JO({onChange:e,onViewChange:t,openTo:n,view:r,views:o,autoFocus:s,focusedView:i,onFocusedViewChange:l}){const a=h.useRef(n),c=h.useRef(o),d=h.useRef(o.includes(n)?n:o[0]),[f,p]=zn({name:"useViews",state:"view",controlled:r,default:d.current}),b=h.useRef(s?f:null),[v,x]=zn({name:"useViews",state:"focusedView",controlled:i,default:b.current});h.useEffect(()=>{(a.current&&a.current!==n||c.current&&c.current.some(A=>!o.includes(A)))&&(p(o.includes(n)?n:o[0]),c.current=o,a.current=n)},[n,p,f,o]);const C=o.indexOf(f),g=o[C-1]??null,y=o[C+1]??null,w=Me((A,k)=>{x(k?A:j=>A===j?null:j),l==null||l(A,k)}),S=Me(A=>{w(A,!0),A!==f&&(p(A),t&&t(A))}),P=Me(()=>{y&&S(y)}),E=Me((A,k,j)=>{const D=k==="finish",N=j?o.indexOf(j)<o.length-1:!!y;if(e(A,D&&N?"partial":k,j),j&&j!==f){const R=o[o.indexOf(j)+1];R&&S(R)}else D&&P()});return{view:f,setView:S,focusedView:v,setFocusedView:w,nextView:y,previousView:g,defaultView:o.includes(n)?n:o[0],goToNextView:P,setValueAndGoToNextView:E}}const ste=["className","sx"],ite=({props:e,propsFromPickerValue:t,additionalViewProps:n,autoFocusView:r,rendererInterceptor:o,fieldRef:s})=>{const{onChange:i,open:l,onClose:a}=t,{view:c,views:d,openTo:f,onViewChange:p,viewRenderers:b,timezone:v}=e,x=ne(e,ste),{view:C,setView:g,defaultView:y,focusedView:w,setFocusedView:S,setValueAndGoToNextView:P}=JO({view:c,views:d,openTo:f,onChange:i,onViewChange:p,autoFocus:r}),{hasUIView:E,viewModeLookup:A}=h.useMemo(()=>d.reduce((O,I)=>{let M;return b[I]!=null?M="UI":M="field",O.viewModeLookup[I]=M,M==="UI"&&(O.hasUIView=!0),O},{hasUIView:!1,viewModeLookup:{}}),[b,d]),k=h.useMemo(()=>d.reduce((O,I)=>b[I]!=null&&lee(I)?O+1:O,0),[b,d]),j=A[C],D=Me(()=>j==="UI"),[N,F]=h.useState(j==="UI"?C:null);return N!==C&&A[C]==="UI"&&F(C),ft(()=>{j==="field"&&l&&(a(),setTimeout(()=>{var O,I;(O=s==null?void 0:s.current)==null||O.setSelectedSections(C),(I=s==null?void 0:s.current)==null||I.focusField(C)}))},[C]),ft(()=>{if(!l)return;let O=C;j==="field"&&N!=null&&(O=N),O!==y&&A[O]==="UI"&&A[y]==="UI"&&(O=y),O!==C&&g(O),S(O,!0)},[l]),{hasUIView:E,shouldRestoreFocus:D,layoutProps:{views:d,view:N,onViewChange:g},renderCurrentView:()=>{if(N==null)return null;const O=b[N];if(O==null)return null;const I=m({},x,n,t,{views:d,timezone:v,onChange:P,view:N,onViewChange:g,focusedView:w,onFocusedViewChange:S,showViewSwitcher:k>1,timeViewsCount:k});return o?o(b,N,I):O(I)}}};function YP(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const lte=(e,t)=>{const[n,r]=h.useState(YP);return ft(()=>{const s=()=>{r(YP())};return window.addEventListener("orientationchange",s),()=>{window.removeEventListener("orientationchange",s)}},[]),zee(e,["hours","minutes","seconds"])?!1:(t||n)==="landscape"},ate=({props:e,propsFromPickerValue:t,propsFromPickerViews:n,wrapperVariant:r})=>{const{orientation:o}=e,s=lte(n.views,o),i=sr();return{layoutProps:m({},n,t,{isLandscape:s,isRtl:i,wrapperVariant:r,disabled:e.disabled,readOnly:e.readOnly})}};HO(["The `renderInput` prop has been removed in version 6.0 of the Date and Time Pickers.","You can replace it with the `textField` component slot in most cases.","For more information, please have a look at the migration guide (https://mui.com/x/migration/migration-pickers-v5/#input-renderer-required-in-v5)."]);const ZO=({props:e,valueManager:t,valueType:n,wrapperVariant:r,additionalViewProps:o,validator:s,autoFocusView:i,rendererInterceptor:l,fieldRef:a})=>{const c=ote({props:e,valueManager:t,valueType:n,wrapperVariant:r,validator:s}),d=ite({props:e,additionalViewProps:o,autoFocusView:i,fieldRef:a,propsFromPickerValue:c.viewProps,rendererInterceptor:l}),f=ate({props:e,wrapperVariant:r,propsFromPickerValue:c.layoutProps,propsFromPickerViews:d.layoutProps});return{open:c.open,actions:c.actions,fieldProps:c.fieldProps,renderCurrentView:d.renderCurrentView,hasUIView:d.hasUIView,shouldRestoreFocus:d.shouldRestoreFocus,layoutProps:f.layoutProps}};function eR(e){return Be("MuiPickersLayout",e)}const Vi=je("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),cte=["onAccept","onClear","onCancel","onSetToday","actions"];function ute(e){const{onAccept:t,onClear:n,onCancel:r,onSetToday:o,actions:s}=e,i=ne(e,cte),l=Ws();if(s==null||s.length===0)return null;const a=s==null?void 0:s.map(c=>{switch(c){case"clear":return u.jsx(xa,{onClick:n,children:l.clearButtonLabel},c);case"cancel":return u.jsx(xa,{onClick:r,children:l.cancelButtonLabel},c);case"accept":return u.jsx(xa,{onClick:t,children:l.okButtonLabel},c);case"today":return u.jsx(xa,{onClick:o,children:l.todayButtonLabel},c);default:return null}});return u.jsx(e5,m({},i,{children:a}))}const xd=36,ng=2,rg=320,dte=280,q0=336,fte=["items","changeImportance","isLandscape","onChange","isValid"],pte=["getValue"];function hte(e){const{items:t,changeImportance:n="accept",onChange:r,isValid:o}=e,s=ne(e,fte);if(t==null||t.length===0)return null;const i=t.map(l=>{let{getValue:a}=l,c=ne(l,pte);const d=a({isValid:o});return m({},c,{label:c.label,onClick:()=>{r(d,n,c)},disabled:!o(d)})});return u.jsx(e0,m({dense:!0,sx:[{maxHeight:q0,maxWidth:200,overflow:"auto"},...Array.isArray(s.sx)?s.sx:[s.sx]]},s,{children:i.map(l=>u.jsx(t0,{children:u.jsx(Gx,m({},l))},l.id??l.label))}))}function mte(e){return e.view!==null}const gte=e=>{const{classes:t,isLandscape:n}=e;return Se({root:["root",n&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},eR,t)},yte=e=>{const{wrapperVariant:t,onAccept:n,onClear:r,onCancel:o,onSetToday:s,view:i,views:l,onViewChange:a,value:c,onChange:d,onSelectShortcut:f,isValid:p,isLandscape:b,disabled:v,readOnly:x,children:C,slots:g,slotProps:y}=e,w=gte(e),S=(g==null?void 0:g.actionBar)??ute,P=Ft({elementType:S,externalSlotProps:y==null?void 0:y.actionBar,additionalProps:{onAccept:n,onClear:r,onCancel:o,onSetToday:s,actions:t==="desktop"?[]:["cancel","accept"]},className:w.actionBar,ownerState:m({},e,{wrapperVariant:t})}),E=u.jsx(S,m({},P)),A=g==null?void 0:g.toolbar,k=Ft({elementType:A,externalSlotProps:y==null?void 0:y.toolbar,additionalProps:{isLandscape:b,onChange:d,value:c,view:i,onViewChange:a,views:l,disabled:v,readOnly:x},className:w.toolbar,ownerState:m({},e,{wrapperVariant:t})}),j=mte(k)&&A?u.jsx(A,m({},k)):null,D=C,N=g==null?void 0:g.tabs,F=i&&N?u.jsx(N,m({view:i,onViewChange:a,className:w.tabs},y==null?void 0:y.tabs)):null,R=(g==null?void 0:g.shortcuts)??hte,O=Ft({elementType:R,externalSlotProps:y==null?void 0:y.shortcuts,additionalProps:{isValid:p,isLandscape:b,onChange:f},className:w.shortcuts,ownerState:{isValid:p,isLandscape:b,onChange:f,wrapperVariant:t}}),I=i&&R?u.jsx(R,m({},O)):null;return{toolbar:j,content:D,tabs:F,actionBar:E,shortcuts:I}},vte=e=>{const{isLandscape:t,classes:n}=e;return Se({root:["root",t&&"landscape"],contentWrapper:["contentWrapper"]},eR,n)},bte=X("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Vi.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{isLandscape:!0},style:{[`& .${Vi.toolbar}`]:{gridColumn:1,gridRow:"2 / 3"},[`.${Vi.shortcuts}`]:{gridColumn:"2 / 4",gridRow:1}}},{props:{isLandscape:!0,isRtl:!0},style:{[`& .${Vi.toolbar}`]:{gridColumn:3}}},{props:{isLandscape:!1},style:{[`& .${Vi.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${Vi.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{isLandscape:!1,isRtl:!0},style:{[`& .${Vi.shortcuts}`]:{gridColumn:3}}}]}),xte=X("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(e,t)=>t.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),tR=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiPickersLayout"}),{toolbar:o,content:s,tabs:i,actionBar:l,shortcuts:a}=yte(r),{sx:c,className:d,isLandscape:f,wrapperVariant:p}=r,b=vte(r);return u.jsxs(bte,{ref:n,sx:c,className:ce(d,b.root),ownerState:r,children:[f?a:o,f?o:a,u.jsx(xte,{className:b.contentWrapper,children:p==="desktop"?u.jsxs(h.Fragment,{children:[s,i]}):u.jsxs(h.Fragment,{children:[i,s]})}),l]})}),Cte=["props","getOpenDialogAriaText"],wte=["ownerState"],Ste=["ownerState"],Pte=e=>{var Z;let{props:t,getOpenDialogAriaText:n}=e,r=ne(e,Cte);const{slots:o,slotProps:s,className:i,sx:l,format:a,formatDensity:c,enableAccessibleFieldDOMStructure:d,selectedSections:f,onSelectedSectionsChange:p,timezone:b,name:v,label:x,inputRef:C,readOnly:g,disabled:y,autoFocus:w,localeText:S,reduceAnimations:P}=t,E=Bt(),A=h.useRef(null),k=h.useRef(null),j=bt(),D=((Z=s==null?void 0:s.toolbar)==null?void 0:Z.hidden)??!1,{open:N,actions:F,hasUIView:R,layoutProps:O,renderCurrentView:I,shouldRestoreFocus:M,fieldProps:T}=ZO(m({},r,{props:t,fieldRef:k,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),$=o.inputAdornment??Hm,L=Ft({elementType:$,externalSlotProps:s==null?void 0:s.inputAdornment,additionalProps:{position:"end"},ownerState:t}),B=ne(L,wte),z=o.openPickerButton??jr,W=Ft({elementType:z,externalSlotProps:s==null?void 0:s.openPickerButton,additionalProps:{disabled:y||g,onClick:N?F.onClose:F.onOpen,"aria-label":n(T.value,E),edge:B.position},ownerState:t}),G=ne(W,Ste),Y=o.openPickerIcon,V=o.field,Q=Ft({elementType:V,externalSlotProps:s==null?void 0:s.field,additionalProps:m({},T,D&&{id:j},{readOnly:g,disabled:y,className:i,sx:l,format:a,formatDensity:c,enableAccessibleFieldDOMStructure:d,selectedSections:f,onSelectedSectionsChange:p,timezone:b,label:x,name:v,autoFocus:w&&!t.open,focused:N?!0:void 0},C?{inputRef:C}:{}),ownerState:t});R&&(Q.InputProps=m({},Q.InputProps,{ref:A},!t.disableOpenPicker&&{[`${B.position}Adornment`]:u.jsx($,m({},B,{children:u.jsx(z,m({},G,{children:u.jsx(Y,m({},s==null?void 0:s.openPickerIcon))}))}))}));const te=m({textField:o.textField,clearIcon:o.clearIcon,clearButton:o.clearButton},Q.slots),K=o.layout??tR;let J=j;D&&(x?J=`${j}-label`:J=void 0);const oe=m({},s,{toolbar:m({},s==null?void 0:s.toolbar,{titleId:j}),popper:m({"aria-labelledby":J},s==null?void 0:s.popper)}),de=rt(k,Q.unstableFieldRef);return{renderPicker:()=>u.jsxs(_0,{localeText:S,children:[u.jsx(V,m({},Q,{slots:te,slotProps:oe,unstableFieldRef:de})),u.jsx(Zee,m({role:"dialog",placement:"bottom-start",anchorEl:A.current},F,{open:N,slots:o,slotProps:oe,shouldRestoreFocus:M,reduceAnimations:P,children:u.jsx(K,m({},O,oe==null?void 0:oe.layout,{slots:o,slotProps:oe,children:I()}))}))]})}},Ate=Je(u.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Ete=Je(u.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),kte=Je(u.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),Ite=Je(u.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");Je(u.jsxs(h.Fragment,{children:[u.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),u.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");Je(u.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange");Je(u.jsxs(h.Fragment,{children:[u.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),u.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");const Mte=Je(u.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),Tte=({utils:e,format:t})=>{let n=10,r=t,o=e.expandFormat(t);for(;o!==r;)if(r=o,o=e.expandFormat(r),n-=1,n<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the picker component.");return o},Ote=({utils:e,expandedFormat:t})=>{const n=[],{start:r,end:o}=e.escapedCharacters,s=new RegExp(`(\\${r}[^\\${o}]*\\${o})+`,"g");let i=null;for(;i=s.exec(t);)n.push({start:i.index,end:s.lastIndex-1});return n},Rte=(e,t,n,r,o)=>{switch(r.type){case"year":return n.fieldYearPlaceholder({digitAmount:e.formatByString(e.date(void 0,t),o).length,format:o});case"month":return n.fieldMonthPlaceholder({contentType:r.contentType,format:o});case"day":return n.fieldDayPlaceholder({format:o});case"weekDay":return n.fieldWeekDayPlaceholder({contentType:r.contentType,format:o});case"hours":return n.fieldHoursPlaceholder({format:o});case"minutes":return n.fieldMinutesPlaceholder({format:o});case"seconds":return n.fieldSecondsPlaceholder({format:o});case"meridiem":return n.fieldMeridiemPlaceholder({format:o});default:return o}},Dte=({utils:e,timezone:t,date:n,shouldRespectLeadingZeros:r,localeText:o,localizedDigits:s,now:i,token:l,startSeparator:a})=>{if(l==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=_O(e,l),d=QO(e,t,c.contentType,c.type,l),f=r?d:c.contentType==="digit",p=n!=null&&e.isValid(n);let b=p?e.formatByString(n,l):"",v=null;if(f)if(d)v=b===""?e.formatByString(i,l).length:b.length;else{if(c.maxLength==null)throw new Error(`MUI X: The token ${l} should have a 'maxDigitNumber' property on it's adapter`);v=c.maxLength,p&&(b=G0(WO(Il(b,s),v),s))}return m({},c,{format:l,maxLength:v,value:b,placeholder:Rte(e,t,o,c,l),hasLeadingZerosInFormat:d,hasLeadingZerosInInput:f,startSeparator:a,endSeparator:"",modified:!1})},Fte=e=>{var b;const{utils:t,expandedFormat:n,escapedParts:r}=e,o=t.date(void 0),s=[];let i="";const l=Object.keys(t.formatTokenMap).sort((v,x)=>x.length-v.length),a=/^([a-zA-Z]+)/,c=new RegExp(`^(${l.join("|")})*$`),d=new RegExp(`^(${l.join("|")})`),f=v=>r.find(x=>x.start<=v&&x.end>=v);let p=0;for(;p<n.length;){const v=f(p),x=v!=null,C=(b=a.exec(n.slice(p)))==null?void 0:b[1];if(!x&&C!=null&&c.test(C)){let g=C;for(;g.length>0;){const y=d.exec(g)[1];g=g.slice(y.length),s.push(Dte(m({},e,{now:o,token:y,startSeparator:i}))),i=""}p+=C.length}else{const g=n[p];x&&(v==null?void 0:v.start)===p||(v==null?void 0:v.end)===p||(s.length===0?i+=g:s[s.length-1].endSeparator+=g),p+=1}}return s.length===0&&i.length>0&&s.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:i,endSeparator:"",modified:!1}),s},jte=({isRtl:e,formatDensity:t,sections:n})=>n.map(r=>{const o=s=>{let i=s;return e&&i!==null&&i.includes(" ")&&(i=`⁩${i}⁦`),t==="spacious"&&["/",".","-"].includes(i)&&(i=` ${i} `),i};return r.startSeparator=o(r.startSeparator),r.endSeparator=o(r.endSeparator),r}),qP=e=>{let t=Tte(e);e.isRtl&&e.enableAccessibleFieldDOMStructure&&(t=t.split(" ").reverse().join(" "));const n=Ote(m({},e,{expandedFormat:t})),r=Fte(m({},e,{expandedFormat:t,escapedParts:n}));return jte(m({},e,{sections:r}))},$te=e=>{const t=Bt(),n=Ws(),r=Fl(),o=sr(),{valueManager:s,fieldValueManager:i,valueType:l,validator:a,internalProps:c,internalProps:{value:d,defaultValue:f,referenceDate:p,onChange:b,format:v,formatDensity:x="dense",selectedSections:C,onSelectedSectionsChange:g,shouldRespectLeadingZeros:y=!1,timezone:w,enableAccessibleFieldDOMStructure:S=!1}}=e,{timezone:P,value:E,handleValueChange:A}=K0({timezone:w,value:d,defaultValue:f,onChange:b,valueManager:s}),k=h.useMemo(()=>pee(t),[t]),j=h.useMemo(()=>vee(t,k,P),[t,k,P]),D=h.useCallback((V,Q=null)=>i.getSectionsFromValue(t,V,Q,te=>qP({utils:t,timezone:P,localeText:n,localizedDigits:k,format:v,date:te,formatDensity:x,shouldRespectLeadingZeros:y,enableAccessibleFieldDOMStructure:S,isRtl:o})),[i,v,n,k,o,y,t,x,P,S]),[N,F]=h.useState(()=>{const V=D(E),Q={sections:V,value:E,referenceValue:s.emptyValue,tempValueStrAndroid:null},te=cee(V),K=s.getInitialReferenceValue({referenceDate:p,value:E,utils:t,props:c,granularity:te,timezone:P});return m({},Q,{referenceValue:K})}),[R,O]=zn({controlled:C,default:null,name:"useField",state:"selectedSections"}),I=V=>{O(V),g==null||g(V)},M=h.useMemo(()=>tb(R,N.sections),[R,N.sections]),T=M==="all"?0:M,$=({value:V,referenceValue:Q,sections:te})=>{if(F(J=>m({},J,{sections:te,value:V,referenceValue:Q,tempValueStrAndroid:null})),s.areValuesEqual(t,N.value,V))return;const K={validationError:a({adapter:r,value:V,props:m({},c,{value:V,timezone:P})})};A(V,K)},L=(V,Q)=>{const te=[...N.sections];return te[V]=m({},te[V],{value:Q,modified:!0}),te},B=()=>{$({value:s.emptyValue,referenceValue:N.referenceValue,sections:D(s.emptyValue)})},z=()=>{if(T==null)return;const V=N.sections[T],Q=i.getActiveDateManager(t,N,V),K=Q.getSections(N.sections).filter(ie=>ie.value!=="").length===(V.value===""?0:1),J=L(T,""),oe=K?null:t.getInvalidDate(),de=Q.getNewValuesFromNewActiveDate(oe);$(m({},de,{sections:J}))},W=V=>{const Q=(J,oe)=>{const de=t.parse(J,v);if(de==null||!t.isValid(de))return null;const ie=qP({utils:t,timezone:P,localeText:n,localizedDigits:k,format:v,date:de,formatDensity:x,shouldRespectLeadingZeros:y,enableAccessibleFieldDOMStructure:S,isRtl:o});return GP(t,P,de,ie,oe,!1)},te=i.parseValueStr(V,N.referenceValue,Q),K=i.updateReferenceValue(t,te,N.referenceValue);$({value:te,referenceValue:K,sections:D(te,N.sections)})},G=({activeSection:V,newSectionValue:Q,shouldGoToNextSection:te})=>{te&&T<N.sections.length-1&&I(T+1);const K=i.getActiveDateManager(t,N,V),J=L(T,Q),oe=K.getSections(J),de=mee(t,oe,k);let ie,Z;if(de!=null&&t.isValid(de)){const se=GP(t,P,de,oe,K.referenceDate,!0);ie=K.getNewValuesFromNewActiveDate(se),Z=!0}else ie=K.getNewValuesFromNewActiveDate(de),Z=(de!=null&&!t.isValid(de))!=(K.date!=null&&!t.isValid(K.date));return Z?$(m({},ie,{sections:J})):F(se=>m({},se,ie,{sections:J,tempValueStrAndroid:null}))},Y=V=>F(Q=>m({},Q,{tempValueStrAndroid:V}));return h.useEffect(()=>{const V=D(N.value);F(Q=>m({},Q,{sections:V}))},[v,t.locale,o]),h.useEffect(()=>{let V;s.areValuesEqual(t,N.value,E)?V=s.getTimezone(t,N.value)!==s.getTimezone(t,E):V=!0,V&&F(Q=>m({},Q,{value:E,referenceValue:i.updateReferenceValue(t,E,Q.referenceValue),sections:D(E)}))},[E]),{state:N,activeSectionIndex:T,parsedSelectedSections:M,setSelectedSections:I,clearValue:B,clearActiveSection:z,updateSectionValue:G,updateValueFromValueStr:W,setTempAndroidValueStr:Y,getSectionsFromValue:D,sectionsValueBoundaries:j,localizedDigits:k,timezone:P}},Lte=5e3,Xl=e=>e.saveQuery!=null,Nte=({sections:e,updateSectionValue:t,sectionsValueBoundaries:n,localizedDigits:r,setTempAndroidValueStr:o,timezone:s})=>{const i=Bt(),[l,a]=h.useState(null),c=Me(()=>a(null));h.useEffect(()=>{var v;l!=null&&((v=e[l.sectionIndex])==null?void 0:v.type)!==l.sectionType&&c()},[e,l,c]),h.useEffect(()=>{if(l!=null){const v=setTimeout(()=>c(),Lte);return()=>{clearTimeout(v)}}return()=>{}},[l,c]);const d=({keyPressed:v,sectionIndex:x},C,g)=>{const y=v.toLowerCase(),w=e[x];if(l!=null&&(!g||g(l.value))&&l.sectionIndex===x){const P=`${l.value}${y}`,E=C(P,w);if(!Xl(E))return a({sectionIndex:x,value:P,sectionType:w.type}),E}const S=C(y,w);return Xl(S)&&!S.saveQuery?(c(),null):(a({sectionIndex:x,value:y,sectionType:w.type}),Xl(S)?null:S)},f=v=>{const x=(y,w,S)=>{const P=w.filter(E=>E.toLowerCase().startsWith(S));return P.length===0?{saveQuery:!1}:{sectionValue:P[0],shouldGoToNextSection:P.length===1}},C=(y,w,S,P)=>{const E=A=>VO(i,s,w.type,A);if(w.contentType==="letter")return x(w.format,E(w.format),y);if(S&&P!=null&&_O(i,S).contentType==="letter"){const A=E(S),k=x(S,A,y);return Xl(k)?{saveQuery:!1}:m({},k,{sectionValue:P(k.sectionValue,A)})}return{saveQuery:!1}};return d(v,(y,w)=>{switch(w.type){case"month":{const S=P=>WP(i,P,i.formats.month,w.format);return C(y,w,i.formats.month,S)}case"weekDay":{const S=(P,E)=>E.indexOf(P).toString();return C(y,w,i.formats.weekday,S)}case"meridiem":return C(y,w);default:return{saveQuery:!1}}})},p=v=>{const x=(g,y)=>{const w=Il(g,r),S=Number(w),P=n[y.type]({currentDate:null,format:y.format,contentType:y.contentType});if(S>P.maximum)return{saveQuery:!1};if(S<P.minimum)return{saveQuery:!0};const E=S*10>P.maximum||w.length===P.maximum.toString().length;return{sectionValue:UO(i,S,P,r,y),shouldGoToNextSection:E}};return d(v,(g,y)=>{if(y.contentType==="digit"||y.contentType==="digit-with-letter")return x(g,y);if(y.type==="month"){const w=QO(i,s,"digit","month","MM"),S=x(g,{type:y.type,format:"MM",hasLeadingZerosInFormat:w,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(Xl(S))return S;const P=WP(i,S.sectionValue,"MM",y.format);return m({},S,{sectionValue:P})}if(y.type==="weekDay"){const w=x(g,y);if(Xl(w))return w;const S=Zm(i,s,y.format)[Number(w.sectionValue)-1];return m({},w,{sectionValue:S})}return{saveQuery:!1}},g=>VP(g,r))};return{applyCharacterEditing:Me(v=>{const x=e[v.sectionIndex],g=VP(v.keyPressed,r)?p(m({},v,{keyPressed:G0(v.keyPressed,r)})):f(v);if(g==null){o(null);return}t({activeSection:x,newSectionValue:g.sectionValue,shouldGoToNextSection:g.shouldGoToNextSection})}),resetCharacterQuery:c}},Bte=e=>{const{internalProps:{disabled:t,readOnly:n=!1},forwardedProps:{sectionListRef:r,onBlur:o,onClick:s,onFocus:i,onInput:l,onPaste:a,focused:c,autoFocus:d=!1},fieldValueManager:f,applyCharacterEditing:p,resetCharacterQuery:b,setSelectedSections:v,parsedSelectedSections:x,state:C,clearActiveSection:g,clearValue:y,updateSectionValue:w,updateValueFromValueStr:S,sectionOrder:P,areAllSectionsEmpty:E,sectionsValueBoundaries:A}=e,k=h.useRef(null),j=rt(r,k),D=Ws(),N=Bt(),F=bt(),[R,O]=h.useState(!1),I=h.useMemo(()=>({syncSelectionToDOM:()=>{if(!k.current)return;const Z=document.getSelection();if(!Z)return;if(x==null){Z.rangeCount>0&&k.current.getRoot().contains(Z.getRangeAt(0).startContainer)&&Z.removeAllRanges(),R&&k.current.getRoot().blur();return}if(!k.current.getRoot().contains(Tr(document)))return;const se=new window.Range;let le;x==="all"?le=k.current.getRoot():C.sections[x].type==="empty"?le=k.current.getSectionContainer(x):le=k.current.getSectionContent(x),se.selectNodeContents(le),le.focus(),Z.removeAllRanges(),Z.addRange(se)},getActiveSectionIndexFromDOM:()=>{const Z=Tr(document);return!Z||!k.current||!k.current.getRoot().contains(Z)?null:k.current.getSectionIndexFromDOMElement(Z)},focusField:(Z=0)=>{if(!k.current)return;const se=tb(Z,C.sections);O(!0),k.current.getSectionContent(se).focus()},setSelectedSections:Z=>{if(!k.current)return;const se=tb(Z,C.sections);O((se==="all"?0:se)!==null),v(Z)},isFieldFocused:()=>{const Z=Tr(document);return!!k.current&&k.current.getRoot().contains(Z)}}),[x,v,C.sections,R]),M=Me(Z=>{if(!k.current)return;const se=C.sections[Z];k.current.getSectionContent(Z).innerHTML=se.value||se.placeholder,I.syncSelectionToDOM()}),T=Me((Z,...se)=>{Z.isDefaultPrevented()||!k.current||(O(!0),s==null||s(Z,...se),x==="all"?setTimeout(()=>{const le=document.getSelection().getRangeAt(0).startOffset;if(le===0){v(P.startIndex);return}let he=0,Pe=0;for(;Pe<le&&he<C.sections.length;){const H=C.sections[he];he+=1,Pe+=`${H.startSeparator}${H.value||H.placeholder}${H.endSeparator}`.length}v(he-1)}):R?k.current.getRoot().contains(Z.target)||v(P.startIndex):(O(!0),v(P.startIndex)))}),$=Me(Z=>{if(l==null||l(Z),!k.current||x!=="all")return;const le=Z.target.textContent??"";k.current.getRoot().innerHTML=C.sections.map(he=>`${he.startSeparator}${he.value||he.placeholder}${he.endSeparator}`).join(""),I.syncSelectionToDOM(),le.length===0||le.charCodeAt(0)===10?(b(),y(),v("all")):le.length>1?S(le):p({keyPressed:le,sectionIndex:0})}),L=Me(Z=>{if(a==null||a(Z),n||x!=="all"){Z.preventDefault();return}const se=Z.clipboardData.getData("text");Z.preventDefault(),b(),S(se)}),B=Me((...Z)=>{if(i==null||i(...Z),R||!k.current)return;O(!0),k.current.getSectionIndexFromDOMElement(Tr(document))!=null||v(P.startIndex)}),z=Me((...Z)=>{o==null||o(...Z),setTimeout(()=>{if(!k.current)return;const se=Tr(document);!k.current.getRoot().contains(se)&&(O(!1),v(null))})}),W=Me(Z=>se=>{se.isDefaultPrevented()||v(Z)}),G=Me(Z=>{Z.preventDefault()}),Y=Me(Z=>()=>{v(Z)}),V=Me(Z=>{if(Z.preventDefault(),n||typeof x!="number")return;const se=C.sections[x],le=Z.clipboardData.getData("text"),he=/^[a-zA-Z]+$/.test(le),Pe=/^[0-9]+$/.test(le),H=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(le);se.contentType==="letter"&&he||se.contentType==="digit"&&Pe||se.contentType==="digit-with-letter"&&H?(b(),w({activeSection:se,newSectionValue:le,shouldGoToNextSection:!0})):!he&&!Pe&&(b(),S(le))}),Q=Me(Z=>{Z.preventDefault(),Z.dataTransfer.dropEffect="none"}),te=Me(Z=>{if(!k.current)return;const se=Z.target,le=se.textContent??"",he=k.current.getSectionIndexFromDOMElement(se),Pe=C.sections[he];if(n||!k.current){M(he);return}if(le.length===0){if(Pe.value===""){M(he);return}const H=Z.nativeEvent.inputType;if(H==="insertParagraph"||H==="insertLineBreak"){M(he);return}b(),g();return}p({keyPressed:le,sectionIndex:he}),M(he)});ft(()=>{if(!(!R||!k.current)){if(x==="all")k.current.getRoot().focus();else if(typeof x=="number"){const Z=k.current.getSectionContent(x);Z&&Z.focus()}}},[x,R]);const K=h.useMemo(()=>C.sections.reduce((Z,se)=>(Z[se.type]=A[se.type]({currentDate:null,contentType:se.contentType,format:se.format}),Z),{}),[A,C.sections]),J=x==="all",oe=h.useMemo(()=>C.sections.map((Z,se)=>{const le=!J&&!t&&!n;return{container:{"data-sectionindex":se,onClick:W(se)},content:{tabIndex:J||se>0?-1:0,contentEditable:!J&&!t&&!n,role:"spinbutton",id:`${F}-${Z.type}`,"aria-labelledby":`${F}-${Z.type}`,"aria-readonly":n,"aria-valuenow":See(Z,N),"aria-valuemin":K[Z.type].minimum,"aria-valuemax":K[Z.type].maximum,"aria-valuetext":Z.value?wee(Z,N):D.empty,"aria-label":D[Z.type],"aria-disabled":t,spellCheck:le?!1:void 0,autoCapitalize:le?"off":void 0,autoCorrect:le?"off":void 0,[parseInt(h.version,10)>=17?"enterKeyHint":"enterkeyhint"]:le?"next":void 0,children:Z.value||Z.placeholder,onInput:te,onPaste:V,onFocus:Y(se),onDragOver:Q,onMouseUp:G,inputMode:Z.contentType==="letter"?"text":"numeric"},before:{children:Z.startSeparator},after:{children:Z.endSeparator}}}),[C.sections,Y,V,Q,te,W,G,t,n,J,D,N,K,F]),de=Me(Z=>{S(Z.target.value)}),ie=h.useMemo(()=>E?"":f.getV7HiddenInputValueFromSections(C.sections),[E,C.sections,f]);return h.useEffect(()=>{if(k.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please remove the `enableAccessibleFieldDOMStructure` prop from your picker or field component:","","<DatePicker slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));d&&k.current&&k.current.getSectionContent(P.startIndex).focus()},[]),{interactions:I,returnedValue:{autoFocus:d,readOnly:n,focused:c??R,sectionListRef:j,onBlur:z,onClick:T,onFocus:B,onInput:$,onPaste:L,enableAccessibleFieldDOMStructure:!0,elements:oe,tabIndex:x===0?-1:0,contentEditable:J,value:ie,onChange:de,areAllSectionsEmpty:E}}},Pa=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),Hte=(e,t,n)=>{let r=0,o=n?1:0;const s=[];for(let i=0;i<e.length;i+=1){const l=e[i],a=Q0(l,n?"input-rtl":"input-ltr",t),c=`${l.startSeparator}${a}${l.endSeparator}`,d=Pa(c).length,f=c.length,p=Pa(a),b=o+(p===""?0:a.indexOf(p[0]))+l.startSeparator.length,v=b+p.length;s.push(m({},l,{start:r,end:r+d,startInInput:b,endInInput:v})),r+=d,o+=f}return s},zte=e=>{const t=sr(),n=h.useRef(),r=h.useRef(),{forwardedProps:{onFocus:o,onClick:s,onPaste:i,onBlur:l,inputRef:a,placeholder:c},internalProps:{readOnly:d=!1},parsedSelectedSections:f,activeSectionIndex:p,state:b,fieldValueManager:v,valueManager:x,applyCharacterEditing:C,resetCharacterQuery:g,updateSectionValue:y,updateValueFromValueStr:w,clearActiveSection:S,clearValue:P,setTempAndroidValueStr:E,setSelectedSections:A,getSectionsFromValue:k,areAllSectionsEmpty:j,localizedDigits:D}=e,N=h.useRef(null),F=rt(a,N),R=h.useMemo(()=>Hte(b.sections,D,t),[b.sections,D,t]),O=h.useMemo(()=>({syncSelectionToDOM:()=>{if(!N.current)return;if(f==null){N.current.scrollLeft&&(N.current.scrollLeft=0);return}if(N.current!==Tr(document))return;const Q=N.current.scrollTop;if(f==="all")N.current.select();else{const te=R[f],K=te.type==="empty"?te.startInInput-te.startSeparator.length:te.startInInput,J=te.type==="empty"?te.endInInput+te.endSeparator.length:te.endInInput;(K!==N.current.selectionStart||J!==N.current.selectionEnd)&&N.current===Tr(document)&&N.current.setSelectionRange(K,J),clearTimeout(r.current),r.current=setTimeout(()=>{N.current&&N.current===Tr(document)&&N.current.selectionStart===N.current.selectionEnd&&(N.current.selectionStart!==K||N.current.selectionEnd!==J)&&O.syncSelectionToDOM()})}N.current.scrollTop=Q},getActiveSectionIndexFromDOM:()=>{const Q=N.current.selectionStart??0,te=N.current.selectionEnd??0;if(Q===0&&te===0)return null;const K=Q<=R[0].startInInput?1:R.findIndex(J=>J.startInInput-J.startSeparator.length>Q);return K===-1?R.length-1:K-1},focusField:(Q=0)=>{var te;(te=N.current)==null||te.focus(),A(Q)},setSelectedSections:Q=>A(Q),isFieldFocused:()=>N.current===Tr(document)}),[N,f,R,A]),I=()=>{const Q=N.current.selectionStart??0;let te;Q<=R[0].startInInput||Q>=R[R.length-1].endInInput?te=1:te=R.findIndex(J=>J.startInInput-J.startSeparator.length>Q);const K=te===-1?R.length-1:te-1;A(K)},M=Me((...Q)=>{o==null||o(...Q);const te=N.current;clearTimeout(n.current),n.current=setTimeout(()=>{!te||te!==N.current||p==null&&(te.value.length&&Number(te.selectionEnd)-Number(te.selectionStart)===te.value.length?A("all"):I())})}),T=Me((Q,...te)=>{Q.isDefaultPrevented()||(s==null||s(Q,...te),I())}),$=Me(Q=>{if(i==null||i(Q),Q.preventDefault(),d)return;const te=Q.clipboardData.getData("text");if(typeof f=="number"){const K=b.sections[f],J=/^[a-zA-Z]+$/.test(te),oe=/^[0-9]+$/.test(te),de=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(te);if(K.contentType==="letter"&&J||K.contentType==="digit"&&oe||K.contentType==="digit-with-letter"&&de){g(),y({activeSection:K,newSectionValue:te,shouldGoToNextSection:!0});return}if(J||oe)return}g(),w(te)}),L=Me((...Q)=>{l==null||l(...Q),A(null)}),B=Me(Q=>{if(d)return;const te=Q.target.value;if(te===""){g(),P();return}const K=Q.nativeEvent.data,J=K&&K.length>1,oe=J?K:te,de=Pa(oe);if(p==null||J){w(J?K:de);return}let ie;if(f==="all"&&de.length===1)ie=de;else{const Z=Pa(v.getV6InputValueFromSections(R,D,t));let se=-1,le=-1;for(let q=0;q<Z.length;q+=1)se===-1&&Z[q]!==de[q]&&(se=q),le===-1&&Z[Z.length-q-1]!==de[de.length-q-1]&&(le=q);const he=R[p];if(se<he.start||Z.length-le-1>he.end)return;const H=de.length-Z.length+he.end-Pa(he.endSeparator||"").length;ie=de.slice(he.start+Pa(he.startSeparator||"").length,H)}if(ie.length===0){xee()&&E(oe),g(),S();return}C({keyPressed:ie,sectionIndex:p})}),z=h.useMemo(()=>c!==void 0?c:v.getV6InputValueFromSections(k(x.emptyValue),D,t),[c,v,k,x.emptyValue,D,t]),W=h.useMemo(()=>b.tempValueStrAndroid??v.getV6InputValueFromSections(b.sections,D,t),[b.sections,v,b.tempValueStrAndroid,D,t]);h.useEffect(()=>(N.current&&N.current===Tr(document)&&A("all"),()=>{clearTimeout(n.current),clearTimeout(r.current)}),[]);const G=h.useMemo(()=>p==null||b.sections[p].contentType==="letter"?"text":"numeric",[p,b.sections]),V=!(N.current&&N.current===Tr(document))&&j;return{interactions:O,returnedValue:{readOnly:d,onBlur:L,onClick:T,onFocus:M,onPaste:$,inputRef:F,enableAccessibleFieldDOMStructure:!1,placeholder:z,inputMode:G,autoComplete:"off",value:V?"":W,onChange:B}}},_te=e=>{const t=Bt(),{internalProps:n,internalProps:{unstableFieldRef:r,minutesStep:o,enableAccessibleFieldDOMStructure:s=!1,disabled:i=!1,readOnly:l=!1},forwardedProps:{onKeyDown:a,error:c,clearable:d,onClear:f},fieldValueManager:p,valueManager:b,validator:v}=e,x=sr(),C=$te(e),{state:g,activeSectionIndex:y,parsedSelectedSections:w,setSelectedSections:S,clearValue:P,clearActiveSection:E,updateSectionValue:A,setTempAndroidValueStr:k,sectionsValueBoundaries:j,localizedDigits:D,timezone:N}=C,F=Nte({sections:g.sections,updateSectionValue:A,sectionsValueBoundaries:j,localizedDigits:D,setTempAndroidValueStr:k,timezone:N}),{resetCharacterQuery:R}=F,O=b.areValuesEqual(t,g.value,b.emptyValue),I=s?Bte:zte,M=h.useMemo(()=>Cee(g.sections,x&&!s),[g.sections,x,s]),{returnedValue:T,interactions:$}=I(m({},e,C,F,{areAllSectionsEmpty:O,sectionOrder:M})),L=Me(V=>{switch(a==null||a(V),!0){case((V.ctrlKey||V.metaKey)&&V.key.toLowerCase()==="a"&&!V.shiftKey&&!V.altKey):{V.preventDefault(),S("all");break}case V.key==="ArrowRight":{if(V.preventDefault(),w==null)S(M.startIndex);else if(w==="all")S(M.endIndex);else{const Q=M.neighbors[w].rightIndex;Q!==null&&S(Q)}break}case V.key==="ArrowLeft":{if(V.preventDefault(),w==null)S(M.endIndex);else if(w==="all")S(M.startIndex);else{const Q=M.neighbors[w].leftIndex;Q!==null&&S(Q)}break}case V.key==="Delete":{if(V.preventDefault(),l)break;w==null||w==="all"?P():E(),R();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(V.key):{if(V.preventDefault(),l||y==null)break;const Q=g.sections[y],te=p.getActiveDateManager(t,g,Q),K=hee(t,N,Q,V.key,j,D,te.date,{minutesStep:o});A({activeSection:Q,newSectionValue:K,shouldGoToNextSection:!1});break}}});ft(()=>{$.syncSelectionToDOM()});const B=XO(m({},n,{value:g.value,timezone:N}),v,b.isSameError,b.defaultErrorState),z=h.useMemo(()=>c!==void 0?c:b.hasError(B),[b,B,c]);h.useEffect(()=>{!z&&y==null&&R()},[g.referenceValue,y,z]),h.useEffect(()=>{g.tempValueStrAndroid!=null&&y!=null&&(R(),E())},[g.sections]),h.useImperativeHandle(r,()=>({getSections:()=>g.sections,getActiveSectionIndex:$.getActiveSectionIndexFromDOM,setSelectedSections:$.setSelectedSections,focusField:$.focusField,isFieldFocused:$.isFieldFocused}));const W=Me((V,...Q)=>{V.preventDefault(),f==null||f(V,...Q),P(),$.isFieldFocused()?S(M.startIndex):$.focusField(0)}),G={onKeyDown:L,onClear:W,error:z,clearable:!!(d&&!O&&!l&&!i)},Y={disabled:i,readOnly:l};return m({},e.forwardedProps,G,Y,T)},nR=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],Vte=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],Wte=["minDateTime","maxDateTime"],Ute=[...nR,...Vte,...Wte],rR=e=>Ute.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{}),Gte=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator"],Qte=(e,t)=>{const n=m({},e),r={},o=s=>{n.hasOwnProperty(s)&&(r[s]=n[s],delete n[s])};return Gte.forEach(o),nR.forEach(o),{forwardedProps:n,internalProps:r}},Kte=e=>{const t=Bt(),n=ef();return m({},e,{disablePast:e.disablePast??!1,disableFuture:e.disableFuture??!1,format:e.format??t.formats.keyboardDate,minDate:mo(t,e.minDate,n.minDate),maxDate:mo(t,e.maxDate,n.maxDate)})},Yte=e=>{const t=Kte(e),{forwardedProps:n,internalProps:r}=Qte(t);return _te({forwardedProps:n,internalProps:r,valueManager:Bs,fieldValueManager:Aee,validator:tg,valueType:"date"})},qte=["clearable","onClear","InputProps","sx","slots","slotProps"],Xte=["ownerState"],Jte=e=>{const t=Ws(),{clearable:n,onClear:r,InputProps:o,sx:s,slots:i,slotProps:l}=e,a=ne(e,qte),c=(i==null?void 0:i.clearButton)??jr,d=Ft({elementType:c,externalSlotProps:l==null?void 0:l.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:t.fieldClearLabel}}),f=ne(d,Xte),p=(i==null?void 0:i.clearIcon)??Mte,b=Ft({elementType:p,externalSlotProps:l==null?void 0:l.clearIcon,ownerState:{}});return m({},a,{InputProps:m({},o,{endAdornment:u.jsxs(h.Fragment,{children:[n&&u.jsx(Hm,{position:"end",sx:{marginRight:o!=null&&o.endAdornment?-1:-1.5},children:u.jsx(c,m({},f,{onClick:r,children:u.jsx(p,m({fontSize:"small"},b))}))}),o==null?void 0:o.endAdornment]})}),sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(s)?s:[s]]})};function Zte(e){return Be("MuiPickersTextField",e)}je("MuiPickersTextField",["root","focused","disabled","error","required"]);function ene(e){return Be("MuiPickersInputBase",e)}const _a=je("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input"]);function tne(e){return Be("MuiPickersSectionList",e)}const ou=je("MuiPickersSectionList",["root","section","sectionContent"]),nne=["slots","slotProps","elements","sectionListRef"],oR=X("div",{name:"MuiPickersSectionList",slot:"Root",overridesResolver:(e,t)=>t.root})({direction:"ltr /*! @noflip */",outline:"none"}),sR=X("span",{name:"MuiPickersSectionList",slot:"Section",overridesResolver:(e,t)=>t.section})({}),iR=X("span",{name:"MuiPickersSectionList",slot:"SectionSeparator",overridesResolver:(e,t)=>t.sectionSeparator})({whiteSpace:"pre"}),lR=X("span",{name:"MuiPickersSectionList",slot:"SectionContent",overridesResolver:(e,t)=>t.sectionContent})({outline:"none"}),rne=e=>{const{classes:t}=e;return Se({root:["root"],section:["section"],sectionContent:["sectionContent"]},tne,t)};function one(e){const{slots:t,slotProps:n,element:r,classes:o}=e,s=(t==null?void 0:t.section)??sR,i=Ft({elementType:s,externalSlotProps:n==null?void 0:n.section,externalForwardedProps:r.container,className:o.section,ownerState:{}}),l=(t==null?void 0:t.sectionContent)??lR,a=Ft({elementType:l,externalSlotProps:n==null?void 0:n.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:o.sectionContent,ownerState:{}}),c=(t==null?void 0:t.sectionSeparator)??iR,d=Ft({elementType:c,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.before,ownerState:{position:"before"}}),f=Ft({elementType:c,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.after,ownerState:{position:"after"}});return u.jsxs(s,m({},i,{children:[u.jsx(c,m({},d)),u.jsx(l,m({},a)),u.jsx(c,m({},f))]}))}const sne=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiPickersSectionList"}),{slots:o,slotProps:s,elements:i,sectionListRef:l}=r,a=ne(r,nne),c=rne(r),d=h.useRef(null),f=rt(n,d),p=x=>{if(!d.current)throw new Error(`MUI X: Cannot call sectionListRef.${x} before the mount of the component.`);return d.current};h.useImperativeHandle(l,()=>({getRoot(){return p("getRoot")},getSectionContainer(x){return p("getSectionContainer").querySelector(`.${ou.section}[data-sectionindex="${x}"]`)},getSectionContent(x){return p("getSectionContent").querySelector(`.${ou.section}[data-sectionindex="${x}"] .${ou.sectionContent}`)},getSectionIndexFromDOMElement(x){const C=p("getSectionIndexFromDOMElement");if(x==null||!C.contains(x))return null;let g=null;return x.classList.contains(ou.section)?g=x:x.classList.contains(ou.sectionContent)&&(g=x.parentElement),g==null?null:Number(g.dataset.sectionindex)}}));const b=(o==null?void 0:o.root)??oR,v=Ft({elementType:b,externalSlotProps:s==null?void 0:s.root,externalForwardedProps:a,additionalProps:{ref:f,suppressContentEditableWarning:!0},className:c.root,ownerState:{}});return u.jsx(b,m({},v,{children:v.contentEditable?i.map(({content:x,before:C,after:g})=>`${C.children}${x.children}${g.children}`).join(""):u.jsx(h.Fragment,{children:i.map((x,C)=>u.jsx(one,{slots:o,slotProps:s,element:x,classes:c},C))})}))}),ine=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef"],lne=e=>Math.round(e*1e5)/1e5,og=X("div",{name:"MuiPickersInputBase",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>m({},e.typography.body1,{color:(e.vars||e).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${lne(.15/16)}em`,variants:[{props:{fullWidth:!0},style:{width:"100%"}}]})),X0=X(oR,{name:"MuiPickersInputBase",slot:"SectionsContainer",overridesResolver:(e,t)=>t.sectionsContainer})(({theme:e})=>({padding:"4px 0 5px",fontFamily:e.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{isRtl:!0},style:{textAlign:"right /*! @noflip */"}},{props:{size:"small"},style:{paddingTop:1}},{props:{adornedStart:!1,focused:!1,filled:!1},style:{color:"currentColor",opacity:0}},{props:({adornedStart:t,focused:n,filled:r,label:o})=>!t&&!n&&!r&&o==null,style:e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:e.palette.mode==="light"?.42:.5}}]})),ane=X(sR,{name:"MuiPickersInputBase",slot:"Section",overridesResolver:(e,t)=>t.section})(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"flex"})),cne=X(lR,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(e,t)=>t.content})(({theme:e})=>({fontFamily:e.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),une=X(iR,{name:"MuiPickersInputBase",slot:"Separator",overridesResolver:(e,t)=>t.separator})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),dne=X("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(e,t)=>t.hiddenInput})(m({},pB)),fne=e=>{const{focused:t,disabled:n,error:r,classes:o,fullWidth:s,readOnly:i,color:l,size:a,endAdornment:c,startAdornment:d}=e,f={root:["root",t&&!n&&"focused",n&&"disabled",i&&"readOnly",r&&"error",s&&"fullWidth",`color${me(l)}`,a==="small"&&"inputSizeSmall",!!d&&"adornedStart",!!c&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"]};return Se(f,ene,o)},J0=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiPickersInputBase"}),{elements:o,areAllSectionsEmpty:s,value:i,onChange:l,id:a,endAdornment:c,startAdornment:d,renderSuffix:f,slots:p,slotProps:b,contentEditable:v,tabIndex:x,onInput:C,onPaste:g,onKeyDown:y,name:w,readOnly:S,inputProps:P,inputRef:E,sectionListRef:A}=r,k=ne(r,ine),j=h.useRef(null),D=rt(n,j),N=rt(P==null?void 0:P.ref,E),F=sr(),R=Pr();if(!R)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const O=B=>{var z;if(R.disabled){B.stopPropagation();return}(z=R.onFocus)==null||z.call(R,B)};h.useEffect(()=>{R&&R.setAdornedStart(!!d)},[R,d]),h.useEffect(()=>{R&&(s?R.onEmpty():R.onFilled())},[R,s]);const I=m({},r,R,{isRtl:F}),M=fne(I),T=(p==null?void 0:p.root)||og,$=Ft({elementType:T,externalSlotProps:b==null?void 0:b.root,externalForwardedProps:k,additionalProps:{"aria-invalid":R.error,ref:D},className:M.root,ownerState:I}),L=(p==null?void 0:p.input)||X0;return u.jsxs(T,m({},$,{children:[d,u.jsx(sne,{sectionListRef:A,elements:o,contentEditable:v,tabIndex:x,className:M.sectionsContainer,onFocus:O,onBlur:R.onBlur,onInput:C,onPaste:g,onKeyDown:y,slots:{root:L,section:ane,sectionContent:cne,sectionSeparator:une},slotProps:{root:{ownerState:I},sectionContent:{className:_a.sectionContent},sectionSeparator:({position:B})=>({className:B==="before"?_a.sectionBefore:_a.sectionAfter})}}),c,f?f(m({},R)):null,u.jsx(dne,m({name:w,className:M.input,value:i,onChange:l,id:a,"aria-hidden":"true",tabIndex:-1,readOnly:S,required:R.required,disabled:R.disabled},P,{ref:N}))]}))});function pne(e){return Be("MuiPickersOutlinedInput",e)}const xo=m({},_a,je("MuiPickersOutlinedInput",["root","notchedOutline","input"])),hne=["children","className","label","notched","shrink"],mne=X("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),XP=X("span")(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit"})),gne=X("legend")(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{withLabel:!1},style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:{withLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{withLabel:!0,notched:!0},style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]}));function yne(e){const{className:t,label:n}=e,r=ne(e,hne),o=n!=null&&n!=="",s=m({},e,{withLabel:o});return u.jsx(mne,m({"aria-hidden":!0,className:t},r,{ownerState:s,children:u.jsx(gne,{ownerState:s,children:o?u.jsx(XP,{children:n}):u.jsx(XP,{className:"notranslate",children:"​"})})}))}const vne=["label","autoFocus","ownerState","notched"],bne=X(og,{name:"MuiPickersOutlinedInput",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${xo.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${xo.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${xo.focused} .${xo.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${xo.disabled}`]:{[`& .${xo.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled},"*":{color:(e.vars||e).palette.action.disabled}},[`&.${xo.error} .${xo.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},variants:Object.keys((e.vars??e).palette).filter(n=>{var r;return((r=(e.vars??e).palette[n])==null?void 0:r.main)??!1}).map(n=>({props:{color:n},style:{[`&.${xo.focused}:not(.${xo.error}) .${xo.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}}))}}),xne=X(X0,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer",overridesResolver:(e,t)=>t.sectionsContainer})({padding:"16.5px 0",variants:[{props:{size:"small"},style:{padding:"8.5px 0"}}]}),Cne=e=>{const{classes:t}=e,r=Se({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},pne,t);return m({},t,r)},aR=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiPickersOutlinedInput"}),{label:o,ownerState:s,notched:i}=r,l=ne(r,vne),a=Pr(),c=m({},r,s,a,{color:(a==null?void 0:a.color)||"primary"}),d=Cne(c);return u.jsx(J0,m({slots:{root:bne,input:xne},renderSuffix:f=>u.jsx(yne,{shrink:!!(i||f.adornedStart||f.focused||f.filled),notched:!!(i||f.adornedStart||f.focused||f.filled),className:d.notchedOutline,label:o!=null&&o!==""&&(a!=null&&a.required)?u.jsxs(h.Fragment,{children:[o," ","*"]}):o,ownerState:c})},l,{label:o,classes:d,ref:n}))});aR.muiName="Input";function wne(e){return Be("MuiPickersFilledInput",e)}const Wi=m({},_a,je("MuiPickersFilledInput",["root","underline","input"])),Sne=["label","autoFocus","disableUnderline","ownerState"],Pne=X(og,{name:"MuiPickersFilledInput",slot:"Root",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>ap(e)&&e!=="disableUnderline"})(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r}},[`&.${Wi.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r},[`&.${Wi.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:s},variants:[...Object.keys((e.vars??e).palette).filter(i=>(e.vars??e).palette[i].main).map(i=>{var l;return{props:{color:i,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(l=(e.vars||e).palette[i])==null?void 0:l.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Wi.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Wi.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Wi.disabled}, .${Wi.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Wi.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:({startAdornment:i})=>!!i,style:{paddingLeft:12}},{props:({endAdornment:i})=>!!i,style:{paddingRight:12}}]}}),Ane=X(X0,{name:"MuiPickersFilledInput",slot:"sectionsContainer",overridesResolver:(e,t)=>t.sectionsContainer})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({startAdornment:e})=>!!e,style:{paddingLeft:0}},{props:({endAdornment:e})=>!!e,style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,size:"small"},style:{paddingTop:8,paddingBottom:9}}]}),Ene=e=>{const{classes:t,disableUnderline:n}=e,o=Se({root:["root",!n&&"underline"],input:["input"]},wne,t);return m({},t,o)},cR=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiPickersFilledInput"}),{label:o,disableUnderline:s=!1,ownerState:i}=r,l=ne(r,Sne),a=Pr(),c=m({},r,i,a,{color:(a==null?void 0:a.color)||"primary"}),d=Ene(c);return u.jsx(J0,m({slots:{root:Pne,input:Ane},slotProps:{root:{disableUnderline:s}}},l,{label:o,classes:d,ref:n}))});cR.muiName="Input";function kne(e){return Be("MuiPickersFilledInput",e)}const su=m({},_a,je("MuiPickersInput",["root","input"])),Ine=["label","autoFocus","disableUnderline","ownerState"],Mne=X(og,{name:"MuiPickersInput",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((e.vars??e).palette).filter(r=>(e.vars??e).palette[r].main).map(r=>({props:{color:r},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[r].main}`}}})),{props:{disableUnderline:!1},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${su.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${su.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${su.disabled}, .${su.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${su.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),Tne=e=>{const{classes:t,disableUnderline:n}=e,o=Se({root:["root",!n&&"underline"],input:["input"]},kne,t);return m({},t,o)},uR=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiPickersInput"}),{label:o,disableUnderline:s=!1,ownerState:i}=r,l=ne(r,Ine),a=Pr(),c=m({},r,i,a,{disableUnderline:s,color:(a==null?void 0:a.color)||"primary"}),d=Tne(c);return u.jsx(J0,m({slots:{root:Mne}},l,{label:o,classes:d,ref:n}))});uR.muiName="Input";const One=["onFocus","onBlur","className","color","disabled","error","variant","required","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps"],Rne={standard:uR,filled:cR,outlined:aR},Dne=X(Wd,{name:"MuiPickersTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Fne=e=>{const{focused:t,disabled:n,classes:r,required:o}=e;return Se({root:["root",t&&!n&&"focused",n&&"disabled",o&&"required"]},Zte,r)},jne=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiPickersTextField"}),{onFocus:o,onBlur:s,className:i,color:l="primary",disabled:a=!1,error:c=!1,variant:d="outlined",required:f=!1,InputProps:p,inputProps:b,inputRef:v,sectionListRef:x,elements:C,areAllSectionsEmpty:g,onClick:y,onKeyDown:w,onPaste:S,onInput:P,endAdornment:E,startAdornment:A,tabIndex:k,contentEditable:j,focused:D,value:N,onChange:F,fullWidth:R,id:O,name:I,helperText:M,FormHelperTextProps:T,label:$,InputLabelProps:L}=r,B=ne(r,One),z=h.useRef(null),W=rt(n,z),G=bt(O),Y=M&&G?`${G}-helper-text`:void 0,V=$&&G?`${G}-label`:void 0,Q=m({},r,{color:l,disabled:a,error:c,focused:D,required:f,variant:d}),te=Fne(Q),K=Rne[d];return u.jsxs(Dne,m({className:ce(te.root,i),ref:W,focused:D,onFocus:o,onBlur:s,disabled:a,variant:d,error:c,color:l,fullWidth:R,required:f,ownerState:Q},B,{children:[u.jsx(Jx,m({htmlFor:G,id:V},L,{children:$})),u.jsx(K,m({elements:C,areAllSectionsEmpty:g,onClick:y,onKeyDown:w,onInput:P,onPaste:S,endAdornment:E,startAdornment:A,tabIndex:k,contentEditable:j,value:N,onChange:F,id:G,fullWidth:R,inputProps:b,inputRef:v,sectionListRef:x,label:$,name:I,role:"group","aria-labelledby":V},p)),M&&u.jsx(Mr,m({id:Y},T,{children:M}))]}))}),$ne=["enableAccessibleFieldDOMStructure"],Lne=["InputProps","readOnly"],Nne=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef"],Bne=e=>{let{enableAccessibleFieldDOMStructure:t}=e,n=ne(e,$ne);if(t){const{InputProps:f,readOnly:p}=n,b=ne(n,Lne);return m({},b,{InputProps:m({},f??{},{readOnly:p})})}const{onPaste:r,onKeyDown:o,inputMode:s,readOnly:i,InputProps:l,inputProps:a,inputRef:c}=n,d=ne(n,Nne);return m({},d,{InputProps:m({},l??{},{readOnly:i}),inputProps:m({},a??{},{inputMode:s,onPaste:r,onKeyDown:o,ref:c})})},Hne=["slots","slotProps","InputProps","inputProps"],dR=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiDateField"}),{slots:o,slotProps:s,InputProps:i,inputProps:l}=r,a=ne(r,Hne),c=r,d=(o==null?void 0:o.textField)??(t.enableAccessibleFieldDOMStructure?jne:i0),f=Ft({elementType:d,externalSlotProps:s==null?void 0:s.textField,externalForwardedProps:a,additionalProps:{ref:n},ownerState:c});f.inputProps=m({},l,f.inputProps),f.InputProps=m({},i,f.InputProps);const p=Yte(f),b=Bne(p),v=Jte(m({},b,{slots:o,slotProps:s}));return u.jsx(d,m({},v))}),fR=({shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:n,minDate:r,maxDate:o,disableFuture:s,disablePast:i,timezone:l})=>{const a=Fl();return h.useCallback(c=>tg({adapter:a,value:c,props:{shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:n,minDate:r,maxDate:o,disableFuture:s,disablePast:i,timezone:l}})!==null,[a,e,t,n,r,o,s,i,l])},zne=(e,t,n)=>(r,o)=>{switch(o.type){case"changeMonth":return m({},r,{slideDirection:o.direction,currentMonth:o.newMonth,isMonthSwitchingAnimating:!e});case"finishMonthSwitchingAnimation":return m({},r,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(r.focusedDay!=null&&o.focusedDay!=null&&n.isSameDay(o.focusedDay,r.focusedDay))return r;const s=o.focusedDay!=null&&!t&&!n.isSameMonth(r.currentMonth,o.focusedDay);return m({},r,{focusedDay:o.focusedDay,isMonthSwitchingAnimating:s&&!e&&!o.withoutMonthSwitchingAnimation,currentMonth:s?n.startOfMonth(o.focusedDay):r.currentMonth,slideDirection:o.focusedDay!=null&&n.isAfterDay(o.focusedDay,r.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},_ne=e=>{const{value:t,referenceDate:n,disableFuture:r,disablePast:o,disableSwitchToMonthOnDayFocus:s=!1,maxDate:i,minDate:l,onMonthChange:a,reduceAnimations:c,shouldDisableDate:d,timezone:f}=e,p=Bt(),b=h.useRef(zne(!!c,s,p)).current,v=h.useMemo(()=>Bs.getInitialReferenceValue({value:t,utils:p,timezone:f,props:e,referenceDate:n,granularity:Jo.day}),[]),[x,C]=h.useReducer(b,{isMonthSwitchingAnimating:!1,focusedDay:v,currentMonth:p.startOfMonth(v),slideDirection:"left"}),g=h.useCallback(E=>{C(m({type:"changeMonth"},E)),a&&a(E.newMonth)},[a]),y=h.useCallback(E=>{const A=E;p.isSameMonth(A,x.currentMonth)||g({newMonth:p.startOfMonth(A),direction:p.isAfterDay(A,x.currentMonth)?"left":"right"})},[x.currentMonth,g,p]),w=fR({shouldDisableDate:d,minDate:l,maxDate:i,disableFuture:r,disablePast:o,timezone:f}),S=h.useCallback(()=>{C({type:"finishMonthSwitchingAnimation"})},[]),P=Me((E,A)=>{w(E)||C({type:"changeFocusedDay",focusedDay:E,withoutMonthSwitchingAnimation:A})});return{referenceDate:v,calendarState:x,changeMonth:y,changeFocusedDay:P,isDateDisabled:w,onMonthSwitchingAnimationEnd:S,handleChangeMonth:g}},Vne=e=>Be("MuiPickersFadeTransitionGroup",e);je("MuiPickersFadeTransitionGroup",["root"]);const Wne=e=>{const{classes:t}=e;return Se({root:["root"]},Vne,t)},Une=X(zd,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"block",position:"relative"});function pR(e){const t=_t({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:n,className:r,reduceAnimations:o,transKey:s}=t,i=Wne(t),l=Wn();return o?n:u.jsx(Une,{className:ce(i.root,r),children:u.jsx(Ec,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:l.transitions.duration.enteringScreen,enter:l.transitions.duration.enteringScreen,exit:0},children:n},s)})}function Gne(e){return Be("MuiPickersDay",e)}const Ui=je("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),Qne=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],Kne=e=>{const{selected:t,disableMargin:n,disableHighlightToday:r,today:o,disabled:s,outsideCurrentMonth:i,showDaysOutsideCurrentMonth:l,classes:a}=e,c=i&&!l;return Se({root:["root",t&&!c&&"selected",s&&"disabled",!n&&"dayWithMargin",!r&&o&&"today",i&&l&&"dayOutsideMonth",c&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},Gne,a)},hR=({theme:e})=>m({},e.typography.caption,{width:xd,height:xd,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),color:(e.vars||e).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr(e.palette.primary.main,e.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:Dr(e.palette.primary.main,e.palette.action.focusOpacity),[`&.${Ui.selected}`]:{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${Ui.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${Ui.disabled}:not(.${Ui.selected})`]:{color:(e.vars||e).palette.text.disabled},[`&.${Ui.disabled}&.${Ui.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${ng}px`}},{props:{outsideCurrentMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(e.vars||e).palette.text.secondary}},{props:{disableHighlightToday:!1,today:!0},style:{[`&:not(.${Ui.selected})`]:{border:`1px solid ${(e.vars||e).palette.text.secondary}`}}}]}),mR=(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableMargin&&t.dayWithMargin,!n.disableHighlightToday&&n.today&&t.today,!n.outsideCurrentMonth&&n.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,n.outsideCurrentMonth&&!n.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},Yne=X(cs,{name:"MuiPickersDay",slot:"Root",overridesResolver:mR})(hR),qne=X("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:mR})(({theme:e})=>m({},hR({theme:e}),{opacity:0,pointerEvents:"none"})),iu=()=>{},Xne=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiPickersDay"}),{autoFocus:o=!1,className:s,day:i,disabled:l=!1,disableHighlightToday:a=!1,disableMargin:c=!1,isAnimating:d,onClick:f,onDaySelect:p,onFocus:b=iu,onBlur:v=iu,onKeyDown:x=iu,onMouseDown:C=iu,onMouseEnter:g=iu,outsideCurrentMonth:y,selected:w=!1,showDaysOutsideCurrentMonth:S=!1,children:P,today:E=!1}=r,A=ne(r,Qne),k=m({},r,{autoFocus:o,disabled:l,disableHighlightToday:a,disableMargin:c,selected:w,showDaysOutsideCurrentMonth:S,today:E}),j=Kne(k),D=Bt(),N=h.useRef(null),F=rt(N,n);ft(()=>{o&&!l&&!d&&!y&&N.current.focus()},[o,l,d,y]);const R=I=>{C(I),y&&I.preventDefault()},O=I=>{l||p(i),y&&I.currentTarget.focus(),f&&f(I)};return y&&!S?u.jsx(qne,{className:ce(j.root,j.hiddenDaySpacingFiller,s),ownerState:k,role:A.role}):u.jsx(Yne,m({className:ce(j.root,s),ref:F,centerRipple:!0,disabled:l,tabIndex:w?0:-1,onKeyDown:I=>x(I,i),onFocus:I=>b(I,i),onBlur:I=>v(I,i),onMouseEnter:I=>g(I,i),onClick:O,onMouseDown:R},A,{ownerState:k,children:P||D.format(i,"dayOfMonth")}))}),Jne=h.memo(Xne),Zne=e=>Be("MuiPickersSlideTransition",e),Gr=je("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),ere=["children","className","reduceAnimations","slideDirection","transKey","classes"],tre=e=>{const{classes:t,slideDirection:n}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return Se(r,Zne,t)},nre=X(zd,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${Gr["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${Gr["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${Gr.slideEnterActive}`]:t.slideEnterActive},{[`.${Gr.slideExit}`]:t.slideExit},{[`.${Gr["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${Gr["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})(({theme:e})=>{const t=e.transitions.create("transform",{duration:e.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${Gr["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${Gr["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${Gr.slideEnterActive}`]:{transform:"translate(0%)",transition:t},[`& .${Gr.slideExit}`]:{transform:"translate(0%)"},[`& .${Gr["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},[`& .${Gr["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}});function rre(e){const t=_t({props:e,name:"MuiPickersSlideTransition"}),{children:n,className:r,reduceAnimations:o,transKey:s}=t,i=ne(t,ere),l=tre(t),a=Wn();if(o)return u.jsx("div",{className:ce(l.root,r),children:n});const c={exit:l.exit,enterActive:l.enterActive,enter:l.enter,exitActive:l.exitActive};return u.jsx(nre,{className:ce(l.root,r),childFactory:d=>h.cloneElement(d,{classNames:c}),role:"presentation",children:u.jsx($x,m({mountOnEnter:!0,unmountOnExit:!0,timeout:a.transitions.duration.complex,classNames:c},i,{children:n}),s)})}const ore=e=>Be("MuiDayCalendar",e);je("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const sre=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],ire=["ownerState"],lre=e=>{const{classes:t}=e;return Se({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},ore,t)},gR=(xd+ng*2)*6,are=X("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({}),cre=X("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(e,t)=>t.header})({display:"flex",justifyContent:"center",alignItems:"center"}),ure=X(hr,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(e,t)=>t.weekDayLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.secondary})),dre=X(hr,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(e,t)=>t.weekNumberLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.disabled})),fre=X(hr,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(e,t)=>t.weekNumber})(({theme:e})=>m({},e.typography.caption,{width:xd,height:xd,padding:0,margin:`0 ${ng}px`,color:e.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),pre=X("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(e,t)=>t.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:gR}),hre=X(rre,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(e,t)=>t.slideTransition})({minHeight:gR}),mre=X("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(e,t)=>t.monthContainer})({overflow:"hidden"}),gre=X("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(e,t)=>t.weekContainer})({margin:`${ng}px 0`,display:"flex",justifyContent:"center"});function yre(e){let{parentProps:t,day:n,focusableDay:r,selectedDays:o,isDateDisabled:s,currentMonthNumber:i,isViewFocused:l}=e,a=ne(e,sre);const{disabled:c,disableHighlightToday:d,isMonthSwitchingAnimating:f,showDaysOutsideCurrentMonth:p,slots:b,slotProps:v,timezone:x}=t,C=Bt(),g=eg(x),y=r!==null&&C.isSameDay(n,r),w=o.some(F=>C.isSameDay(F,n)),S=C.isSameDay(n,g),P=(b==null?void 0:b.day)??Jne,E=Ft({elementType:P,externalSlotProps:v==null?void 0:v.day,additionalProps:m({disableHighlightToday:d,showDaysOutsideCurrentMonth:p,role:"gridcell",isAnimating:f,"data-timestamp":C.toJsDate(n).valueOf()},a),ownerState:m({},t,{day:n,selected:w})}),A=ne(E,ire),k=h.useMemo(()=>c||s(n),[c,s,n]),j=h.useMemo(()=>C.getMonth(n)!==i,[C,n,i]),D=h.useMemo(()=>{const F=C.startOfMonth(C.setMonth(n,i));return p?C.isSameDay(n,C.startOfWeek(F)):C.isSameDay(n,F)},[i,n,p,C]),N=h.useMemo(()=>{const F=C.endOfMonth(C.setMonth(n,i));return p?C.isSameDay(n,C.endOfWeek(F)):C.isSameDay(n,F)},[i,n,p,C]);return u.jsx(P,m({},A,{day:n,disabled:k,autoFocus:l&&y,today:S,outsideCurrentMonth:j,isFirstVisibleCell:D,isLastVisibleCell:N,selected:w,tabIndex:y?0:-1,"aria-selected":w,"aria-current":S?"date":void 0}))}function vre(e){const t=_t({props:e,name:"MuiDayCalendar"}),n=Bt(),{onFocusedDayChange:r,className:o,currentMonth:s,selectedDays:i,focusedDay:l,loading:a,onSelectedDaysChange:c,onMonthSwitchingAnimationEnd:d,readOnly:f,reduceAnimations:p,renderLoading:b=()=>u.jsx("span",{children:"..."}),slideDirection:v,TransitionProps:x,disablePast:C,disableFuture:g,minDate:y,maxDate:w,shouldDisableDate:S,shouldDisableMonth:P,shouldDisableYear:E,dayOfWeekFormatter:A=Pe=>n.format(Pe,"weekdayShort").charAt(0).toUpperCase(),hasFocus:k,onFocusedViewChange:j,gridLabelId:D,displayWeekNumber:N,fixedWeekNumber:F,autoFocus:R,timezone:O}=t,I=eg(O),M=lre(t),T=sr(),$=fR({shouldDisableDate:S,shouldDisableMonth:P,shouldDisableYear:E,minDate:y,maxDate:w,disablePast:C,disableFuture:g,timezone:O}),L=Ws(),[B,z]=zn({name:"DayCalendar",state:"hasFocus",controlled:k,default:R??!1}),[W,G]=h.useState(()=>l||I),Y=Me(Pe=>{f||c(Pe)}),V=Pe=>{$(Pe)||(r(Pe),G(Pe),j==null||j(!0),z(!0))},Q=Me((Pe,H)=>{switch(Pe.key){case"ArrowUp":V(n.addDays(H,-7)),Pe.preventDefault();break;case"ArrowDown":V(n.addDays(H,7)),Pe.preventDefault();break;case"ArrowLeft":{const q=n.addDays(H,T?1:-1),re=n.addMonths(H,T?1:-1),ge=Fu({utils:n,date:q,minDate:T?q:n.startOfMonth(re),maxDate:T?n.endOfMonth(re):q,isDateDisabled:$,timezone:O});V(ge||q),Pe.preventDefault();break}case"ArrowRight":{const q=n.addDays(H,T?-1:1),re=n.addMonths(H,T?-1:1),ge=Fu({utils:n,date:q,minDate:T?n.startOfMonth(re):q,maxDate:T?q:n.endOfMonth(re),isDateDisabled:$,timezone:O});V(ge||q),Pe.preventDefault();break}case"Home":V(n.startOfWeek(H)),Pe.preventDefault();break;case"End":V(n.endOfWeek(H)),Pe.preventDefault();break;case"PageUp":V(n.addMonths(H,1)),Pe.preventDefault();break;case"PageDown":V(n.addMonths(H,-1)),Pe.preventDefault();break}}),te=Me((Pe,H)=>V(H)),K=Me((Pe,H)=>{B&&n.isSameDay(W,H)&&(j==null||j(!1))}),J=n.getMonth(s),oe=n.getYear(s),de=h.useMemo(()=>i.filter(Pe=>!!Pe).map(Pe=>n.startOfDay(Pe)),[n,i]),ie=`${oe}-${J}`,Z=h.useMemo(()=>h.createRef(),[ie]),se=n.startOfWeek(I),le=h.useMemo(()=>{const Pe=n.startOfMonth(s),H=n.endOfMonth(s);return $(W)||n.isAfterDay(W,H)||n.isBeforeDay(W,Pe)?Fu({utils:n,date:W,minDate:Pe,maxDate:H,disablePast:C,disableFuture:g,isDateDisabled:$,timezone:O}):W},[s,g,C,W,$,n,O]),he=h.useMemo(()=>{const Pe=n.setTimezone(s,O),H=n.getWeekArray(Pe);let q=n.addMonths(Pe,1);for(;F&&H.length<F;){const re=n.getWeekArray(q),ge=n.isSameDay(H[H.length-1][0],re[0][0]);re.slice(ge?1:0).forEach(ye=>{H.length<F&&H.push(ye)}),q=n.addMonths(q,1)}return H},[s,F,n,O]);return u.jsxs(are,{role:"grid","aria-labelledby":D,className:M.root,children:[u.jsxs(cre,{role:"row",className:M.header,children:[N&&u.jsx(dre,{variant:"caption",role:"columnheader","aria-label":L.calendarWeekNumberHeaderLabel,className:M.weekNumberLabel,children:L.calendarWeekNumberHeaderText}),see(n,I).map((Pe,H)=>u.jsx(ure,{variant:"caption",role:"columnheader","aria-label":n.format(n.addDays(se,H),"weekday"),className:M.weekDayLabel,children:A(Pe)},H.toString()))]}),a?u.jsx(pre,{className:M.loadingContainer,children:b()}):u.jsx(hre,m({transKey:ie,onExited:d,reduceAnimations:p,slideDirection:v,className:ce(o,M.slideTransition)},x,{nodeRef:Z,children:u.jsx(mre,{ref:Z,role:"rowgroup",className:M.monthContainer,children:he.map((Pe,H)=>u.jsxs(gre,{role:"row",className:M.weekContainer,"aria-rowindex":H+1,children:[N&&u.jsx(fre,{className:M.weekNumber,role:"rowheader","aria-label":L.calendarWeekNumberAriaLabelText(n.getWeekNumber(Pe[0])),children:L.calendarWeekNumberText(n.getWeekNumber(Pe[0]))}),Pe.map((q,re)=>u.jsx(yre,{parentProps:t,day:q,selectedDays:de,focusableDay:le,onKeyDown:Q,onFocus:te,onBlur:K,onDaySelect:Y,isDateDisabled:$,currentMonthNumber:J,isViewFocused:B,"aria-colindex":re+1},q.toString()))]},`week-${Pe[0]}`))})}))]})}function bre(e){return Be("MuiPickersMonth",e)}const Hf=je("MuiPickersMonth",["root","monthButton","disabled","selected"]),xre=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow","slots","slotProps"],Cre=e=>{const{disabled:t,selected:n,classes:r}=e;return Se({root:["root"],monthButton:["monthButton",t&&"disabled",n&&"selected"]},bre,r)},wre=X("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(e,t)=>[t.root]})({display:"flex",alignItems:"center",justifyContent:"center",flexBasis:"33.3%",variants:[{props:{monthsPerRow:4},style:{flexBasis:"25%"}}]}),Sre=X("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(e,t)=>[t.monthButton,{[`&.${Hf.disabled}`]:t.disabled},{[`&.${Hf.selected}`]:t.selected}]})(({theme:e})=>m({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr(e.palette.action.active,e.palette.action.hoverOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Hf.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${Hf.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),Pre=h.memo(function(t){const n=_t({props:t,name:"MuiPickersMonth"}),{autoFocus:r,className:o,children:s,disabled:i,selected:l,value:a,tabIndex:c,onClick:d,onKeyDown:f,onFocus:p,onBlur:b,"aria-current":v,"aria-label":x,slots:C,slotProps:g}=n,y=ne(n,xre),w=h.useRef(null),S=Cre(n);ft(()=>{var A;r&&((A=w.current)==null||A.focus())},[r]);const P=(C==null?void 0:C.monthButton)??Sre,E=Ft({elementType:P,externalSlotProps:g==null?void 0:g.monthButton,additionalProps:{children:s,disabled:i,tabIndex:c,ref:w,type:"button",role:"radio","aria-current":v,"aria-checked":l,"aria-label":x,onClick:A=>d(A,a),onKeyDown:A=>f(A,a),onFocus:A=>p(A,a),onBlur:A=>b(A,a)},ownerState:n,className:S.monthButton});return u.jsx(wre,m({className:ce(S.root,o),ownerState:n},y,{children:u.jsx(P,m({},E))}))});function Are(e){return Be("MuiMonthCalendar",e)}je("MuiMonthCalendar",["root"]);const Ere=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],kre=e=>{const{classes:t}=e;return Se({root:["root"]},Are,t)};function Ire(e,t){const n=Bt(),r=ef(),o=_t({props:e,name:t});return m({disableFuture:!1,disablePast:!1},o,{minDate:mo(n,o.minDate,r.minDate),maxDate:mo(n,o.maxDate,r.maxDate)})}const Mre=X("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:rg,boxSizing:"border-box"}),Tre=h.forwardRef(function(t,n){const r=Ire(t,"MuiMonthCalendar"),{className:o,value:s,defaultValue:i,referenceDate:l,disabled:a,disableFuture:c,disablePast:d,maxDate:f,minDate:p,onChange:b,shouldDisableMonth:v,readOnly:x,autoFocus:C=!1,onMonthFocus:g,hasFocus:y,onFocusedViewChange:w,monthsPerRow:S=3,timezone:P,gridLabelId:E,slots:A,slotProps:k}=r,j=ne(r,Ere),{value:D,handleValueChange:N,timezone:F}=Y0({name:"MonthCalendar",timezone:P,value:s,defaultValue:i,onChange:b,valueManager:Bs}),R=eg(F),O=sr(),I=Bt(),M=h.useMemo(()=>Bs.getInitialReferenceValue({value:D,utils:I,props:r,timezone:F,referenceDate:l,granularity:Jo.month}),[]),T=r,$=kre(T),L=h.useMemo(()=>I.getMonth(R),[I,R]),B=h.useMemo(()=>D!=null?I.getMonth(D):null,[D,I]),[z,W]=h.useState(()=>B||I.getMonth(M)),[G,Y]=zn({name:"MonthCalendar",state:"hasFocus",controlled:y,default:C??!1}),V=Me(ie=>{Y(ie),w&&w(ie)}),Q=h.useCallback(ie=>{const Z=I.startOfMonth(d&&I.isAfter(R,p)?R:p),se=I.startOfMonth(c&&I.isBefore(R,f)?R:f),le=I.startOfMonth(ie);return I.isBefore(le,Z)||I.isAfter(le,se)?!0:v?v(le):!1},[c,d,f,p,R,v,I]),te=Me((ie,Z)=>{if(x)return;const se=I.setMonth(D??M,Z);N(se)}),K=Me(ie=>{Q(I.setMonth(D??M,ie))||(W(ie),V(!0),g&&g(ie))});h.useEffect(()=>{W(ie=>B!==null&&ie!==B?B:ie)},[B]);const J=Me((ie,Z)=>{switch(ie.key){case"ArrowUp":K((12+Z-3)%12),ie.preventDefault();break;case"ArrowDown":K((12+Z+3)%12),ie.preventDefault();break;case"ArrowLeft":K((12+Z+(O?1:-1))%12),ie.preventDefault();break;case"ArrowRight":K((12+Z+(O?-1:1))%12),ie.preventDefault();break}}),oe=Me((ie,Z)=>{K(Z)}),de=Me((ie,Z)=>{z===Z&&V(!1)});return u.jsx(Mre,m({ref:n,className:ce($.root,o),ownerState:T,role:"radiogroup","aria-labelledby":E},j,{children:W0(I,D??M).map(ie=>{const Z=I.getMonth(ie),se=I.format(ie,"monthShort"),le=I.format(ie,"month"),he=Z===B,Pe=a||Q(ie);return u.jsx(Pre,{selected:he,value:Z,onClick:te,onKeyDown:J,autoFocus:G&&Z===z,disabled:Pe,tabIndex:Z===z&&!Pe?0:-1,onFocus:oe,onBlur:de,"aria-current":L===Z?"date":void 0,"aria-label":le,monthsPerRow:S,slots:A,slotProps:k,children:se},se)})}))});function Ore(e){return Be("MuiPickersYear",e)}const zf=je("MuiPickersYear",["root","yearButton","selected","disabled"]),Rre=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow","slots","slotProps"],Dre=e=>{const{disabled:t,selected:n,classes:r}=e;return Se({root:["root"],yearButton:["yearButton",t&&"disabled",n&&"selected"]},Ore,r)},Fre=X("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(e,t)=>[t.root]})({display:"flex",alignItems:"center",justifyContent:"center",flexBasis:"33.3%",variants:[{props:{yearsPerRow:4},style:{flexBasis:"25%"}}]}),jre=X("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(e,t)=>[t.yearButton,{[`&.${zf.disabled}`]:t.disabled},{[`&.${zf.selected}`]:t.selected}]})(({theme:e})=>m({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.focusOpacity})`:Dr(e.palette.action.active,e.palette.action.focusOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Dr(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${zf.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${zf.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),$re=h.memo(function(t){const n=_t({props:t,name:"MuiPickersYear"}),{autoFocus:r,className:o,children:s,disabled:i,selected:l,value:a,tabIndex:c,onClick:d,onKeyDown:f,onFocus:p,onBlur:b,"aria-current":v,slots:x,slotProps:C}=n,g=ne(n,Rre),y=h.useRef(null),w=Dre(n);ft(()=>{var E;r&&((E=y.current)==null||E.focus())},[r]);const S=(x==null?void 0:x.yearButton)??jre,P=Ft({elementType:S,externalSlotProps:C==null?void 0:C.yearButton,additionalProps:{children:s,disabled:i,tabIndex:c,ref:y,type:"button",role:"radio","aria-current":v,"aria-checked":l,onClick:E=>d(E,a),onKeyDown:E=>f(E,a),onFocus:E=>p(E,a),onBlur:E=>b(E,a)},ownerState:n,className:w.yearButton});return u.jsx(Fre,m({className:ce(w.root,o),ownerState:n},g,{children:u.jsx(S,m({},P))}))});function Lre(e){return Be("MuiYearCalendar",e)}je("MuiYearCalendar",["root"]);const Nre=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId","slots","slotProps"],Bre=e=>{const{classes:t}=e;return Se({root:["root"]},Lre,t)};function Hre(e,t){const n=Bt(),r=ef(),o=_t({props:e,name:t});return m({disablePast:!1,disableFuture:!1},o,{yearsPerRow:o.yearsPerRow??3,minDate:mo(n,o.minDate,r.minDate),maxDate:mo(n,o.maxDate,r.maxDate)})}const zre=X("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:rg,maxHeight:dte,boxSizing:"border-box",position:"relative"}),_re=h.forwardRef(function(t,n){const r=Hre(t,"MuiYearCalendar"),{autoFocus:o,className:s,value:i,defaultValue:l,referenceDate:a,disabled:c,disableFuture:d,disablePast:f,maxDate:p,minDate:b,onChange:v,readOnly:x,shouldDisableYear:C,onYearFocus:g,hasFocus:y,onFocusedViewChange:w,yearsPerRow:S,timezone:P,gridLabelId:E,slots:A,slotProps:k}=r,j=ne(r,Nre),{value:D,handleValueChange:N,timezone:F}=Y0({name:"YearCalendar",timezone:P,value:i,defaultValue:l,onChange:v,valueManager:Bs}),R=eg(F),O=sr(),I=Bt(),M=h.useMemo(()=>Bs.getInitialReferenceValue({value:D,utils:I,props:r,timezone:F,referenceDate:a,granularity:Jo.year}),[]),T=r,$=Bre(T),L=h.useMemo(()=>I.getYear(R),[I,R]),B=h.useMemo(()=>D!=null?I.getYear(D):null,[D,I]),[z,W]=h.useState(()=>B||I.getYear(M)),[G,Y]=zn({name:"YearCalendar",state:"hasFocus",controlled:y,default:o??!1}),V=Me(se=>{Y(se),w&&w(se)}),Q=h.useCallback(se=>{if(f&&I.isBeforeYear(se,R)||d&&I.isAfterYear(se,R)||b&&I.isBeforeYear(se,b)||p&&I.isAfterYear(se,p))return!0;if(!C)return!1;const le=I.startOfYear(se);return C(le)},[d,f,p,b,R,C,I]),te=Me((se,le)=>{if(x)return;const he=I.setYear(D??M,le);N(he)}),K=Me(se=>{Q(I.setYear(D??M,se))||(W(se),V(!0),g==null||g(se))});h.useEffect(()=>{W(se=>B!==null&&se!==B?B:se)},[B]);const J=Me((se,le)=>{switch(se.key){case"ArrowUp":K(le-S),se.preventDefault();break;case"ArrowDown":K(le+S),se.preventDefault();break;case"ArrowLeft":K(le+(O?1:-1)),se.preventDefault();break;case"ArrowRight":K(le+(O?-1:1)),se.preventDefault();break}}),oe=Me((se,le)=>{K(le)}),de=Me((se,le)=>{z===le&&V(!1)}),ie=h.useRef(null),Z=rt(n,ie);return h.useEffect(()=>{if(o||ie.current===null)return;const se=ie.current.querySelector('[tabindex="0"]');if(!se)return;const le=se.offsetHeight,he=se.offsetTop,Pe=ie.current.clientHeight,H=ie.current.scrollTop,q=he+le;le>Pe||he<H||(ie.current.scrollTop=q-Pe/2-le/2)},[o]),u.jsx(zre,m({ref:Z,className:ce($.root,s),ownerState:T,role:"radiogroup","aria-labelledby":E},j,{children:I.getYearRange([b,p]).map(se=>{const le=I.getYear(se),he=le===B,Pe=c||Q(se);return u.jsx($re,{selected:he,value:le,onClick:te,onKeyDown:J,autoFocus:G&&le===z,disabled:Pe,tabIndex:le===z&&!Pe?0:-1,onFocus:oe,onBlur:de,"aria-current":L===le?"date":void 0,yearsPerRow:S,slots:A,slotProps:k,children:I.format(se,"year")},I.format(se,"year"))})}))}),Vre=e=>Be("MuiPickersCalendarHeader",e),Wre=je("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]);function Ure(e){return Be("MuiPickersArrowSwitcher",e)}je("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const Gre=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId"],Qre=["ownerState"],Kre=["ownerState"],Yre=X("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),qre=X("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})(({theme:e})=>({width:e.spacing(3)})),JP=X(jr,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})({variants:[{props:{hidden:!0},style:{visibility:"hidden"}}]}),Xre=e=>{const{classes:t}=e;return Se({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},Ure,t)},Jre=h.forwardRef(function(t,n){const r=sr(),o=_t({props:t,name:"MuiPickersArrowSwitcher"}),{children:s,className:i,slots:l,slotProps:a,isNextDisabled:c,isNextHidden:d,onGoToNext:f,nextLabel:p,isPreviousDisabled:b,isPreviousHidden:v,onGoToPrevious:x,previousLabel:C,labelId:g}=o,y=ne(o,Gre),w=o,S=Xre(w),P={isDisabled:c,isHidden:d,goTo:f,label:p},E={isDisabled:b,isHidden:v,goTo:x,label:C},A=(l==null?void 0:l.previousIconButton)??JP,k=Ft({elementType:A,externalSlotProps:a==null?void 0:a.previousIconButton,additionalProps:{size:"medium",title:E.label,"aria-label":E.label,disabled:E.isDisabled,edge:"end",onClick:E.goTo},ownerState:m({},w,{hidden:E.isHidden}),className:ce(S.button,S.previousIconButton)}),j=(l==null?void 0:l.nextIconButton)??JP,D=Ft({elementType:j,externalSlotProps:a==null?void 0:a.nextIconButton,additionalProps:{size:"medium",title:P.label,"aria-label":P.label,disabled:P.isDisabled,edge:"start",onClick:P.goTo},ownerState:m({},w,{hidden:P.isHidden}),className:ce(S.button,S.nextIconButton)}),N=(l==null?void 0:l.leftArrowIcon)??Ete,F=Ft({elementType:N,externalSlotProps:a==null?void 0:a.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:w,className:S.leftArrowIcon}),R=ne(F,Qre),O=(l==null?void 0:l.rightArrowIcon)??kte,I=Ft({elementType:O,externalSlotProps:a==null?void 0:a.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:w,className:S.rightArrowIcon}),M=ne(I,Kre);return u.jsxs(Yre,m({ref:n,className:ce(S.root,i),ownerState:w},y,{children:[u.jsx(A,m({},k,{children:r?u.jsx(O,m({},M)):u.jsx(N,m({},R))})),s?u.jsx(hr,{variant:"subtitle1",component:"span",id:g,children:s}):u.jsx(qre,{className:S.spacer,ownerState:w}),u.jsx(j,m({},D,{children:r?u.jsx(N,m({},R)):u.jsx(O,m({},M))}))]}))});function Zre(e,{disableFuture:t,maxDate:n,timezone:r}){const o=Bt();return h.useMemo(()=>{const s=o.date(void 0,r),i=o.startOfMonth(t&&o.isBefore(s,n)?s:n);return!o.isAfter(i,e)},[t,n,e,o,r])}function eoe(e,{disablePast:t,minDate:n,timezone:r}){const o=Bt();return h.useMemo(()=>{const s=o.date(void 0,r),i=o.startOfMonth(t&&o.isAfter(s,n)?s:n);return!o.isBefore(i,e)},[t,n,e,o,r])}const toe=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone","format"],noe=["ownerState"],roe=e=>{const{classes:t}=e;return Se({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},Vre,t)},ooe=X("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),soe=X("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>m({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),ioe=X("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,t)=>t.label})({marginRight:6}),loe=X(jr,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,t)=>t.switchViewButton})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${Wre.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),aoe=X(Ate,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,t)=>t.switchViewIcon})(({theme:e})=>({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"})),coe=h.forwardRef(function(t,n){const r=Ws(),o=Bt(),s=_t({props:t,name:"MuiPickersCalendarHeader"}),{slots:i,slotProps:l,currentMonth:a,disabled:c,disableFuture:d,disablePast:f,maxDate:p,minDate:b,onMonthChange:v,onViewChange:x,view:C,reduceAnimations:g,views:y,labelId:w,className:S,timezone:P,format:E=`${o.formats.month} ${o.formats.year}`}=s,A=ne(s,toe),k=s,j=roe(s),D=(i==null?void 0:i.switchViewButton)??loe,N=Ft({elementType:D,externalSlotProps:l==null?void 0:l.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(C)},ownerState:k,className:j.switchViewButton}),F=(i==null?void 0:i.switchViewIcon)??aoe,R=Ft({elementType:F,externalSlotProps:l==null?void 0:l.switchViewIcon,ownerState:k,className:j.switchViewIcon}),O=ne(R,noe),I=()=>v(o.addMonths(a,1),"left"),M=()=>v(o.addMonths(a,-1),"right"),T=Zre(a,{disableFuture:d,maxDate:p,timezone:P}),$=eoe(a,{disablePast:f,minDate:b,timezone:P}),L=()=>{if(!(y.length===1||!x||c))if(y.length===2)x(y.find(z=>z!==C)||y[0]);else{const z=y.indexOf(C)!==0?0:1;x(y[z])}};if(y.length===1&&y[0]==="year")return null;const B=o.formatByString(a,E);return u.jsxs(ooe,m({},A,{ownerState:k,className:ce(S,j.root),ref:n,children:[u.jsxs(soe,{role:"presentation",onClick:L,ownerState:k,"aria-live":"polite",className:j.labelContainer,children:[u.jsx(pR,{reduceAnimations:g,transKey:B,children:u.jsx(ioe,{id:w,ownerState:k,className:j.label,children:B})}),y.length>1&&!c&&u.jsx(D,m({},N,{children:u.jsx(F,m({},O))}))]}),u.jsx(Ec,{in:C==="day",children:u.jsx(Jre,{slots:i,slotProps:l,onGoToPrevious:M,isPreviousDisabled:$,previousLabel:r.previousMonth,onGoToNext:I,isNextDisabled:T,nextLabel:r.nextMonth})})]}))}),uoe=X("div")({overflow:"hidden",width:rg,maxHeight:q0,display:"flex",flexDirection:"column",margin:"0 auto"}),doe=e=>Be("MuiDateCalendar",e);je("MuiDateCalendar",["root","viewTransitionContainer"]);const foe=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"],poe=e=>{const{classes:t}=e;return Se({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},doe,t)};function hoe(e,t){const n=Bt(),r=ef(),o=qO(),s=_t({props:e,name:t});return m({},s,{loading:s.loading??!1,disablePast:s.disablePast??!1,disableFuture:s.disableFuture??!1,openTo:s.openTo??"day",views:s.views??["year","day"],reduceAnimations:s.reduceAnimations??o,renderLoading:s.renderLoading??(()=>u.jsx("span",{children:"..."})),minDate:mo(n,s.minDate,r.minDate),maxDate:mo(n,s.maxDate,r.maxDate)})}const moe=X(uoe,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",height:q0}),goe=X(pR,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(e,t)=>t.viewTransitionContainer})({}),yoe=h.forwardRef(function(t,n){const r=Bt(),o=bt(),s=hoe(t,"MuiDateCalendar"),{autoFocus:i,onViewChange:l,value:a,defaultValue:c,referenceDate:d,disableFuture:f,disablePast:p,onChange:b,onYearChange:v,onMonthChange:x,reduceAnimations:C,shouldDisableDate:g,shouldDisableMonth:y,shouldDisableYear:w,view:S,views:P,openTo:E,className:A,disabled:k,readOnly:j,minDate:D,maxDate:N,disableHighlightToday:F,focusedView:R,onFocusedViewChange:O,showDaysOutsideCurrentMonth:I,fixedWeekNumber:M,dayOfWeekFormatter:T,slots:$,slotProps:L,loading:B,renderLoading:z,displayWeekNumber:W,yearsPerRow:G,monthsPerRow:Y,timezone:V}=s,Q=ne(s,foe),{value:te,handleValueChange:K,timezone:J}=Y0({name:"DateCalendar",timezone:V,value:a,defaultValue:c,onChange:b,valueManager:Bs}),{view:oe,setView:de,focusedView:ie,setFocusedView:Z,goToNextView:se,setValueAndGoToNextView:le}=JO({view:S,views:P,openTo:E,onChange:K,onViewChange:l,autoFocus:i,focusedView:R,onFocusedViewChange:O}),{referenceDate:he,calendarState:Pe,changeFocusedDay:H,changeMonth:q,handleChangeMonth:re,isDateDisabled:ge,onMonthSwitchingAnimationEnd:ye}=_ne({value:te,referenceDate:d,reduceAnimations:C,onMonthChange:x,minDate:D,maxDate:N,shouldDisableDate:g,disablePast:p,disableFuture:f,timezone:J}),ae=k&&te||D,ee=k&&te||N,ve=`${o}-grid-label`,Ie=ie!==null,Ae=($==null?void 0:$.calendarHeader)??coe,pe=Ft({elementType:Ae,externalSlotProps:L==null?void 0:L.calendarHeader,additionalProps:{views:P,view:oe,currentMonth:Pe.currentMonth,onViewChange:de,onMonthChange:(He,Xe)=>re({newMonth:He,direction:Xe}),minDate:ae,maxDate:ee,disabled:k,disablePast:p,disableFuture:f,reduceAnimations:C,timezone:J,labelId:ve},ownerState:s}),fe=Me(He=>{const Xe=r.startOfMonth(He),lt=r.endOfMonth(He),ht=ge(He)?Fu({utils:r,date:He,minDate:r.isBefore(D,Xe)?Xe:D,maxDate:r.isAfter(N,lt)?lt:N,disablePast:p,disableFuture:f,isDateDisabled:ge,timezone:J}):He;ht?(le(ht,"finish"),x==null||x(Xe)):(se(),q(Xe)),H(ht,!0)}),Re=Me(He=>{const Xe=r.startOfYear(He),lt=r.endOfYear(He),ht=ge(He)?Fu({utils:r,date:He,minDate:r.isBefore(D,Xe)?Xe:D,maxDate:r.isAfter(N,lt)?lt:N,disablePast:p,disableFuture:f,isDateDisabled:ge,timezone:J}):He;ht?(le(ht,"finish"),v==null||v(ht)):(se(),q(Xe)),H(ht,!0)}),Ye=Me(He=>K(He&&vh(r,He,te??he),"finish",oe));h.useEffect(()=>{te!=null&&r.isValid(te)&&q(te)},[te]);const tt=s,Fe=poe(tt),Qe={disablePast:p,disableFuture:f,maxDate:N,minDate:D},Ee={disableHighlightToday:F,readOnly:j,disabled:k,timezone:J,gridLabelId:ve,slots:$,slotProps:L},$e=h.useRef(oe);h.useEffect(()=>{$e.current!==oe&&(ie===$e.current&&Z(oe,!0),$e.current=oe)},[ie,Z,oe]);const qe=h.useMemo(()=>[te],[te]);return u.jsxs(moe,m({ref:n,className:ce(Fe.root,A),ownerState:tt},Q,{children:[u.jsx(Ae,m({},pe,{slots:$,slotProps:L})),u.jsx(goe,{reduceAnimations:C,className:Fe.viewTransitionContainer,transKey:oe,ownerState:tt,children:u.jsxs("div",{children:[oe==="year"&&u.jsx(_re,m({},Qe,Ee,{value:te,onChange:Re,shouldDisableYear:w,hasFocus:Ie,onFocusedViewChange:He=>Z("year",He),yearsPerRow:G,referenceDate:he})),oe==="month"&&u.jsx(Tre,m({},Qe,Ee,{hasFocus:Ie,className:A,value:te,onChange:fe,shouldDisableMonth:y,onFocusedViewChange:He=>Z("month",He),monthsPerRow:Y,referenceDate:he})),oe==="day"&&u.jsx(vre,m({},Pe,Qe,Ee,{onMonthSwitchingAnimationEnd:ye,onFocusedDayChange:H,reduceAnimations:C,selectedDays:qe,onSelectedDaysChange:Ye,shouldDisableDate:g,shouldDisableMonth:y,shouldDisableYear:w,hasFocus:Ie,onFocusedViewChange:He=>Z("day",He),showDaysOutsideCurrentMonth:I,fixedWeekNumber:M,dayOfWeekFormatter:T,displayWeekNumber:W,loading:B,renderLoading:z}))]})})]}))}),Va=({view:e,onViewChange:t,views:n,focusedView:r,onFocusedViewChange:o,value:s,defaultValue:i,referenceDate:l,onChange:a,className:c,classes:d,disableFuture:f,disablePast:p,minDate:b,maxDate:v,shouldDisableDate:x,shouldDisableMonth:C,shouldDisableYear:g,reduceAnimations:y,onMonthChange:w,monthsPerRow:S,onYearChange:P,yearsPerRow:E,slots:A,slotProps:k,loading:j,renderLoading:D,disableHighlightToday:N,readOnly:F,disabled:R,showDaysOutsideCurrentMonth:O,dayOfWeekFormatter:I,sx:M,autoFocus:T,fixedWeekNumber:$,displayWeekNumber:L,timezone:B})=>u.jsx(yoe,{view:e,onViewChange:t,views:n.filter(HP),focusedView:r&&HP(r)?r:null,onFocusedViewChange:o,value:s,defaultValue:i,referenceDate:l,onChange:a,className:c,classes:d,disableFuture:f,disablePast:p,minDate:b,maxDate:v,shouldDisableDate:x,shouldDisableMonth:C,shouldDisableYear:g,reduceAnimations:y,onMonthChange:w,monthsPerRow:S,onYearChange:P,yearsPerRow:E,slots:A,slotProps:k,loading:j,renderLoading:D,disableHighlightToday:N,readOnly:F,disabled:R,showDaysOutsideCurrentMonth:O,dayOfWeekFormatter:I,sx:M,autoFocus:T,fixedWeekNumber:$,displayWeekNumber:L,timezone:B}),yR=h.forwardRef(function(t,n){var c,d;const r=Ws(),o=Bt(),s=YO(t,"MuiDesktopDatePicker"),i=m({day:Va,month:Va,year:Va},s.viewRenderers),l=m({},s,{viewRenderers:i,format:U0(o,s,!1),yearsPerRow:s.yearsPerRow??4,slots:m({openPickerIcon:Ite,field:dR},s.slots),slotProps:m({},s.slotProps,{field:f=>{var p;return m({},V0((p=s.slotProps)==null?void 0:p.field,f),rR(s),{ref:n})},toolbar:m({hidden:!0},(c=s.slotProps)==null?void 0:c.toolbar)})}),{renderPicker:a}=Pte({props:l,valueManager:Bs,valueType:"date",getOpenDialogAriaText:((d=l.localeText)==null?void 0:d.openDatePickerDialogue)??r.openDatePickerDialogue,validator:tg});return a()});yR.propTypes={autoFocus:_.bool,className:_.string,closeOnSelect:_.bool,dayOfWeekFormatter:_.func,defaultValue:_.object,disabled:_.bool,disableFuture:_.bool,disableHighlightToday:_.bool,disableOpenPicker:_.bool,disablePast:_.bool,displayWeekNumber:_.bool,enableAccessibleFieldDOMStructure:_.any,fixedWeekNumber:_.number,format:_.string,formatDensity:_.oneOf(["dense","spacious"]),inputRef:eM,label:_.node,loading:_.bool,localeText:_.object,maxDate:_.object,minDate:_.object,monthsPerRow:_.oneOf([3,4]),name:_.string,onAccept:_.func,onChange:_.func,onClose:_.func,onError:_.func,onMonthChange:_.func,onOpen:_.func,onSelectedSectionsChange:_.func,onViewChange:_.func,onYearChange:_.func,open:_.bool,openTo:_.oneOf(["day","month","year"]),orientation:_.oneOf(["landscape","portrait"]),readOnly:_.bool,reduceAnimations:_.bool,referenceDate:_.object,renderLoading:_.func,selectedSections:_.oneOfType([_.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),_.number]),shouldDisableDate:_.func,shouldDisableMonth:_.func,shouldDisableYear:_.func,showDaysOutsideCurrentMonth:_.bool,slotProps:_.object,slots:_.object,sx:_.oneOfType([_.arrayOf(_.oneOfType([_.func,_.object,_.bool])),_.func,_.object]),timezone:_.string,value:_.object,view:_.oneOf(["day","month","year"]),viewRenderers:_.shape({day:_.func,month:_.func,year:_.func}),views:_.arrayOf(_.oneOf(["day","month","year"]).isRequired),yearsPerRow:_.oneOf([3,4])};const voe=X(_M)({[`& .${Tu.container}`]:{outline:0},[`& .${Tu.paper}`]:{outline:0,minWidth:rg}}),boe=X(i5)({"&:first-of-type":{padding:0}});function xoe(e){const{children:t,onDismiss:n,open:r,slots:o,slotProps:s}=e,i=(o==null?void 0:o.dialog)??voe,l=(o==null?void 0:o.mobileTransition)??Ec;return u.jsx(i,m({open:r,onClose:n},s==null?void 0:s.dialog,{TransitionComponent:l,TransitionProps:s==null?void 0:s.mobileTransition,PaperComponent:o==null?void 0:o.mobilePaper,PaperProps:s==null?void 0:s.mobilePaper,children:u.jsx(boe,{children:t})}))}const Coe=["props","getOpenDialogAriaText"],woe=e=>{var z;let{props:t,getOpenDialogAriaText:n}=e,r=ne(e,Coe);const{slots:o,slotProps:s,className:i,sx:l,format:a,formatDensity:c,enableAccessibleFieldDOMStructure:d,selectedSections:f,onSelectedSectionsChange:p,timezone:b,name:v,label:x,inputRef:C,readOnly:g,disabled:y,localeText:w}=t,S=Bt(),P=h.useRef(null),E=bt(),A=((z=s==null?void 0:s.toolbar)==null?void 0:z.hidden)??!1,{open:k,actions:j,layoutProps:D,renderCurrentView:N,fieldProps:F}=ZO(m({},r,{props:t,fieldRef:P,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),R=o.field,O=Ft({elementType:R,externalSlotProps:s==null?void 0:s.field,additionalProps:m({},F,A&&{id:E},!(y||g)&&{onClick:j.onOpen,onKeyDown:_ee(j.onOpen)},{readOnly:g??!0,disabled:y,className:i,sx:l,format:a,formatDensity:c,enableAccessibleFieldDOMStructure:d,selectedSections:f,onSelectedSectionsChange:p,timezone:b,label:x,name:v},C?{inputRef:C}:{}),ownerState:t});O.inputProps=m({},O.inputProps,{"aria-label":n(F.value,S)});const I=m({textField:o.textField},O.slots),M=o.layout??tR;let T=E;A&&(x?T=`${E}-label`:T=void 0);const $=m({},s,{toolbar:m({},s==null?void 0:s.toolbar,{titleId:E}),mobilePaper:m({"aria-labelledby":T},s==null?void 0:s.mobilePaper)}),L=rt(P,O.unstableFieldRef);return{renderPicker:()=>u.jsxs(_0,{localeText:w,children:[u.jsx(R,m({},O,{slots:I,slotProps:$,unstableFieldRef:L})),u.jsx(xoe,m({},j,{open:k,slots:o,slotProps:$,children:u.jsx(M,m({},D,$==null?void 0:$.layout,{slots:o,slotProps:$,children:N()}))}))]})}},vR=h.forwardRef(function(t,n){var c,d;const r=Ws(),o=Bt(),s=YO(t,"MuiMobileDatePicker"),i=m({day:Va,month:Va,year:Va},s.viewRenderers),l=m({},s,{viewRenderers:i,format:U0(o,s,!1),slots:m({field:dR},s.slots),slotProps:m({},s.slotProps,{field:f=>{var p;return m({},V0((p=s.slotProps)==null?void 0:p.field,f),rR(s),{ref:n})},toolbar:m({hidden:!1},(c=s.slotProps)==null?void 0:c.toolbar)})}),{renderPicker:a}=woe({props:l,valueManager:Bs,valueType:"date",getOpenDialogAriaText:((d=l.localeText)==null?void 0:d.openDatePickerDialogue)??r.openDatePickerDialogue,validator:tg});return a()});vR.propTypes={autoFocus:_.bool,className:_.string,closeOnSelect:_.bool,dayOfWeekFormatter:_.func,defaultValue:_.object,disabled:_.bool,disableFuture:_.bool,disableHighlightToday:_.bool,disableOpenPicker:_.bool,disablePast:_.bool,displayWeekNumber:_.bool,enableAccessibleFieldDOMStructure:_.any,fixedWeekNumber:_.number,format:_.string,formatDensity:_.oneOf(["dense","spacious"]),inputRef:eM,label:_.node,loading:_.bool,localeText:_.object,maxDate:_.object,minDate:_.object,monthsPerRow:_.oneOf([3,4]),name:_.string,onAccept:_.func,onChange:_.func,onClose:_.func,onError:_.func,onMonthChange:_.func,onOpen:_.func,onSelectedSectionsChange:_.func,onViewChange:_.func,onYearChange:_.func,open:_.bool,openTo:_.oneOf(["day","month","year"]),orientation:_.oneOf(["landscape","portrait"]),readOnly:_.bool,reduceAnimations:_.bool,referenceDate:_.object,renderLoading:_.func,selectedSections:_.oneOfType([_.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),_.number]),shouldDisableDate:_.func,shouldDisableMonth:_.func,shouldDisableYear:_.func,showDaysOutsideCurrentMonth:_.bool,slotProps:_.object,slots:_.object,sx:_.oneOfType([_.arrayOf(_.oneOfType([_.func,_.object,_.bool])),_.func,_.object]),timezone:_.string,value:_.object,view:_.oneOf(["day","month","year"]),viewRenderers:_.shape({day:_.func,month:_.func,year:_.func}),views:_.arrayOf(_.oneOf(["day","month","year"]).isRequired),yearsPerRow:_.oneOf([3,4])};const Soe=["desktopModeMediaQuery"],Poe=h.forwardRef(function(t,n){const r=_t({props:t,name:"MuiDatePicker"}),{desktopModeMediaQuery:o=Vee}=r,s=ne(r,Soe);return Em(o,{defaultMatches:!0})?u.jsx(yR,m({ref:n},s)):u.jsx(vR,m({ref:n},s))});function nr(e){return u.jsx(_0,{dateAdapter:KZ,children:u.jsx(Poe,{slots:{textField:Te},...e})})}function bh({placeholder:e,onClick:t,readOnly:n,value:r,onChange:o}){return u.jsxs(vt,{display:"flex",flexDirection:"row",border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:"4px",mt:"-3px",children:[u.jsx(Te,{inputProps:{readOnly:n},placeholder:e,variant:"standard",InputProps:{disableUnderline:!0},sx:{"& .MuiInputBase-input":{padding:"6.5px 14px"}},fullWidth:!0,value:r,onChange:o}),u.jsx(Et,{sx:{borderRadius:0,padding:"0px 22px"},onClick:t,children:">"})]})}function Oc(e,t,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(d){try{c(r.next(d))}catch(f){i(f)}}function a(d){try{c(r.throw(d))}catch(f){i(f)}}function c(d){d.done?s(d.value):o(d.value).then(l,a)}c((r=r.apply(e,t||[])).next())})}function Rc(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(d){return a([c,d])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(n=0)),n;)try{if(r=1,o&&(s=c[0]&2?o.return:c[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,c[1])).done)return s;switch(o=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],o=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ZP(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function eA(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Aoe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function tf(e,t){var n=Eoe(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Eoe(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),o=Aoe.get(r);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var koe=[".DS_Store","Thumbs.db"];function Ioe(e){return Oc(this,void 0,void 0,function(){return Rc(this,function(t){return xh(e)&&Moe(e.dataTransfer)?[2,Doe(e.dataTransfer,e.type)]:Toe(e)?[2,Ooe(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,Roe(e)]:[2,[]]})})}function Moe(e){return xh(e)}function Toe(e){return xh(e)&&xh(e.target)}function xh(e){return typeof e=="object"&&e!==null}function Ooe(e){return nb(e.target.files).map(function(t){return tf(t)})}function Roe(e){return Oc(this,void 0,void 0,function(){var t;return Rc(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(r){return tf(r)})]}})})}function Doe(e,t){return Oc(this,void 0,void 0,function(){var n,r;return Rc(this,function(o){switch(o.label){case 0:return e.items?(n=nb(e.items).filter(function(s){return s.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(Foe))]):[3,2];case 1:return r=o.sent(),[2,tA(bR(r))];case 2:return[2,tA(nb(e.files).map(function(s){return tf(s)}))]}})})}function tA(e){return e.filter(function(t){return koe.indexOf(t.name)===-1})}function nb(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function Foe(e){if(typeof e.webkitGetAsEntry!="function")return nA(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?xR(t):nA(e)}function bR(e){return e.reduce(function(t,n){return eA(eA([],ZP(t),!1),ZP(Array.isArray(n)?bR(n):[n]),!1)},[])}function nA(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=tf(t);return Promise.resolve(n)}function joe(e){return Oc(this,void 0,void 0,function(){return Rc(this,function(t){return[2,e.isDirectory?xR(e):$oe(e)]})})}function xR(e){var t=e.createReader();return new Promise(function(n,r){var o=[];function s(){var i=this;t.readEntries(function(l){return Oc(i,void 0,void 0,function(){var a,c,d;return Rc(this,function(f){switch(f.label){case 0:if(l.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return a=f.sent(),n(a),[3,4];case 3:return c=f.sent(),r(c),[3,4];case 4:return[3,6];case 5:d=Promise.all(l.map(joe)),o.push(d),s(),f.label=6;case 6:return[2]}})})},function(l){r(l)})}s()})}function $oe(e){return Oc(this,void 0,void 0,function(){return Rc(this,function(t){return[2,new Promise(function(n,r){e.file(function(o){var s=tf(o,e.fullPath);n(s)},function(o){r(o)})})]})})}var Loe=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",o=(e.type||"").toLowerCase(),s=o.replace(/\/.*$/,"");return n.some(function(i){var l=i.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?s===l.replace(/\/.*$/,""):o===l})}return!0};function rA(e){return Hoe(e)||Boe(e)||wR(e)||Noe()}function Noe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Boe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hoe(e){if(Array.isArray(e))return rb(e)}function oA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function sA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oA(Object(n),!0).forEach(function(r){CR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cd(e,t){return Voe(e)||_oe(e,t)||wR(e,t)||zoe()}function zoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wR(e,t){if(e){if(typeof e=="string")return rb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rb(e,t)}}function rb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _oe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,s=!1,i,l;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));o=!0);}catch(a){s=!0,l=a}finally{try{!o&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function Voe(e){if(Array.isArray(e))return e}var Woe="file-invalid-type",Uoe="file-too-large",Goe="file-too-small",Qoe="too-many-files",Koe=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:Woe,message:"File type must be ".concat(n)}},iA=function(t){return{code:Uoe,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},lA=function(t){return{code:Goe,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Yoe={code:Qoe,message:"Too many files"};function SR(e,t){var n=e.type==="application/x-moz-file"||Loe(e,t);return[n,n?null:Koe(t)]}function PR(e,t,n){if(qi(e.size))if(qi(t)&&qi(n)){if(e.size>n)return[!1,iA(n)];if(e.size<t)return[!1,lA(t)]}else{if(qi(t)&&e.size<t)return[!1,lA(t)];if(qi(n)&&e.size>n)return[!1,iA(n)]}return[!0,null]}function qi(e){return e!=null}function qoe(e){var t=e.files,n=e.accept,r=e.minSize,o=e.maxSize,s=e.multiple,i=e.maxFiles,l=e.validator;return!s&&t.length>1||s&&i>=1&&t.length>i?!1:t.every(function(a){var c=SR(a,n),d=Cd(c,1),f=d[0],p=PR(a,r,o),b=Cd(p,1),v=b[0],x=l?l(a):null;return f&&v&&!x})}function Ch(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function _f(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function aA(e){e.preventDefault()}function Xoe(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Joe(e){return e.indexOf("Edge/")!==-1}function Zoe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Xoe(e)||Joe(e)}function zo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];return t.some(function(l){return!Ch(r)&&l&&l.apply(void 0,[r].concat(s)),Ch(r)})}}function ese(){return"showOpenFilePicker"in window}function tse(e){if(qi(e)){var t=Object.entries(e).filter(function(n){var r=Cd(n,2),o=r[0],s=r[1],i=!0;return AR(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(s)||!s.every(ER))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(n,r){var o=Cd(r,2),s=o[0],i=o[1];return sA(sA({},n),{},CR({},s,i))},{});return[{description:"Files",accept:t}]}return e}function nse(e){if(qi(e))return Object.entries(e).reduce(function(t,n){var r=Cd(n,2),o=r[0],s=r[1];return[].concat(rA(t),[o],rA(s))},[]).filter(function(t){return AR(t)||ER(t)}).join(",")}function rse(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function ose(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function AR(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function ER(e){return/^.*\.[\w]+$/.test(e)}var sse=["children"],ise=["open"],lse=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ase=["refKey","onChange","onClick"];function cse(e){return fse(e)||dse(e)||kR(e)||use()}function use(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fse(e){if(Array.isArray(e))return ob(e)}function Sy(e,t){return mse(e)||hse(e,t)||kR(e,t)||pse()}function pse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kR(e,t){if(e){if(typeof e=="string")return ob(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ob(e,t)}}function ob(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hse(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,s=!1,i,l;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));o=!0);}catch(a){s=!0,l=a}finally{try{!o&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function mse(e){if(Array.isArray(e))return e}function cA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(n),!0).forEach(function(r){sb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wh(e,t){if(e==null)return{};var n=gse(e,t),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gse(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,s;for(s=0;s<r.length;s++)o=r[s],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var Z0=h.forwardRef(function(e,t){var n=e.children,r=wh(e,sse),o=MR(r),s=o.open,i=wh(o,ise);return h.useImperativeHandle(t,function(){return{open:s}},[s]),_e.createElement(h.Fragment,null,n(qt(qt({},i),{},{open:s})))});Z0.displayName="Dropzone";var IR={disabled:!1,getFilesFromEvent:Ioe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Z0.defaultProps=IR;Z0.propTypes={children:_.func,accept:_.objectOf(_.arrayOf(_.string)),multiple:_.bool,preventDropOnDocument:_.bool,noClick:_.bool,noKeyboard:_.bool,noDrag:_.bool,noDragEventsBubbling:_.bool,minSize:_.number,maxSize:_.number,maxFiles:_.number,disabled:_.bool,getFilesFromEvent:_.func,onFileDialogCancel:_.func,onFileDialogOpen:_.func,useFsAccessApi:_.bool,autoFocus:_.bool,onDragEnter:_.func,onDragLeave:_.func,onDragOver:_.func,onDrop:_.func,onDropAccepted:_.func,onDropRejected:_.func,onError:_.func,validator:_.func};var ib={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function MR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=qt(qt({},IR),e),n=t.accept,r=t.disabled,o=t.getFilesFromEvent,s=t.maxSize,i=t.minSize,l=t.multiple,a=t.maxFiles,c=t.onDragEnter,d=t.onDragLeave,f=t.onDragOver,p=t.onDrop,b=t.onDropAccepted,v=t.onDropRejected,x=t.onFileDialogCancel,C=t.onFileDialogOpen,g=t.useFsAccessApi,y=t.autoFocus,w=t.preventDropOnDocument,S=t.noClick,P=t.noKeyboard,E=t.noDrag,A=t.noDragEventsBubbling,k=t.onError,j=t.validator,D=h.useMemo(function(){return nse(n)},[n]),N=h.useMemo(function(){return tse(n)},[n]),F=h.useMemo(function(){return typeof C=="function"?C:uA},[C]),R=h.useMemo(function(){return typeof x=="function"?x:uA},[x]),O=h.useRef(null),I=h.useRef(null),M=h.useReducer(yse,ib),T=Sy(M,2),$=T[0],L=T[1],B=$.isFocused,z=$.isFileDialogActive,W=h.useRef(typeof window<"u"&&window.isSecureContext&&g&&ese()),G=function(){!W.current&&z&&setTimeout(function(){if(I.current){var ve=I.current.files;ve.length||(L({type:"closeDialog"}),R())}},300)};h.useEffect(function(){return window.addEventListener("focus",G,!1),function(){window.removeEventListener("focus",G,!1)}},[I,z,R,W]);var Y=h.useRef([]),V=function(ve){O.current&&O.current.contains(ve.target)||(ve.preventDefault(),Y.current=[])};h.useEffect(function(){return w&&(document.addEventListener("dragover",aA,!1),document.addEventListener("drop",V,!1)),function(){w&&(document.removeEventListener("dragover",aA),document.removeEventListener("drop",V))}},[O,w]),h.useEffect(function(){return!r&&y&&O.current&&O.current.focus(),function(){}},[O,y,r]);var Q=h.useCallback(function(ee){k?k(ee):console.error(ee)},[k]),te=h.useCallback(function(ee){ee.preventDefault(),ee.persist(),re(ee),Y.current=[].concat(cse(Y.current),[ee.target]),_f(ee)&&Promise.resolve(o(ee)).then(function(ve){if(!(Ch(ee)&&!A)){var Ie=ve.length,Ae=Ie>0&&qoe({files:ve,accept:D,minSize:i,maxSize:s,multiple:l,maxFiles:a,validator:j}),pe=Ie>0&&!Ae;L({isDragAccept:Ae,isDragReject:pe,isDragActive:!0,type:"setDraggedFiles"}),c&&c(ee)}}).catch(function(ve){return Q(ve)})},[o,c,Q,A,D,i,s,l,a,j]),K=h.useCallback(function(ee){ee.preventDefault(),ee.persist(),re(ee);var ve=_f(ee);if(ve&&ee.dataTransfer)try{ee.dataTransfer.dropEffect="copy"}catch{}return ve&&f&&f(ee),!1},[f,A]),J=h.useCallback(function(ee){ee.preventDefault(),ee.persist(),re(ee);var ve=Y.current.filter(function(Ae){return O.current&&O.current.contains(Ae)}),Ie=ve.indexOf(ee.target);Ie!==-1&&ve.splice(Ie,1),Y.current=ve,!(ve.length>0)&&(L({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),_f(ee)&&d&&d(ee))},[O,d,A]),oe=h.useCallback(function(ee,ve){var Ie=[],Ae=[];ee.forEach(function(pe){var fe=SR(pe,D),Re=Sy(fe,2),Ye=Re[0],tt=Re[1],Fe=PR(pe,i,s),Qe=Sy(Fe,2),Ee=Qe[0],$e=Qe[1],qe=j?j(pe):null;if(Ye&&Ee&&!qe)Ie.push(pe);else{var He=[tt,$e];qe&&(He=He.concat(qe)),Ae.push({file:pe,errors:He.filter(function(Xe){return Xe})})}}),(!l&&Ie.length>1||l&&a>=1&&Ie.length>a)&&(Ie.forEach(function(pe){Ae.push({file:pe,errors:[Yoe]})}),Ie.splice(0)),L({acceptedFiles:Ie,fileRejections:Ae,type:"setFiles"}),p&&p(Ie,Ae,ve),Ae.length>0&&v&&v(Ae,ve),Ie.length>0&&b&&b(Ie,ve)},[L,l,D,i,s,a,p,b,v,j]),de=h.useCallback(function(ee){ee.preventDefault(),ee.persist(),re(ee),Y.current=[],_f(ee)&&Promise.resolve(o(ee)).then(function(ve){Ch(ee)&&!A||oe(ve,ee)}).catch(function(ve){return Q(ve)}),L({type:"reset"})},[o,oe,Q,A]),ie=h.useCallback(function(){if(W.current){L({type:"openDialog"}),F();var ee={multiple:l,types:N};window.showOpenFilePicker(ee).then(function(ve){return o(ve)}).then(function(ve){oe(ve,null),L({type:"closeDialog"})}).catch(function(ve){rse(ve)?(R(ve),L({type:"closeDialog"})):ose(ve)?(W.current=!1,I.current?(I.current.value=null,I.current.click()):Q(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Q(ve)});return}I.current&&(L({type:"openDialog"}),F(),I.current.value=null,I.current.click())},[L,F,R,g,oe,Q,N,l]),Z=h.useCallback(function(ee){!O.current||!O.current.isEqualNode(ee.target)||(ee.key===" "||ee.key==="Enter"||ee.keyCode===32||ee.keyCode===13)&&(ee.preventDefault(),ie())},[O,ie]),se=h.useCallback(function(){L({type:"focus"})},[]),le=h.useCallback(function(){L({type:"blur"})},[]),he=h.useCallback(function(){S||(Zoe()?setTimeout(ie,0):ie())},[S,ie]),Pe=function(ve){return r?null:ve},H=function(ve){return P?null:Pe(ve)},q=function(ve){return E?null:Pe(ve)},re=function(ve){A&&ve.stopPropagation()},ge=h.useMemo(function(){return function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=ee.refKey,Ie=ve===void 0?"ref":ve,Ae=ee.role,pe=ee.onKeyDown,fe=ee.onFocus,Re=ee.onBlur,Ye=ee.onClick,tt=ee.onDragEnter,Fe=ee.onDragOver,Qe=ee.onDragLeave,Ee=ee.onDrop,$e=wh(ee,lse);return qt(qt(sb({onKeyDown:H(zo(pe,Z)),onFocus:H(zo(fe,se)),onBlur:H(zo(Re,le)),onClick:Pe(zo(Ye,he)),onDragEnter:q(zo(tt,te)),onDragOver:q(zo(Fe,K)),onDragLeave:q(zo(Qe,J)),onDrop:q(zo(Ee,de)),role:typeof Ae=="string"&&Ae!==""?Ae:"presentation"},Ie,O),!r&&!P?{tabIndex:0}:{}),$e)}},[O,Z,se,le,he,te,K,J,de,P,E,r]),ye=h.useCallback(function(ee){ee.stopPropagation()},[]),ae=h.useMemo(function(){return function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=ee.refKey,Ie=ve===void 0?"ref":ve,Ae=ee.onChange,pe=ee.onClick,fe=wh(ee,ase),Re=sb({accept:D,multiple:l,type:"file",style:{display:"none"},onChange:Pe(zo(Ae,de)),onClick:Pe(zo(pe,ye)),tabIndex:-1},Ie,I);return qt(qt({},Re),fe)}},[I,n,l,de,r]);return qt(qt({},$),{},{isFocused:B&&!r,getRootProps:ge,getInputProps:ae,rootRef:O,inputRef:I,open:Pe(ie)})}function yse(e,t){switch(t.type){case"focus":return qt(qt({},e),{},{isFocused:!0});case"blur":return qt(qt({},e),{},{isFocused:!1});case"openDialog":return qt(qt({},ib),{},{isFileDialogActive:!0});case"closeDialog":return qt(qt({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return qt(qt({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return qt(qt({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return qt({},ib);default:return e}}function uA(){}function vse({category:e,renderComponent:t,onChange:n,accept:r}){const o=h.useRef({}),[s,i]=h.useState(!1),{getRootProps:l,getInputProps:a}=MR({accept:{"image/*":[]},useFsAccessApi:!1,noDrag:!0});return u.jsxs("div",{...l(),children:[u.jsx("input",{...a(),accept:r,type:"file",onChange:async c=>{var f,p;if(s||!((p=(f=c==null?void 0:c.target)==null?void 0:f.files)!=null&&p[0]))return;i(!0);const d=c.target.files[0];i(!1),n&&n(d),c.target.value=null},ref:c=>{c&&(o.current=c)},style:{display:"none"}}),u.jsx("div",{style:{width:"100%",height:"100%"},children:t&&t({isLoading:s,selectFile:()=>o.current.click()})})]})}function hs({children:e}){const t=Em("(min-width:700px)");return u.jsx("form",{children:e(t)})}function st({isDesktop:e,...t}){return u.jsx(ue,{container:!0,direction:e?"row":"column",...t})}function bse(){const{t:e,i18n:t}=wt(["advanceSearch"]),{handleSubmit:n,control:r,formState:{errors:o},watch:s,setValue:i}=Lo({});return u.jsxs(vt,{p:4,bgcolor:jt.bgColor,height:"100%",display:"flex",flexDirection:"column",overflow:"auto",children:[u.jsx(Ze,{variant:"title2",color:"navy",children:e("advanceSearch")}),u.jsx(hs,{children:l=>u.jsxs(ue,{container:!0,direction:"column",flexWrap:"nowrap",my:2,children:[u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"applicantNumber",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("applicantNumber"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"liceningCaseId",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("licesneCaseId"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"fileReference",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("fileReference"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(Ce,{title:e("LAFileReference"),labelPlacement:"top",fullWidth:!0,children:u.jsxs(dt,{direction:"row",gap:2,alignItems:"center",children:[u.jsx(be,{name:"lAFileReference1",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Te,{fullWidth:!0,...a})}),u.jsx(Ze,{children:e("in")}),u.jsx(be,{name:"lAFileReference2",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Te,{fullWidth:!0,...a})})]})})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"schoolNameChi",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("schoolNameChi"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"schoolNameEng",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("schoolNameEng"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"addressChi",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("addressChi"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"addressEng",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("addressEng"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"ApRseRegNunber",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("ApRseRegNunber"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"ApRseName",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("ApRseName"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"caseOfficer",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("caseOfficer"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"nature",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>{var f;return u.jsx(Ce,{title:e("nature"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(rn,{options:[{label:e("placeholder.pleaseSelect"),id:""},{label:"Option 1",id:"1"},{label:"Option 2",id:"2"}],getOptionLabel:p=>p.label,...a,value:(f=a==null?void 0:a.value)!=null&&f.id?a==null?void 0:a.value:null,onChange:(p,b)=>a.onChange(b),disableClearable:!0,placeholder:e("placeholder.pleaseSelect")})})}})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"category",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>{var f;return u.jsx(Ce,{title:e("category"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(rn,{options:[{label:e("placeholder.pleaseSelect"),id:""},{label:"Option 1",id:"1"},{label:"Option 2",id:"2"}],getOptionLabel:p=>p.label,...a,value:(f=a==null?void 0:a.value)!=null&&f.id?a==null?void 0:a.value:null,onChange:(p,b)=>a.onChange(b),disableClearable:!0,placeholder:e("placeholder.pleaseSelect")})})}})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"receivedDate",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("receivedDate"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(nr,{...a})})})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"region",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>{var f;return u.jsx(Ce,{title:e("region"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(rn,{options:[{label:e("placeholder.pleaseSelect"),id:""},{label:"Option 1",id:"1"},{label:"Option 2",id:"2"}],getOptionLabel:p=>p.label,...a,value:(f=a==null?void 0:a.value)!=null&&f.id?a==null?void 0:a.value:null,onChange:(p,b)=>a.onChange(b),disableClearable:!0,placeholder:e("placeholder.pleaseSelect")})})}})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"targetReplyDate",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("targetReplyDate"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(nr,{...a})})})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"district",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>{var f;return u.jsx(Ce,{title:e("district"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(rn,{options:[{label:e("placeholder.pleaseSelect"),id:""},{label:"Option 1",id:"1"},{label:"Option 2",id:"2"}],getOptionLabel:p=>p.label,...a,value:(f=a==null?void 0:a.value)!=null&&f.id?a==null?void 0:a.value:null,onChange:(p,b)=>a.onChange(b),disableClearable:!0,placeholder:e("placeholder.pleaseSelect")})})}})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"dccA1990District",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>{var f;return u.jsx(Ce,{title:e("dccA1990District"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(rn,{options:[{label:e("placeholder.pleaseSelect"),id:""},{label:"Option 1",id:"1"},{label:"Option 2",id:"2"}],getOptionLabel:p=>p.label,...a,value:(f=a==null?void 0:a.value)!=null&&f.id?a==null?void 0:a.value:null,onChange:(p,b)=>a.onChange(b),disableClearable:!0,placeholder:e("placeholder.pleaseSelect")})})}})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"area",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>{var f;return u.jsx(Ce,{title:e("area"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(rn,{options:[{label:e("placeholder.pleaseSelect"),id:""},{label:"Option 1",id:"1"},{label:"Option 2",id:"2"}],getOptionLabel:p=>p.label,...a,value:(f=a==null?void 0:a.value)!=null&&f.id?a==null?void 0:a.value:null,onChange:(p,b)=>a.onChange(b),disableClearable:!0,placeholder:e("placeholder.pleaseSelect")})})}})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"dccA1990Area",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>{var f;return u.jsx(Ce,{title:e("dccA1990Area"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(rn,{options:[{label:e("placeholder.pleaseSelect"),id:""},{label:"Option 1",id:"1"},{label:"Option 2",id:"2"}],getOptionLabel:p=>p.label,...a,value:(f=a==null?void 0:a.value)!=null&&f.id?a==null?void 0:a.value:null,onChange:(p,b)=>a.onChange(b),disableClearable:!0,placeholder:e("placeholder.pleaseSelect")})})}})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"actualReplyDate",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("actualReplyDate"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(nr,{...a})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"auditResult",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>{var f;return u.jsx(Ce,{title:e("auditResult"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(rn,{options:[{label:e("placeholder.pleaseSelect"),id:""},{label:"Option 1",id:"1"},{label:"Option 2",id:"2"}],getOptionLabel:p=>p.label,...a,value:(f=a==null?void 0:a.value)!=null&&f.id?a==null?void 0:a.value:null,onChange:(p,b)=>a.onChange(b),disableClearable:!0,placeholder:e("placeholder.pleaseSelect")})})}})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"remarks",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("remarks"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"applicationType",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>{var f;return u.jsx(Ce,{title:e("applicationType"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(rn,{options:[{label:e("placeholder.pleaseSelect"),id:""},{label:"Option 1",id:"1"},{label:"Option 2",id:"2"}],getOptionLabel:p=>p.label,...a,value:(f=a==null?void 0:a.value)!=null&&f.id?a==null?void 0:a.value:null,onChange:(p,b)=>a.onChange(b),disableClearable:!0,placeholder:e("placeholder.pleaseSelect")})})}})})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"blockUnitId",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("blockUnitId"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsx(Te,{...a})})})}),l&&u.jsx(ue,{item:!0,xs:!0})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:3,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"permission",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(Ce,{title:e("permission"),labelPlacement:"top",error:c,helperText:d==null?void 0:d.message,fullWidth:!0,children:u.jsxs(YW,{row:!0,children:[u.jsx(As,{value:"all",control:u.jsx(Df,{}),label:e("permissionOptions.all")}),u.jsx(As,{value:"any",control:u.jsx(Df,{}),label:e("permissionOptions.any")}),u.jsx(As,{value:"includeUnitSign",control:u.jsx(Df,{}),label:e("permissionOptions.includeUnitSign")}),u.jsx(As,{value:"includeHistory",control:u.jsx(Df,{}),label:e("permissionOptions.includeHistory")})]})})})}),l&&u.jsx(ue,{item:!0,xs:!0})]}),u.jsxs(st,{container:!0,isDesktop:l,gap:2,children:[u.jsx(be,{name:"outstandingCasesOnly",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>u.jsx(As,{label:e("outstandingCasesOnly"),control:u.jsx(yh,{})})}),u.jsx(be,{name:"withReminderMoreThan",control:r,render:({field:a,fieldState:{invalid:c,error:d}})=>{var f;return u.jsxs(dt,{direction:"row",alignItems:"center",children:[u.jsx(yh,{}),u.jsx(Ze,{mr:1,children:e("withReminderMoreThan")}),u.jsx(rn,{options:[{label:e("placeholder.pleaseSelect"),id:""},{label:"Option 1",id:"1"},{label:"Option 2",id:"2"}],getOptionLabel:p=>p.label,...a,value:(f=a==null?void 0:a.value)!=null&&f.id?a==null?void 0:a.value:null,onChange:(p,b)=>a.onChange(b),disableClearable:!0,sx:{minWidth:120}}),u.jsx(Ze,{ml:1,children:e("no")})]})}})]}),u.jsx(yt,{sx:{my:3}}),u.jsx(Et,{sx:{height:40,width:160},children:e("button.search")})]})})]})}function xse(){const e=ax(),{t,i18n:n}=wt(["common"]),[r,o]=_e.useState(null);return u.jsxs(vt,{p:4,bgcolor:jt.bgColor,height:"100%",display:"flex",flexDirection:"column",overflow:"auto",children:[u.jsx(Ze,{variant:"title2",color:"navy",children:"Forms"}),u.jsx(Ce,{title:"Select Form",labelPlacement:"top",fullWidth:!0,sx:{mt:2},children:u.jsx(rn,{options:[{label:"JOKC02",id:"jokc02"},{label:"CCCAIMH/3",id:"cccaimh3"},{label:"CCCAIC2",id:"cccaic2"},{label:"A2",id:"a2"},{label:"B2",id:"b2"},{label:"C2",id:"c2"},{label:"E2",id:"e2"},{label:"F2",id:"f2"},{label:"G2",id:"g2"}],getOptionLabel:s=>s.label,value:r,onChange:(s,i)=>o(i),disableClearable:!0,placeholder:t("placeholder.pleaseSelect"),sx:{width:"50%"}})}),u.jsx(Et,{sx:{width:"fit-content",mt:2},onClick:()=>e(`/forms/${r.id}`),disabled:!(r!=null&&r.id),children:"Next"})]})}function jl(e){this._maxSize=e,this.clear()}jl.prototype.clear=function(){this._size=0,this._values=Object.create(null)};jl.prototype.get=function(e){return this._values[e]};jl.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var Cse=/[^.^\]^[]+|(?=\[\]|\.\.)/g,TR=/^\d+$/,wse=/^\d/,Sse=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,Pse=/^\s*(['"]?)(.*?)(\1)\s*$/,eC=512,dA=new jl(eC),fA=new jl(eC),pA=new jl(eC),hl={Cache:jl,split:lb,normalizePath:Py,setter:function(e){var t=Py(e);return fA.get(e)||fA.set(e,function(r,o){for(var s=0,i=t.length,l=r;s<i-1;){var a=t[s];if(a==="__proto__"||a==="constructor"||a==="prototype")return r;l=l[t[s++]]}l[t[s]]=o})},getter:function(e,t){var n=Py(e);return pA.get(e)||pA.set(e,function(o){for(var s=0,i=n.length;s<i;)if(o!=null||!t)o=o[n[s++]];else return;return o})},join:function(e){return e.reduce(function(t,n){return t+(tC(n)||TR.test(n)?"["+n+"]":(t?".":"")+n)},"")},forEach:function(e,t,n){Ase(Array.isArray(e)?e:lb(e),t,n)}};function Py(e){return dA.get(e)||dA.set(e,lb(e).map(function(t){return t.replace(Pse,"$2")}))}function lb(e){return e.match(Cse)||[""]}function Ase(e,t,n){var r=e.length,o,s,i,l;for(s=0;s<r;s++)o=e[s],o&&(Ise(o)&&(o='"'+o+'"'),l=tC(o),i=!l&&/^\d+$/.test(o),t.call(n,o,l,i,s,e))}function tC(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function Ese(e){return e.match(wse)&&!e.match(TR)}function kse(e){return Sse.test(e)}function Ise(e){return!tC(e)&&(Ese(e)||kse(e))}const Mse=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,sg=e=>e.match(Mse)||[],ig=e=>e[0].toUpperCase()+e.slice(1),nC=(e,t)=>sg(e).join(t).toLowerCase(),OR=e=>sg(e).reduce((t,n)=>`${t}${t?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),Tse=e=>ig(OR(e)),Ose=e=>nC(e,"_"),Rse=e=>nC(e,"-"),Dse=e=>ig(nC(e," ")),Fse=e=>sg(e).map(ig).join(" ");var Ay={words:sg,upperFirst:ig,camelCase:OR,pascalCase:Tse,snakeCase:Ose,kebabCase:Rse,sentenceCase:Dse,titleCase:Fse},rC={exports:{}};rC.exports=function(e){return RR(jse(e),e)};rC.exports.array=RR;function RR(e,t){var n=e.length,r=new Array(n),o={},s=n,i=$se(t),l=Lse(e);for(t.forEach(function(c){if(!l.has(c[0])||!l.has(c[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)o[s]||a(e[s],s,new Set);return r;function a(c,d,f){if(f.has(c)){var p;try{p=", node was:"+JSON.stringify(c)}catch{p=""}throw new Error("Cyclic dependency"+p)}if(!l.has(c))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(!o[d]){o[d]=!0;var b=i.get(c)||new Set;if(b=Array.from(b),d=b.length){f.add(c);do{var v=b[--d];a(v,l.get(v),f)}while(d);f.delete(c)}r[--n]=c}}}function jse(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var o=e[n];t.add(o[0]),t.add(o[1])}return Array.from(t)}function $se(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var o=e[n];t.has(o[0])||t.set(o[0],new Set),t.has(o[1])||t.set(o[1],new Set),t.get(o[0]).add(o[1])}return t}function Lse(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}var Nse=rC.exports;const Bse=ps(Nse),Hse=Object.prototype.toString,zse=Error.prototype.toString,_se=RegExp.prototype.toString,Vse=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Wse=/^Symbol\((.*)\)(.*)$/;function Use(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function hA(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const n=typeof e;if(n==="number")return Use(e);if(n==="string")return t?`"${e}"`:e;if(n==="function")return"[Function "+(e.name||"anonymous")+"]";if(n==="symbol")return Vse.call(e).replace(Wse,"Symbol($1)");const r=Hse.call(e).slice(8,-1);return r==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):r==="Error"||e instanceof Error?"["+zse.call(e)+"]":r==="RegExp"?_se.call(e):null}function ki(e,t){let n=hA(e,t);return n!==null?n:JSON.stringify(e,function(r,o){let s=hA(this[r],t);return s!==null?s:o},2)}function DR(e){return e==null?[]:[].concat(e)}let FR,jR,$R,Gse=/\$\{\s*(\w+)\s*\}/g;FR=Symbol.toStringTag;class mA{constructor(t,n,r,o){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[FR]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=o,this.errors=[],this.inner=[],DR(t).forEach(s=>{if(fr.isError(s)){this.errors.push(...s.errors);const i=s.inner.length?s.inner:[s];this.inner.push(...i)}else this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}jR=Symbol.hasInstance;$R=Symbol.toStringTag;class fr extends Error{static formatError(t,n){const r=n.label||n.path||"this";return r!==n.path&&(n=Object.assign({},n,{path:r})),typeof t=="string"?t.replace(Gse,(o,s)=>ki(n[s])):typeof t=="function"?t(n):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,n,r,o,s){const i=new mA(t,n,r,o);if(s)return i;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[$R]="Error",this.name=i.name,this.message=i.message,this.type=i.type,this.value=i.value,this.path=i.path,this.errors=i.errors,this.inner=i.inner,Error.captureStackTrace&&Error.captureStackTrace(this,fr)}static[jR](t){return mA[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let Uo={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:r})=>{const o=r!=null&&r!==n?` (cast from the value \`${ki(r,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${ki(n,!0)}\``+o:`${e} must match the configured type. The validated value was: \`${ki(n,!0)}\``+o}},ar={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Qse={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},ab={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Kse={isValue:"${path} field must be ${value}"},cb={noUnknown:"${path} field has unspecified keys: ${unknown}"},Yse={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},qse={notType:e=>{const{path:t,value:n,spec:r}=e,o=r.types.length;if(Array.isArray(n)){if(n.length<o)return`${t} tuple value has too few items, expected a length of ${o} but got ${n.length} for value: \`${ki(n,!0)}\``;if(n.length>o)return`${t} tuple value has too many items, expected a length of ${o} but got ${n.length} for value: \`${ki(n,!0)}\``}return fr.formatError(Uo.notType,e)}};Object.assign(Object.create(null),{mixed:Uo,string:ar,number:Qse,date:ab,object:cb,array:Yse,boolean:Kse,tuple:qse});const oC=e=>e&&e.__isYupSchema__;class Sh{static fromOptions(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:o,otherwise:s}=n,i=typeof r=="function"?r:(...l)=>l.every(a=>a===r);return new Sh(t,(l,a)=>{var c;let d=i(...l)?o:s;return(c=d==null?void 0:d(a))!=null?c:a})}constructor(t,n){this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}resolve(t,n){let r=this.refs.map(s=>s.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),o=this.fn(r,t,n);if(o===void 0||o===t)return t;if(!oC(o))throw new TypeError("conditions must return a schema object");return o.resolve(n)}}const Vf={context:"$",value:"."};class $l{constructor(t,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Vf.context,this.isValue=this.key[0]===Vf.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Vf.context:this.isValue?Vf.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&hl.getter(this.path,!0),this.map=n.map}getValue(t,n,r){let o=this.isContext?r:this.isValue?t:n;return this.getter&&(o=this.getter(o||{})),this.map&&(o=this.map(o)),o}cast(t,n){return this.getValue(t,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}$l.prototype.__isYupRef=!0;const nl=e=>e==null;function Jl(e){function t({value:n,path:r="",options:o,originalValue:s,schema:i},l,a){const{name:c,test:d,params:f,message:p,skipAbsent:b}=e;let{parent:v,context:x,abortEarly:C=i.spec.abortEarly,disableStackTrace:g=i.spec.disableStackTrace}=o;function y(N){return $l.isRef(N)?N.getValue(n,v,x):N}function w(N={}){const F=Object.assign({value:n,originalValue:s,label:i.spec.label,path:N.path||r,spec:i.spec,disableStackTrace:N.disableStackTrace||g},f,N.params);for(const O of Object.keys(F))F[O]=y(F[O]);const R=new fr(fr.formatError(N.message||p,F),n,F.path,N.type||c,F.disableStackTrace);return R.params=F,R}const S=C?l:a;let P={path:r,parent:v,type:c,from:o.from,createError:w,resolve:y,options:o,originalValue:s,schema:i};const E=N=>{fr.isError(N)?S(N):N?a(null):S(w())},A=N=>{fr.isError(N)?S(N):l(N)};if(b&&nl(n))return E(!0);let j;try{var D;if(j=d.call(P,n,P),typeof((D=j)==null?void 0:D.then)=="function"){if(o.sync)throw new Error(`Validation test of type: "${P.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(j).then(E,A)}}catch(N){A(N);return}E(j)}return t.OPTIONS=e,t}function Xse(e,t,n,r=n){let o,s,i;return t?(hl.forEach(t,(l,a,c)=>{let d=a?l.slice(1,l.length-1):l;e=e.resolve({context:r,parent:o,value:n});let f=e.type==="tuple",p=c?parseInt(d,10):0;if(e.innerType||f){if(f&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${i}" must contain an index to the tuple element, e.g. "${i}[0]"`);if(n&&p>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);o=n,n=n&&n[p],e=f?e.spec.types[p]:e.innerType}if(!c){if(!e.fields||!e.fields[d])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${i} which is a type: "${e.type}")`);o=n,n=n&&n[d],e=e.fields[d]}s=d,i=a?"["+l+"]":"."+l}),{schema:e,parent:o,parentPath:s}):{parent:o,parentPath:t,schema:e}}class Ph extends Set{describe(){const t=[];for(const n of this.values())t.push($l.isRef(n)?n.describe():n);return t}resolveAll(t){let n=[];for(const r of this.values())n.push(t(r));return n}clone(){return new Ph(this.values())}merge(t,n){const r=this.clone();return t.forEach(o=>r.add(o)),n.forEach(o=>r.delete(o)),r}}function Aa(e,t=new Map){if(oC(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let n;if(e instanceof Date)n=new Date(e.getTime()),t.set(e,n);else if(e instanceof RegExp)n=new RegExp(e),t.set(e,n);else if(Array.isArray(e)){n=new Array(e.length),t.set(e,n);for(let r=0;r<e.length;r++)n[r]=Aa(e[r],t)}else if(e instanceof Map){n=new Map,t.set(e,n);for(const[r,o]of e.entries())n.set(r,Aa(o,t))}else if(e instanceof Set){n=new Set,t.set(e,n);for(const r of e)n.add(Aa(r,t))}else if(e instanceof Object){n={},t.set(e,n);for(const[r,o]of Object.entries(e))n[r]=Aa(o,t)}else throw Error(`Unable to clone ${e}`);return n}class fs{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Ph,this._blacklist=new Ph,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Uo.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=Aa(Object.assign({},this.spec,t)),n}label(t){let n=this.clone();return n.spec.label=t,n}meta(...t){if(t.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},t[0]),n}withMutation(t){let n=this._mutate;this._mutate=!0;let r=t(this);return this._mutate=n,r}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let n=this,r=t.clone();const o=Object.assign({},n.spec,r.spec);return r.spec=o,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(t._whitelist,t._blacklist),r._blacklist=n._blacklist.merge(t._blacklist,t._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(s=>{t.tests.forEach(i=>{s.test(i.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((o,s)=>s.resolve(o,t),n),n=n.resolve(t)}return n}resolveOptions(t){var n,r,o,s;return Object.assign({},t,{from:t.from||[],strict:(n=t.strict)!=null?n:this.spec.strict,abortEarly:(r=t.abortEarly)!=null?r:this.spec.abortEarly,recursive:(o=t.recursive)!=null?o:this.spec.recursive,disableStackTrace:(s=t.disableStackTrace)!=null?s:this.spec.disableStackTrace})}cast(t,n={}){let r=this.resolve(Object.assign({value:t},n)),o=n.assert==="ignore-optionality",s=r._cast(t,n);if(n.assert!==!1&&!r.isType(s)){if(o&&nl(s))return s;let i=ki(t),l=ki(s);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${i} 
`+(l!==i?`result of cast: ${l}`:""))}return s}_cast(t,n){let r=t===void 0?t:this.transforms.reduce((o,s)=>s.call(this,o,t,this),t);return r===void 0&&(r=this.getDefault(n)),r}_validate(t,n={},r,o){let{path:s,originalValue:i=t,strict:l=this.spec.strict}=n,a=t;l||(a=this._cast(a,Object.assign({assert:!1},n)));let c=[];for(let d of Object.values(this.internalTests))d&&c.push(d);this.runTests({path:s,value:a,originalValue:i,options:n,tests:c},r,d=>{if(d.length)return o(d,a);this.runTests({path:s,value:a,originalValue:i,options:n,tests:this.tests},r,o)})}runTests(t,n,r){let o=!1,{tests:s,value:i,originalValue:l,path:a,options:c}=t,d=x=>{o||(o=!0,n(x,i))},f=x=>{o||(o=!0,r(x,i))},p=s.length,b=[];if(!p)return f([]);let v={value:i,originalValue:l,path:a,options:c,schema:this};for(let x=0;x<s.length;x++){const C=s[x];C(v,d,function(y){y&&(Array.isArray(y)?b.push(...y):b.push(y)),--p<=0&&f(b)})}}asNestedTest({key:t,index:n,parent:r,parentPath:o,originalParent:s,options:i}){const l=t??n;if(l==null)throw TypeError("Must include `key` or `index` for nested validations");const a=typeof l=="number";let c=r[l];const d=Object.assign({},i,{strict:!0,parent:r,value:c,originalValue:s[l],key:void 0,[a?"index":"key"]:l,path:a||l.includes(".")?`${o||""}[${a?l:`"${l}"`}]`:(o?`${o}.`:"")+t});return(f,p,b)=>this.resolve(d)._validate(c,d,p,b)}validate(t,n){var r;let o=this.resolve(Object.assign({},n,{value:t})),s=(r=n==null?void 0:n.disableStackTrace)!=null?r:o.spec.disableStackTrace;return new Promise((i,l)=>o._validate(t,n,(a,c)=>{fr.isError(a)&&(a.value=c),l(a)},(a,c)=>{a.length?l(new fr(a,c,void 0,void 0,s)):i(c)}))}validateSync(t,n){var r;let o=this.resolve(Object.assign({},n,{value:t})),s,i=(r=n==null?void 0:n.disableStackTrace)!=null?r:o.spec.disableStackTrace;return o._validate(t,Object.assign({},n,{sync:!0}),(l,a)=>{throw fr.isError(l)&&(l.value=a),l},(l,a)=>{if(l.length)throw new fr(l,t,void 0,void 0,i);s=a}),s}isValid(t,n){return this.validate(t,n).then(()=>!0,r=>{if(fr.isError(r))return!1;throw r})}isValidSync(t,n){try{return this.validateSync(t,n),!0}catch(r){if(fr.isError(r))return!1;throw r}}_getDefault(t){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,t):Aa(n)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,n){const r=this.clone({nullable:t});return r.internalTests.nullable=Jl({message:n,name:"nullable",test(o){return o===null?this.schema.spec.nullable:!0}}),r}optionality(t,n){const r=this.clone({optional:t});return r.internalTests.optionality=Jl({message:n,name:"optionality",test(o){return o===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(t=Uo.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=Uo.notNull){return this.nullability(!1,t)}required(t=Uo.required){return this.clone().withMutation(n=>n.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let n=this.clone();return n.transforms.push(t),n}test(...t){let n;if(t.length===1?typeof t[0]=="function"?n={test:t[0]}:n=t[0]:t.length===2?n={name:t[0],test:t[1]}:n={name:t[0],message:t[1],test:t[2]},n.message===void 0&&(n.message=Uo.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),o=Jl(n),s=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(i=>!(i.OPTIONS.name===n.name&&(s||i.OPTIONS.test===o.OPTIONS.test))),r.tests.push(o),r}when(t,n){!Array.isArray(t)&&typeof t!="string"&&(n=t,t=".");let r=this.clone(),o=DR(t).map(s=>new $l(s));return o.forEach(s=>{s.isSibling&&r.deps.push(s.key)}),r.conditions.push(typeof n=="function"?new Sh(o,n):Sh.fromOptions(o,n)),r}typeError(t){let n=this.clone();return n.internalTests.typeError=Jl({message:t,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(t,n=Uo.oneOf){let r=this.clone();return t.forEach(o=>{r._whitelist.add(o),r._blacklist.delete(o)}),r.internalTests.whiteList=Jl({message:n,name:"oneOf",skipAbsent:!0,test(o){let s=this.schema._whitelist,i=s.resolveAll(this.resolve);return i.includes(o)?!0:this.createError({params:{values:Array.from(s).join(", "),resolved:i}})}}),r}notOneOf(t,n=Uo.notOneOf){let r=this.clone();return t.forEach(o=>{r._blacklist.add(o),r._whitelist.delete(o)}),r.internalTests.blacklist=Jl({message:n,name:"notOneOf",test(o){let s=this.schema._blacklist,i=s.resolveAll(this.resolve);return i.includes(o)?this.createError({params:{values:Array.from(s).join(", "),resolved:i}}):!0}}),r}strip(t=!0){let n=this.clone();return n.spec.strip=t,n}describe(t){const n=(t?this.resolve(t):this).clone(),{label:r,meta:o,optional:s,nullable:i}=n.spec;return{meta:o,label:r,optional:s,nullable:i,default:n.getDefault(t),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(a=>({name:a.OPTIONS.name,params:a.OPTIONS.params})).filter((a,c,d)=>d.findIndex(f=>f.name===a.name)===c)}}}fs.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])fs.prototype[`${e}At`]=function(t,n,r={}){const{parent:o,parentPath:s,schema:i}=Xse(this,t,n,r.context);return i[e](o&&o[s],Object.assign({},r,{parent:o,path:t}))};for(const e of["equals","is"])fs.prototype[e]=fs.prototype.oneOf;for(const e of["not","nope"])fs.prototype[e]=fs.prototype.notOneOf;const Jse=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Zse(e){const t=ub(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(n=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}function ub(e){var t,n;const r=Jse.exec(e);return r?{year:bs(r[1]),month:bs(r[2],1)-1,day:bs(r[3],1),hour:bs(r[4]),minute:bs(r[5]),second:bs(r[6]),millisecond:r[7]?bs(r[7].substring(0,3)):0,precision:(t=(n=r[7])==null?void 0:n.length)!=null?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:bs(r[10]),minuteOffset:bs(r[11])}:null}function bs(e,t=0){return Number(e)||t}let eie=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,tie=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,nie=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,rie="^\\d{4}-\\d{2}-\\d{2}",oie="\\d{2}:\\d{2}:\\d{2}",sie="(([+-]\\d{2}(:?\\d{2})?)|Z)",iie=new RegExp(`${rie}T${oie}(\\.\\d+)?${sie}$`),lie=e=>nl(e)||e===e.trim(),aie={}.toString();function yp(){return new LR}class LR extends fs{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,n,r)=>{if(!r.spec.coerce||r.isType(t)||Array.isArray(t))return t;const o=t!=null&&t.toString?t.toString():t;return o===aie?t:o})})}required(t){return super.required(t).withMutation(n=>n.test({message:t||Uo.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(n=>n.OPTIONS.name!=="required"),t))}length(t,n=ar.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(r){return r.length===this.resolve(t)}})}min(t,n=ar.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(r){return r.length>=this.resolve(t)}})}max(t,n=ar.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:t},skipAbsent:!0,test(r){return r.length<=this.resolve(t)}})}matches(t,n){let r=!1,o,s;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:o,name:s}=n:o=n),this.test({name:s||"matches",message:o||ar.matches,params:{regex:t},skipAbsent:!0,test:i=>i===""&&r||i.search(t)!==-1})}email(t=ar.email){return this.matches(eie,{name:"email",message:t,excludeEmptyString:!0})}url(t=ar.url){return this.matches(tie,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=ar.uuid){return this.matches(nie,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let n="",r,o;return t&&(typeof t=="object"?{message:n="",allowOffset:r=!1,precision:o=void 0}=t:n=t),this.matches(iie,{name:"datetime",message:n||ar.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||ar.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:s=>{if(!s||r)return!0;const i=ub(s);return i?!!i.z:!1}}).test({name:"datetime_precision",message:n||ar.datetime_precision,params:{precision:o},skipAbsent:!0,test:s=>{if(!s||o==null)return!0;const i=ub(s);return i?i.precision===o:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=ar.trim){return this.transform(n=>n!=null?n.trim():n).test({message:t,name:"trim",test:lie})}lowercase(t=ar.lowercase){return this.transform(n=>nl(n)?n:n.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>nl(n)||n===n.toLowerCase()})}uppercase(t=ar.uppercase){return this.transform(n=>nl(n)?n:n.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>nl(n)||n===n.toUpperCase()})}}yp.prototype=LR.prototype;let cie=new Date(""),uie=e=>Object.prototype.toString.call(e)==="[object Date]";class lg extends fs{constructor(){super({type:"date",check(t){return uie(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,n,r)=>!r.spec.coerce||r.isType(t)||t===null?t:(t=Zse(t),isNaN(t)?lg.INVALID_DATE:new Date(t)))})}prepareParam(t,n){let r;if($l.isRef(t))r=t;else{let o=this.cast(t);if(!this._typeCheck(o))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=o}return r}min(t,n=ab.min){let r=this.prepareParam(t,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(o){return o>=this.resolve(r)}})}max(t,n=ab.max){let r=this.prepareParam(t,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(o){return o<=this.resolve(r)}})}}lg.INVALID_DATE=cie;lg.prototype;function die(e,t=[]){let n=[],r=new Set,o=new Set(t.map(([i,l])=>`${i}-${l}`));function s(i,l){let a=hl.split(i)[0];r.add(a),o.has(`${l}-${a}`)||n.push([l,a])}for(const i of Object.keys(e)){let l=e[i];r.add(i),$l.isRef(l)&&l.isSibling?s(l.path,i):oC(l)&&"deps"in l&&l.deps.forEach(a=>s(a,i))}return Bse.array(Array.from(r),n).reverse()}function gA(e,t){let n=1/0;return e.some((r,o)=>{var s;if((s=t.path)!=null&&s.includes(r))return n=o,!0}),n}function NR(e){return(t,n)=>gA(e,t)-gA(e,n)}const fie=(e,t,n)=>{if(typeof e!="string")return e;let r=e;try{r=JSON.parse(e)}catch{}return n.isType(r)?r:e};function vp(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=vp(r);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=vp(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(vp)}):"optional"in e?e.optional():e}const pie=(e,t)=>{const n=[...hl.normalizePath(t)];if(n.length===1)return n[0]in e;let r=n.pop(),o=hl.getter(hl.join(n),!0)(e);return!!(o&&r in o)};let yA=e=>Object.prototype.toString.call(e)==="[object Object]";function hie(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(r=>n.indexOf(r)===-1)}const mie=NR([]);function db(e){return new BR(e)}class BR extends fs{constructor(t){super({type:"object",check(n){return yA(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=mie,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,n={}){var r;let o=super._cast(t,n);if(o===void 0)return this.getDefault(n);if(!this._typeCheck(o))return o;let s=this.fields,i=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,l=[].concat(this._nodes,Object.keys(o).filter(f=>!this._nodes.includes(f))),a={},c=Object.assign({},n,{parent:a,__validating:n.__validating||!1}),d=!1;for(const f of l){let p=s[f],b=f in o;if(p){let v,x=o[f];c.path=(n.path?`${n.path}.`:"")+f,p=p.resolve({value:x,context:n.context,parent:a});let C=p instanceof fs?p.spec:void 0,g=C==null?void 0:C.strict;if(C!=null&&C.strip){d=d||f in o;continue}v=!n.__validating||!g?p.cast(o[f],c):o[f],v!==void 0&&(a[f]=v)}else b&&!i&&(a[f]=o[f]);(b!==f in a||a[f]!==o[f])&&(d=!0)}return d?a:o}_validate(t,n={},r,o){let{from:s=[],originalValue:i=t,recursive:l=this.spec.recursive}=n;n.from=[{schema:this,value:i},...s],n.__validating=!0,n.originalValue=i,super._validate(t,n,r,(a,c)=>{if(!l||!yA(c)){o(a,c);return}i=i||c;let d=[];for(let f of this._nodes){let p=this.fields[f];!p||$l.isRef(p)||d.push(p.asNestedTest({options:n,key:f,parent:c,parentPath:n.path,originalParent:i}))}this.runTests({tests:d,value:c,originalValue:i,options:n},r,f=>{o(f.sort(this._sortErrors).concat(a),c)})})}clone(t){const n=super.clone(t);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(t){let n=super.concat(t),r=n.fields;for(let[o,s]of Object.entries(this.fields)){const i=r[o];r[o]=i===void 0?s:i}return n.withMutation(o=>o.setFields(r,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var o;const s=this.fields[r];let i=t;(o=i)!=null&&o.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[r]})),n[r]=s&&"getDefault"in s?s.getDefault(i):void 0}),n}setFields(t,n){let r=this.clone();return r.fields=t,r._nodes=die(t,n),r._sortErrors=NR(Object.keys(t)),n&&(r._excludedEdges=n),r}shape(t,n=[]){return this.clone().withMutation(r=>{let o=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),o=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,t),o)})}partial(){const t={};for(const[n,r]of Object.entries(this.fields))t[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(t)}deepPartial(){return vp(this)}pick(t){const n={};for(const r of t)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,o])=>t.includes(r)&&t.includes(o)))}omit(t){const n=[];for(const r of Object.keys(this.fields))t.includes(r)||n.push(r);return this.pick(n)}from(t,n,r){let o=hl.getter(t,!0);return this.transform(s=>{if(!s)return s;let i=s;return pie(s,t)&&(i=Object.assign({},s),r||delete i[t],i[n]=o(s)),i})}json(){return this.transform(fie)}noUnknown(t=!0,n=cb.noUnknown){typeof t!="boolean"&&(n=t,t=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(o){if(o==null)return!0;const s=hie(this.schema,o);return!t||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return r.spec.noUnknown=t,r}unknown(t=!0,n=cb.noUnknown){return this.noUnknown(!t,n)}transformKeys(t){return this.transform(n=>{if(!n)return n;const r={};for(const o of Object.keys(n))r[t(o)]=n[o];return r})}camelCase(){return this.transformKeys(Ay.camelCase)}snakeCase(){return this.transformKeys(Ay.snakeCase)}constantCase(){return this.transformKeys(t=>Ay.snakeCase(t).toUpperCase())}describe(t){const n=(t?this.resolve(t):this).clone(),r=super.describe(t);r.fields={};for(const[s,i]of Object.entries(n.fields)){var o;let l=t;(o=l)!=null&&o.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[s]})),r.fields[s]=i.describe(l)}return r}}db.prototype=BR.prototype;const gie=[{buildingEn:"PEI HO BUILDING",districtEn:"Sham Shui Po",streetEn:"117 FUK WA STNKIL 1153 RP",buildingTc:"深水?區",districtTc:"北河大廈",streetTc:"福華街117號第1153號新九龍內地段餘段"},{buildingEn:"PEI HO BUILDING2",districtEn:"Sham Shui Po2",streetEn:"117 FUK WA STNKIL 1153 RP2",buildingTc:"深水?區2",districtTc:"北河大廈2",streetTc:"福華街117號第1153號新九龍內地段餘段2"}];function Us(e){const{onClose:t,open:n,onChange:r}=e,{t:o,i18n:s}=wt(["addressDialog"]),{handleSubmit:i,control:l,formState:{errors:a},watch:c,setValue:d}=Lo({}),f=()=>{t&&t()},p=v=>{r&&r({address:v}),t&&t()},b=()=>{r&&r({inputManually:!0}),t&&t()};return u.jsx(_M,{onClose:f,open:n,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{height:"70%",border:`4px solid ${jt.navy}`}},children:u.jsxs(ue,{container:!0,direction:"column",flexWrap:"nowrap",sx:{p:4,height:"100%",overflow:"hidden"},children:[u.jsx(Ze,{variant:"h5",sx:{textAlign:"center",backgroundColor:"rgb(241 247 247)",p:1},children:o("addressSearch")}),u.jsx(yt,{sx:{borderColor:"text.secondary",borderWidth:2}}),u.jsxs(ue,{container:!0,direction:"row",gap:2,alignItems:"flex-end",mt:2,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"buildingName",control:l,render:({field:v,fieldState:{invalid:x,error:C}})=>u.jsx(Ce,{title:o("buildingName"),labelPlacement:"top",error:x,helperText:C==null?void 0:C.message,fullWidth:!0,children:u.jsx(Te,{...v})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"streetName",control:l,render:({field:v,fieldState:{invalid:x,error:C}})=>u.jsx(Ce,{title:o("streetName"),labelPlacement:"top",error:x,helperText:C==null?void 0:C.message,fullWidth:!0,children:u.jsx(Te,{...v})})})}),u.jsx(ue,{item:!0,xs:1,children:u.jsx(be,{name:"dd",control:l,render:({field:v,fieldState:{invalid:x,error:C}})=>u.jsx(Ce,{title:"DD",labelPlacement:"top",error:x,helperText:C==null?void 0:C.message,fullWidth:!0,children:u.jsx(Te,{...v})})})}),u.jsx(ue,{item:!0,xs:1,children:u.jsx(be,{name:"lot",control:l,render:({field:v,fieldState:{invalid:x,error:C}})=>u.jsx(Ce,{title:"Lot",labelPlacement:"top",error:x,helperText:C==null?void 0:C.message,fullWidth:!0,children:u.jsx(Te,{...v})})})}),u.jsx(ue,{item:!0,children:u.jsx(Et,{bgColor:"navy",sx:{padding:"8px 22px",minWidth:80},children:o("search")})})]}),u.jsx(Ze,{sx:{backgroundColor:jt.navy,color:"#fff",p:2,mt:2},children:o("selectBuildingAddress")}),u.jsx(dt,{sx:{border:`1px solid ${jt.navy}`,flex:1,overflow:"auto"},children:u.jsx(e0,{children:gie.map(v=>u.jsxs(u.Fragment,{children:[u.jsx(t0,{children:u.jsxs(vt,{display:"flex",flexDirection:"row",alignItems:"center",sx:{p:2,width:"100%"},children:[u.jsxs(vt,{flex:1,children:[u.jsx(Ze,{children:v.buildingEn}),u.jsx(Ze,{children:v.districtEn}),u.jsx(Ze,{children:v.streetEn}),u.jsx(Ze,{sx:{mt:2},children:v.buildingTc}),u.jsx(Ze,{children:v.districtTc}),u.jsx(Ze,{children:v.streetTc})]}),u.jsx(Et,{bgColor:"navy",sx:{minWidth:80,padding:"8px 22px",height:"fit-content"},onClick:()=>p(v),children:o("select")})]})},v.buildingEn),u.jsx(yt,{component:"li"})]}))})}),u.jsx(Ze,{variant:"link",sx:{textAlign:"center",mt:2},onClick:b,children:o("notFound")})]})})}function nf({control:e,isDesktop:t}){const{t:n,i18n:r}=wt(["form"]);return u.jsxs(u.Fragment,{children:[u.jsx(Ze,{variant:"title3",color:"text.secondary",sx:{mb:2,mt:3},children:n("uploadPersonInfo",{ns:"form"})}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"engName",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("fullNameEng",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"chiName",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("fullNameChi",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(Ce,{title:n("registerNo",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",fullWidth:!0,children:u.jsxs(ue,{container:!0,direction:"row",gap:2,children:[u.jsx(be,{name:"registerNoPrefix1",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>{var l;return u.jsxs(ue,{item:!0,children:[u.jsx(rn,{options:[{label:n("placeholder.pleaseSelect",{ns:"form"}),id:""},{label:"AP(A)",id:"APA"},{label:"AP(E)",id:"APE"},{label:"AP(S)",id:"APS"}],getOptionLabel:a=>a.label,...o,value:(l=o==null?void 0:o.value)!=null&&l.id?o==null?void 0:o.value:null,onChange:(a,c)=>o.onChange(c),sx:{minWidth:120},placeholder:n("placeholder.pleaseSelect",{ns:"form"}),disableClearable:!0}),s&&u.jsx(Mr,{error:!0,children:i==null?void 0:i.message})]})}}),u.jsx(be,{name:"registerNo1",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsxs(ue,{item:!0,xs:!0,children:[u.jsx(Te,{fullWidth:!0,...o,placeholder:n("placeholder.registerNo",{ns:"form"})}),s&&u.jsx(Mr,{error:!0,children:i==null?void 0:i.message})]})})]})})})]}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"email",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("email",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o,placeholder:n("placeholder.receiveSCS",{ns:"form"})})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"phone",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("phone",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o,placeholder:n("placeholder.receiveSCS",{ns:"form"})})})})}),u.jsx(ue,{item:!0,xs:!0})]}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(Ze,{variant:"title3",color:"text.secondary",sx:{mb:2,mt:3},children:n("structuralEngineerInformation",{ns:"form"})}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"engName",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("fullNameEng",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"chiName",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("fullNameChi",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(Ce,{title:n("registerNo",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",fullWidth:!0,children:u.jsxs(ue,{container:!0,direction:"row",gap:2,children:[u.jsx(be,{name:"registerNoPrefix2",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>{var l;return u.jsxs(ue,{item:!0,children:[u.jsx(rn,{options:[{label:n("placeholder.pleaseSelect",{ns:"form"}),id:""},{label:"RSE",id:"RSE"}],getOptionLabel:a=>a.label,...o,value:(l=o==null?void 0:o.value)!=null&&l.id?o==null?void 0:o.value:null,onChange:(a,c)=>o.onChange(c),sx:{minWidth:120},placeholder:n("placeholder.pleaseSelect",{ns:"form"}),disableClearable:!0}),s&&u.jsx(Mr,{error:!0,children:i==null?void 0:i.message})]})}}),u.jsx(be,{name:"registerNo2",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsxs(ue,{item:!0,xs:!0,children:[u.jsx(Te,{fullWidth:!0,...o,placeholder:n("placeholder.registerNo",{ns:"form"})}),s&&u.jsx(Mr,{error:!0,children:i==null?void 0:i.message})]})})]})})})]}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"email",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("email",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o,placeholder:n("placeholder.receiveSCS",{ns:"form"})})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"phone",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("phone",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o,placeholder:n("placeholder.receiveSCS",{ns:"form"})})})})}),u.jsx(ue,{item:!0,xs:!0})]}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(Ze,{variant:"title3",color:"text.secondary",sx:{mb:2,mt:3},children:n("engineerInformation",{ns:"form"})}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"engName",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("fullNameEng",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"chiName",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("fullNameChi",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(Ce,{title:n("registerNo",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",fullWidth:!0,children:u.jsxs(ue,{container:!0,direction:"row",gap:2,children:[u.jsx(be,{name:"registerNoPrefix3",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>{var l;return u.jsxs(ue,{item:!0,children:[u.jsx(rn,{options:[{label:n("placeholder.pleaseSelect",{ns:"form"}),id:""},{label:"AP(A)",id:"APA"},{label:"AP(E)",id:"APE"},{label:"AP(S)",id:"APS"},{label:"RSE",id:"RSE"}],getOptionLabel:a=>a.label,...o,value:(l=o==null?void 0:o.value)!=null&&l.id?o==null?void 0:o.value:null,onChange:(a,c)=>o.onChange(c),sx:{minWidth:120},placeholder:n("placeholder.pleaseSelect",{ns:"form"}),disableClearable:!0}),s&&u.jsx(Mr,{error:!0,children:i==null?void 0:i.message})]})}}),u.jsx(be,{name:"registerNo3",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsxs(ue,{item:!0,xs:!0,children:[u.jsx(Te,{fullWidth:!0,...o,placeholder:n("placeholder.registerNo",{ns:"form"})}),s&&u.jsx(Mr,{error:!0,children:i==null?void 0:i.message})]})})]})})})]}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"email",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("email",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o,placeholder:n("placeholder.receiveSCS",{ns:"form"})})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"phone",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("phone",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o,placeholder:n("placeholder.receiveSCS",{ns:"form"})})})})}),u.jsx(ue,{item:!0,xs:!0})]})]})}function Dc({control:e,isDesktop:t}){const{t:n,i18n:r}=wt(["form"]);return u.jsx(u.Fragment,{children:u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"applicantFullName",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("applicantFullName"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o,type:"email"})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"applicantEmail",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("applicantEmail"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o,type:"email"})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"applicantPhone",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("applicantPhone"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o,type:"tel"})})})})]})})}function HR({control:e,isDesktop:t}){const{t:n,i18n:r}=wt(["form"]);return u.jsxs(u.Fragment,{children:[u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"contactName",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("contactName2"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"contactEmail",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("contactEmail"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o,placeholder:n("placeholder.receiveSCS")})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"contactMobilePhone",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("contactMobilePhone"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o,placeholder:n("placeholder.receiveSCS")})})})})]}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"contactPhone",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("contactPhone2"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"contactFax",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("contactFax"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"date",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("date"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(nr,{...o})})})})]})]})}function Fc({control:e,isDesktop:t,openDialog:n}){const{t:r,i18n:o}=wt(["form"]),s=hc({control:e,name:"isEngAddressReadOnly"}),i=hc({control:e,name:"isChiAddressReadOnly"});return u.jsxs(u.Fragment,{children:[u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"addressEn",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("addressEng"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(bh,{placeholder:r("placeholder.eng"),onClick:n,readOnly:s,...l})})})}),u.jsx(ue,{item:!0,xs:1.5,children:u.jsx(be,{name:"floor",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("floor"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l,placeholder:r("placeholder.floor")})})})}),u.jsx(ue,{item:!0,xs:1.5,children:u.jsx(be,{name:"unit",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("unit"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l,placeholder:r("placeholder.unit")})})})})]}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"addressTc",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("addressChi"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(bh,{placeholder:r("placeholder.chinese"),onClick:n,readOnly:i,...l})})})}),u.jsx(ue,{item:!0,xs:1.5,children:u.jsx(be,{name:"floorTc",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("floor"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l,placeholder:r("placeholder.floor")})})})}),u.jsx(ue,{item:!0,xs:1.5,children:u.jsx(be,{name:"unitTc",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("unit"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l,placeholder:r("placeholder.unit")})})})})]})]})}function zR({control:e,isDesktop:t}){const{t:n,i18n:r}=wt(["form"]),o=hc({control:e,name:"schoolCategory"});return u.jsxs(u.Fragment,{children:[u.jsx(ue,{container:!0,direction:"row",gap:3,mb:4,children:u.jsxs(Ce,{title:n("schoolName"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",fullWidth:!0,required:!0,children:[u.jsx(be,{name:"schoolNameEn",control:e,render:({field:s,fieldState:{invalid:i,error:l}})=>u.jsxs(u.Fragment,{children:[u.jsx(Te,{...s,sx:{mb:1},placeholder:n("placeholder.eng")}),i&&u.jsx(Mr,{error:!0,children:l==null?void 0:l.message})]})}),u.jsx(be,{name:"schoolNameTc",control:e,render:({field:s,fieldState:{invalid:i,error:l}})=>u.jsxs(u.Fragment,{children:[u.jsx(Te,{...s,placeholder:n("placeholder.chinese")}),i&&u.jsx(Mr,{error:!0,children:l==null?void 0:l.message})]})})]})}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"schoolCategory",control:e,render:({field:s,fieldState:{invalid:i,error:l}})=>{var a;return u.jsx(Ce,{title:n("schoolCategory"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",fullWidth:!0,error:i,helperText:l==null?void 0:l.message,required:!0,children:u.jsx(rn,{options:[{label:n("placeholder.pleaseSelect"),id:""},{label:n("schoolOptions.kinderg"),id:"kinderg"},{label:n("schoolOptions.primary"),id:"primary"},{label:n("schoolOptions.secondary"),id:"secondary"},{label:n("schoolOptions.tutorial_sch"),id:"tutorial_sch"},{label:n("schoolOptions.other_sch"),id:"other_sch"}],getOptionLabel:c=>c.label,...s,value:(a=s==null?void 0:s.value)!=null&&a.id?s==null?void 0:s.value:null,onChange:(c,d)=>s.onChange(d),disableClearable:!0})})}})}),(o==null?void 0:o.id)==="other_sch"?u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"remarks",control:e,render:({field:s,fieldState:{invalid:i,error:l}})=>u.jsxs(Ce,{title:n("pleaseRemarks"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:i,helperText:l==null?void 0:l.message,fullWidth:!0,required:!0,children:[u.jsx(Te,{...s}),u.jsx(Mr,{error:!0,children:n("warning.required")})]})})}):t?u.jsx(ue,{item:!0,xs:!0}):null]}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"studentAge",control:e,render:({field:s,fieldState:{invalid:i,error:l}})=>{var a;return u.jsx(Ce,{title:n("studentAge"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",fullWidth:!0,error:i,helperText:l==null?void 0:l.message,required:!0,children:u.jsx(rn,{options:[{label:n("placeholder.pleaseSelect"),id:""},{label:n("studentAgeOptions.3above"),id:"3歲或以上"},{label:n("studentAgeOptions.6above"),id:"6歲或以上"}],getOptionLabel:c=>c.label,...s,value:(a=s==null?void 0:s.value)!=null&&a.id?s==null?void 0:s.value:null,onChange:(c,d)=>s.onChange(d),disableClearable:!0})})}})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"estimateTheNumberOfStudents",control:e,render:({field:s,fieldState:{invalid:i,error:l}})=>u.jsx(Ce,{title:n("estimateTheNumberOfStudents"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:i,helperText:l==null?void 0:l.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...s})})})})]})]})}const yie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAnCAYAAACMo1E1AAAABHNCSVQICAgIfAhkiAAAASBJREFUWEftmOENgjAQhe0EuoGM4Aa6gTqBOoG6gRuoG+AE4ga6gRsIG+gE9R3hB/ZHA68Rm3gkDRB6dy8fcDxqeoGbtXaNFBuMpJYqx/HBGHMMSW9CgiFshvizJ8ccAjO2Rqi4FIUXnuIniFv+StwVhcee4jeIm6g4lwCeOSVHPRZKjsKGICWn5AgCoZ+vP+9zlbuYOranyY0YYdLAM/GJa/cmiRy7dRE3YyBMvNi+ZYIupm9F3IMg1oW4XMTZLioxNVQcQ01ihFyO/ZBN8MW4Iua3dVV+Iao+J39SSUsS0uf6npgX2eeyss+1FPMxXS0TS0/JKTmCgL6tBLQyRMkpOZdA7E04heBoVzbjXROu7Jb8vcmoG9YC5zvYHiFLb28DQsafknC5egAAAABJRU5ErkJggg==",vie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAsCAYAAADRqm7CAAAABHNCSVQICAgIfAhkiAAAAoBJREFUaEPtmo1ZwjAQhukGbGDdADaoG+gEwgTCBOIE4gZlAmUCYQJhAmECcYL6fbWtSS39gRDi2TxPnvLTXnNv7y6XS71O0qIo8vHxHv0avZv+buA49DwvNCDnpCI8SgeEAIdnwwDUgTsPw0ss4e2EEFIgTsMgCJrt7Unt7ke4szAI4sOCNTjvJgQRWbIGp2GcCwShOOUm5wRBGAuD1khZS0zVB8k8NwiDHDJRBHEDILsmwiWCoP4rgOi3IL4JjAFjWheGVItobBWSQXRgEfESok5rQSSUWhAtCN1hWotoLcKcRayTFJkZ3EFpbZ1ofsw5TdLtpq7xiYGF6FPcZHPMIF27tgkIWsAAAFauKWFiPHVBzBMIjRYyJgZoS0YdELSEIL+aQz2H5T1WvHvovq0BG74PH+wL+rgKBGMCIWTukBR7WfEmACltVgXiARAmqbYWK962Ae/KQGz51FWXAAiW/SVZQgp8WwaCVR76T9wAYYTDo+1HZel+w30gWPsLFAjcAnxHN7kVaEnHytusoWtvH4h+LkCy0nNXKfJvnnDFDLQIxBP+oBukLsGYwNggsc2g64CK5UFwuvRzAfIVv2VuIogGdeVksCkCoRU8ESCZMDFnkNi01EC1iDho5AIkXcIXSGELXTW9VBBx0FBATPCZL45IbFpqoLrGHBDoBnETnEFSPS01SHWmRXDhkQWNBATjQgZGmElcFtVSCGKSW08EUJwzhcSmpQaqggTR/SfriV+pgQZC/SJ+PVHydl+2JUbLABTR64kyX1dBSF5damunIiAqCKl5Q63XA1QQ0mYLBscRJoKwzvSnbZsjTgxwES3jos7Fjp6zxLgW6GGTvZcvdwo3DK1mNOIAAAAASUVORK5CYII=",bie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAATRJREFUWEfVlz0SgjAQhbO2NhxBb2AnnXIHvIyFgoWtR/AAeAe1g1t4hDTW6/A7wGB2E81kQgdZkm/fvmQ2IEZPEGbb8Tedd5nvHjrx0A8OwiwRCEedCSZjASMuyBBgfbtXEwKmRhA4uwqBi2YOFsQkgCziyAQgqBMIhBArLoQNgFpBhFZNpRJWAEoFKzMzIKwBlCXgQFgF4ECwAPaHd4IIm74xAfB5Ps2TwTb+touwNCVcpoxpA4A6yF6yiJctOAtAZ0sqT1KsVJD9bf53ABVsc04I/wCmTEiVRWVSbQWcA1DZcsf99QA3QyrOWAHnHnAOQEnLHTcuAXcBKs5fAOcecA5A1ZY77q8HuBlScf4oYHw1oyRo7p1UP0A1ldQy6nHAVOa7rpse9IRdH//bEsq/x7fmD7NYWjD5mD4XAAAAAElFTkSuQmCC";function xie({control:e,setValue:t={setValue:t}}){const{t:n,i18n:r}=wt(["form"]),[o,s]=_e.useState(!1),{fields:i,append:l,remove:a}=PZ({control:e,name:"docs"});return u.jsxs(u.Fragment,{children:[u.jsx(hs,{children:c=>u.jsxs(dt,{direction:"column",my:4,children:[u.jsx(Dc,{control:e,isDesktop:c}),u.jsx(ue,{container:!0,mb:4,children:u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"address",control:e,render:({field:d,fieldState:{invalid:f,error:p}})=>u.jsx(Ce,{title:n("address"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:f,helperText:p==null?void 0:p.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...d})})})})}),u.jsx(ue,{container:!0,mb:4,children:u.jsx(ue,{item:!0,xs:!0,children:u.jsx(As,{sx:{color:"text.secondary",fontWeight:500},control:u.jsx(yh,{}),label:n("placeholder.receiveSCS")})})}),u.jsx(HR,{control:e,isDesktop:c}),u.jsx(Ze,{variant:"title3",color:"text.secondary",sx:{mb:2,mt:3},children:n("locationSubmitInfo")}),u.jsx(Fc,{control:e,isDesktop:c}),u.jsx(zR,{control:e,isDesktop:c}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(nf,{control:e,isDesktop:c}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(ue,{container:!0,direction:"row",gap:3,mb:4,mt:2,children:u.jsxs(ue,{item:!0,xs:!0,children:[u.jsx(Ce,{title:n("uploadPlansAndDocuments"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",fullWidth:!0,children:u.jsx(dt,{spacing:2,children:i.map((d,f)=>u.jsx(u.Fragment,{children:u.jsxs(dt,{direction:"row",gap:2,alignItems:"center",children:[u.jsx(be,{name:`docs.${f}.docType`,control:e,render:({field:p,fieldState:{invalid:b,error:v}})=>{var x;return u.jsx(rn,{options:[{label:n("placeholder.selectDocType"),id:""},{label:"Layout Plan (requires applicant e-signature)",id:"layout-plan"},{label:"Photo Record",id:"photo"},{label:"Other",id:"other"}],getOptionLabel:C=>C.label,...p,value:(x=p==null?void 0:p.value)!=null&&x.id?p==null?void 0:p.value:null,onChange:(C,g)=>p.onChange(g),sx:{minWidth:300,width:300},placeholder:n("placeholder.selectDocType"),disableClearable:!0})}}),u.jsx(be,{name:`docs.${f}.doc`,control:e,render:({field:p,fieldState:{invalid:b,error:v}})=>{var x;return u.jsxs(u.Fragment,{children:[u.jsx(vse,{renderComponent:({isLoading:C,selectFile:g})=>u.jsx(IP,{loading:C,onClick:g,icon:vie,size:42}),accept:"image/*",onChange:C=>{p.onChange(C)}}),(p==null?void 0:p.value)&&u.jsxs(u.Fragment,{children:[u.jsx("img",{src:bie,width:32,height:32}),u.jsx(Ze,{color:"text.secondary",sx:{"text-decoration":"underline",overflow:"hidden","text-overflow":"ellipsis",whiteSpace:"nowrap"},children:(x=p==null?void 0:p.value)==null?void 0:x.name})]})]})}}),u.jsx(vt,{flex:1}),i.length>1&&u.jsx(Ze,{variant:"warning",onClick:()=>a(f),sx:{cursor:"pointer"},children:n("button.remove",{ns:"common"})})]})}))})}),u.jsx(IP,{onClick:()=>l({docType:null,doc:null}),icon:yie,size:42,sx:{mt:2}})]})})]})}),u.jsx(Us,{open:o,onClose:()=>s(!1),onChange:({address:c,inputManually:d})=>{if(c){const f=`${c.buildingEn}, ${c.districtEn}, ${c.streetEn}`,p=`${c.buildingTc}, ${c.districtTc}, ${c.streetTc}`;t("addressEn",f),t("addressTc",p),t("isEngAddressReadOnly",!0),t("isChiAddressReadOnly",!0)}d&&(t("isEngAddressReadOnly",!1),t("isChiAddressReadOnly",!1),t("addressEn",""),t("addressTc",""))}})]})}function Cie(){const{t:e,i18n:t}=wt(["form"]),{handleSubmit:n,control:r,formState:{errors:o},watch:s,setValue:i}=Lo({defaultValues:{docs:[{docType:"",doc:""}],isEngAddressReadOnly:!0,isChiAddressReadOnly:!0}});return u.jsxs(dt,{direction:"column",p:5,overflow:"auto",sx:{backgroundColor:jt.bgColor},children:[u.jsx(Ze,{variant:"title2",color:"text.secondary",sx:{textAlign:"center",mb:2},children:e("a2FormHeader")}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(xie,{control:r,setValue:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(Et,{sx:{alignSelf:"end",mt:2,height:40,width:160},children:e("button.submit")})]})}function _R({control:e,isDesktop:t}){const{t:n,i18n:r}=wt(["form"]);return u.jsxs(u.Fragment,{children:[u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"agencyNameEng",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("agencyNameEng"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"agencyNameChi",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("agencyNameChi"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"agencyAddressEng",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("agencyAddressEng"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"agencyAddressChi",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("agencyAddressChi"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:6,mb:4,children:u.jsx(be,{name:"agencyPhone",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("agencyPhone"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o,type:"tel"})})})})]})}function VR({control:e,isDesktop:t}){const{t:n,i18n:r}=wt(["form"]);return u.jsxs(u.Fragment,{children:[u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"title",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>{var l;return u.jsx(Ce,{title:n("title"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(rn,{options:[{label:n("placeholder.pleaseSelect"),id:""},{label:n("titleOptions.mr"),id:"mr"},{label:n("titleOptions.mrs"),id:"mrs"},{label:n("titleOptions.miss"),id:"miss"},{label:n("titleOptions.ms"),id:"ms"}],getOptionLabel:a=>a.label,...o,value:(l=o==null?void 0:o.value)!=null&&l.id?o==null?void 0:o.value:null,onChange:(a,c)=>o.onChange(c),disableClearable:!0})})}})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"applicantFullNameEng",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("applicantFullNameEng"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"applicantFullNameChi",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("applicantFullNameChi"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o})})})})]}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"applicantAgencyEmail",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("applicantAgencyEmail"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"applicantAgencyPhone",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("applicantAgencyPhone"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o,placeholder:n("placeholder.receiveSCS")})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"applicantIdCardNo",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("applicantIdCardNo"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o,placeholder:n("placeholder.receiveSCS")})})})})]}),u.jsx(ue,{item:!0,xs:6,mb:4,children:u.jsx(be,{name:"date",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("date"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(nr,{...o})})})})]})}function sC({control:e,isDesktop:t}){const{t:n,i18n:r}=wt(["form"]);return u.jsxs(u.Fragment,{children:[u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"contactTitle",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>{var l;return u.jsx(Ce,{title:n("title"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(rn,{options:[{label:n("placeholder.pleaseSelect"),id:""},{label:n("titleOptions.mr"),id:"mr"},{label:n("titleOptions.mrs"),id:"mrs"},{label:n("titleOptions.miss"),id:"miss"},{label:n("titleOptions.ms"),id:"ms"}],getOptionLabel:a=>a.label,...o,value:(l=o==null?void 0:o.value)!=null&&l.id?o==null?void 0:o.value:null,onChange:(a,c)=>o.onChange(c),disableClearable:!0})})}})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"contactName",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("contactName"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"contactFax",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("contactFax"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,children:u.jsx(Te,{...o,type:"tel"})})})})]}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"contactEmail",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("contactEmail"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o,type:"email"})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"contactPhone",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("contactPhone"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o,type:"tel"})})})}),t&&u.jsx(ue,{item:!0,xs:!0})]}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"contactAddressEng",control:e,render:({field:o,fieldState:{invalid:s,error:i}})=>u.jsx(Ce,{title:n("contactAddressEng"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:s,helperText:i==null?void 0:i.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...o})})})})]})}function iC({control:e,isDesktop:t,openDialog:n}){const{t:r,i18n:o}=wt(["form"]),s=hc({control:e,name:"isEngAddressReadOnly"}),i=hc({control:e,name:"isChiAddressReadOnly"});return u.jsxs(u.Fragment,{children:[u.jsx(Ze,{variant:"title3",color:"text.secondary",sx:{mb:2,mt:3},children:r("proposedCenterInformation")}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"addressEng",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("addressEng"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(bh,{onClick:n,readOnly:s,...l})})})}),u.jsx(ue,{item:!0,xs:1.5,children:u.jsx(be,{name:"floor",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("floor"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l,placeholder:r("placeholder.floor")})})})}),u.jsx(ue,{item:!0,xs:1.5,children:u.jsx(be,{name:"unit",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("unit"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l,placeholder:r("placeholder.unit")})})})})]}),u.jsxs(st,{container:!0,isDesktop:t,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"addressChi",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("addressChi"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(bh,{onClick:n,readOnly:i,...l})})})}),u.jsx(ue,{item:!0,xs:1.5,children:u.jsx(be,{name:"floor",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("floor"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l,placeholder:r("placeholder.floor")})})})}),u.jsx(ue,{item:!0,xs:1.5,children:u.jsx(be,{name:"unit",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("unit"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l,placeholder:r("placeholder.unit")})})})})]}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"proposedCenterName",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsxs(Ce,{title:r("proposedCenterName"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:[u.jsx(Te,{...l,sx:{mb:1}}),u.jsx(Te,{...l})]})})}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"proposedCenterPhone",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:r("proposedCenterPhone"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l,type:"tel"})})})})]})}function wie({control:e,setValue:t}){wt(["form"]);const[n,r]=_e.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(hs,{children:o=>u.jsxs(dt,{direction:"column",my:4,children:[u.jsx(VR,{control:e,isDesktop:o}),u.jsx(_R,{control:e,isDesktop:o}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(iC,{control:e,isDesktop:o,openDialog:()=>r(!0)}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(sC,{control:e,isDesktop:o}),u.jsx(nf,{control:e,isDesktop:o})]})}),u.jsx(Us,{open:n,onClose:()=>r(!1),onChange:({address:o,inputManually:s})=>{if(o){const i=`${o.buildingEn}, ${o.districtEn}, ${o.streetEn}`,l=`${o.buildingTc}, ${o.districtTc}, ${o.streetTc}`;t("addressEn",i),t("addressTc",l),t("isEngAddressReadOnly",!0),t("isChiAddressReadOnly",!0)}s&&(t("isEngAddressReadOnly",!1),t("isChiAddressReadOnly",!1),t("addressEn",""),t("addressTc",""))}})]})}function Sie(){const{t:e,i18n:t}=wt(["form"]);_e.useState(!1);const{handleSubmit:n,control:r,formState:{errors:o},watch:s,setValue:i}=Lo({defaultValues:{isEngAddressReadOnly:!0,isChiAddressReadOnly:!0}});return u.jsxs(vt,{p:4,bgcolor:jt.bgColor,height:"100%",display:"flex",flexDirection:"column",overflow:"auto",children:[u.jsx(Ze,{variant:"title2",color:"navy",align:"center",mb:2,children:e("jokc02formHeader")}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(wie,{control:r,setValue:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(Et,{sx:{alignSelf:"end",mt:2,height:40,width:160},children:e("button.submit",{ns:"common"})})]})}function Pie({control:e,setValue:t}){const{t:n,i18n:r}=wt(["cccaimh3","form"]),[o,s]=_e.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(hs,{children:i=>u.jsxs(dt,{direction:"column",my:4,children:[u.jsxs(st,{container:!0,isDesktop:i,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"title",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>{var d;return u.jsx(Ce,{title:n("title",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(rn,{options:[{label:n("placeholder.pleaseSelect",{ns:"form"}),id:""},{label:n("titleOptions.mr",{ns:"form"}),id:"mr"},{label:n("titleOptions.mrs",{ns:"form"}),id:"mrs"},{label:n("titleOptions.miss",{ns:"form"}),id:"miss"},{label:n("titleOptions.ms",{ns:"form"}),id:"ms"}],getOptionLabel:f=>f.label,...l,value:(d=l==null?void 0:l.value)!=null&&d.id?l==null?void 0:l.value:null,onChange:(f,p)=>l.onChange(p),disableClearable:!0})})}})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"representativeFullNameEng",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("representativeFullNameEng"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"representativeFullNameChi",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("representativeFullNameChi"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l})})})})]}),u.jsxs(st,{container:!0,isDesktop:i,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"representativeEmail",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("representativeEmail"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l,type:"email"})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"representativePhone",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("representativePhone"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l,type:"tel"})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"representativeIdNo",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("representativeIdNo"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l})})})})]}),u.jsxs(st,{container:!0,isDesktop:i,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"representativePosition",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("representativePosition"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"date",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("date",{ns:"form"}),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(nr,{...l})})})}),i&&u.jsx(ue,{item:!0,xs:!0})]}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"organiserNameEng",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("organiserNameEng"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l})})})}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"organiserNameChi",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("organiserNameChi"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l})})})}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"organiserAddressEng",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("organiserAddressEng"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l})})})}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"organiserAddressChi",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("organiserAddressChi"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l})})})}),u.jsx(ue,{item:!0,xs:6,mb:4,children:u.jsx(be,{name:"organiserPhone",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("organiserPhone"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(Te,{...l,type:"tel"})})})}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(iC,{control:e,isDesktop:i,openDialog:()=>s(!0)}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(sC,{control:e,isDesktop:i}),u.jsx(nf,{control:e,isDesktop:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsxs(dt,{direction:"row",gap:2,mt:2,justifyContent:"flex-end",children:[u.jsx(Et,{sx:{height:40,width:160},children:n("button.save",{ns:"form"})}),u.jsx(Et,{sx:{height:40,width:160},children:n("button.next",{ns:"form"})})]})]})}),u.jsx(Us,{open:o,onClose:()=>s(!1),onChange:({address:i,inputManually:l})=>{if(i){const a=`${i.buildingEn}, ${i.districtEn}, ${i.streetEn}`,c=`${i.buildingTc}, ${i.districtTc}, ${i.streetTc}`;t("addressEn",a),t("addressTc",c),t("isEngAddressReadOnly",!0),t("isChiAddressReadOnly",!0)}l&&(t("isEngAddressReadOnly",!1),t("isChiAddressReadOnly",!1),t("addressEn",""),t("addressTc",""))}})]})}function Aie(){const{t:e,i18n:t}=wt(["cccaimh3","form"]),{handleSubmit:n,control:r,formState:{errors:o},watch:s,setValue:i}=Lo({defaultValues:{isEngAddressReadOnly:!0,isChiAddressReadOnly:!0}});return u.jsxs(vt,{p:4,bgcolor:jt.bgColor,height:"100%",display:"flex",flexDirection:"column",overflow:"auto",children:[u.jsx(Ze,{variant:"title2",color:"navy",align:"center",mb:2,children:e("formHeader")}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(Pie,{control:r,setValue:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsxs(dt,{direction:"row",gap:2,mt:2,justifyContent:"flex-end",children:[u.jsx(Et,{sx:{height:40,width:160},children:e("button.save",{ns:"form"})}),u.jsx(Et,{sx:{height:40,width:160},children:e("button.next",{ns:"form"})})]})]})}function Eie({control:e,setValue:t}){wt(["form"]);const[n,r]=_e.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(hs,{children:o=>u.jsxs(dt,{direction:"column",my:4,children:[u.jsx(VR,{control:e,isDesktop:o}),u.jsx(_R,{control:e,isDesktop:o}),u.jsx(yt,{}),u.jsx(iC,{control:e,isDesktop:o,openDialog:()=>r(!0)}),u.jsx(yt,{}),u.jsx(sC,{control:e,isDesktop:o}),u.jsx(nf,{control:e,isDesktop:o})]})}),u.jsx(Us,{open:n,onClose:()=>r(!1),onChange:({address:o,inputManually:s})=>{if(o){const i=`${o.buildingEn}, ${o.districtEn}, ${o.streetEn}`,l=`${o.buildingTc}, ${o.districtTc}, ${o.streetTc}`;t("addressEn",i),t("addressTc",l),t("isEngAddressReadOnly",!0),t("isChiAddressReadOnly",!0)}s&&(t("isEngAddressReadOnly",!1),t("isChiAddressReadOnly",!1),t("addressEn",""),t("addressTc",""))}})]})}function kie(){const{t:e,i18n:t}=wt(["form"]),{handleSubmit:n,control:r,formState:{errors:o},watch:s,setValue:i}=Lo({defaultValues:{isEngAddressReadOnly:!0,isChiAddressReadOnly:!0}});return u.jsxs(vt,{p:4,bgcolor:jt.bgColor,height:"100%",display:"flex",flexDirection:"column",overflow:"auto",children:[u.jsx(Ze,{variant:"title2",color:"navy",align:"center",mb:2,children:e("cccaic2formHeader")}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(Eie,{control:r,setValue:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsxs(dt,{direction:"row",gap:2,mt:2,justifyContent:"flex-end",children:[u.jsx(Et,{sx:{height:40,width:160},children:e("button.save",{ns:"form"})}),u.jsx(Et,{sx:{height:40,width:160},children:e("button.next",{ns:"form"})})]})]})}function Iie({control:e,setValue:t}){const{t:n,i18n:r}=wt(["form"]),[o,s]=_e.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(hs,{children:i=>u.jsxs(dt,{direction:"column",my:4,children:[u.jsxs(st,{container:!0,isDesktop:i,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:i?8:!0,children:u.jsx(be,{name:"amendmentOfLayoutPlanAsAdvisedBy",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("amendmentOfLayoutPlanAsAdvisedBy"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"date",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("date"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(nr,{...l})})})})]}),u.jsx(Dc,{control:e,isDesktop:i}),u.jsx(Ze,{variant:"title3",color:"text.secondary",sx:{mb:2,mt:3},children:n("locationSubmitInfo")}),u.jsx(Fc,{control:e,isDesktop:i}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"proposedNameOfSchool",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsxs(Ce,{title:n("proposedNameOfSchool"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:[u.jsx(Te,{...l,sx:{mb:1}}),u.jsx(Te,{...l})]})})}),u.jsxs(st,{container:!0,isDesktop:i,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"refToTheDateOfLetter",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("refToTheDateOfLetter"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(nr,{...l})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"refOfBuildingsDepartmentLeter",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("refOfBuildingsDepartmentLeter"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(nr,{...l})})})})]})]})}),u.jsx(Us,{open:o,onClose:()=>s(!1),onChange:({address:i,inputManually:l})=>{if(i){const a=`${i.buildingEn}, ${i.districtEn}, ${i.streetEn}`,c=`${i.buildingTc}, ${i.districtTc}, ${i.streetTc}`;t("addressEn",a),t("addressTc",c),t("isEngAddressReadOnly",!0),t("isChiAddressReadOnly",!0)}l&&(t("isEngAddressReadOnly",!1),t("isChiAddressReadOnly",!1),t("addressEn",""),t("addressTc",""))}})]})}function Mie(){const{t:e,i18n:t}=wt(["form"]),{handleSubmit:n,control:r,formState:{errors:o},watch:s,setValue:i}=Lo({defaultValues:{isEngAddressReadOnly:!0,isChiAddressReadOnly:!0}});return u.jsxs(vt,{p:4,bgcolor:jt.bgColor,height:"100%",display:"flex",flexDirection:"column",overflow:"auto",children:[u.jsx(Ze,{variant:"title2",color:"navy",align:"center",mb:2,children:e("f2FormHeader")}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(Iie,{control:r,setValue:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsxs(dt,{direction:"row",gap:2,mt:2,justifyContent:"flex-end",children:[u.jsx(Et,{sx:{height:40,width:160},children:e("button.save")}),u.jsx(Et,{sx:{height:40,width:160},children:e("button.next")})]})]})}function Tie({control:e,setValue:t}){const{t:n,i18n:r}=wt(["form"]),[o,s]=_e.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(hs,{children:i=>u.jsxs(dt,{direction:"column",my:4,children:[u.jsxs(st,{container:!0,isDesktop:i,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:i?8:!0,children:u.jsx(be,{name:"amendmentOfLayoutPlanAsAdvisedBy",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("amendmentOfLayoutPlanAsAdvisedBy"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"date",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("date"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(nr,{...l})})})})]}),u.jsx(Dc,{control:e,isDesktop:i}),u.jsx(Ze,{variant:"title3",color:"text.secondary",sx:{mb:2,mt:3},children:n("locationSubmitInfo")}),u.jsx(Fc,{control:e,isDesktop:i}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"proposedNameOfSchool",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsxs(Ce,{title:n("proposedNameOfSchool"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:[u.jsx(Te,{...l,sx:{mb:1}}),u.jsx(Te,{...l})]})})}),u.jsx(ue,{item:!0,xs:i?6:!0,mb:3,children:u.jsx(be,{name:"refOfBuildingsDepartmentLeter",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("refOfBuildingsDepartmentLeter"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(nr,{...l})})})})]})}),u.jsx(Us,{open:o,onClose:()=>s(!1),onChange:({address:i,inputManually:l})=>{if(i){const a=`${i.buildingEn}, ${i.districtEn}, ${i.streetEn}`,c=`${i.buildingTc}, ${i.districtTc}, ${i.streetTc}`;t("addressEn",a),t("addressTc",c),t("isEngAddressReadOnly",!0),t("isChiAddressReadOnly",!0)}l&&(t("isEngAddressReadOnly",!1),t("isChiAddressReadOnly",!1),t("addressEn",""),t("addressTc",""))}})]})}function Oie(){const{t:e,i18n:t}=wt(["form"]),{handleSubmit:n,control:r,formState:{errors:o},watch:s,setValue:i}=Lo({defaultValues:{isEngAddressReadOnly:!0,isChiAddressReadOnly:!0}});return u.jsxs(vt,{p:4,bgcolor:jt.bgColor,height:"100%",display:"flex",flexDirection:"column",overflow:"auto",children:[u.jsx(Ze,{variant:"title2",color:"navy",align:"center",mb:2,children:e("g2FormHeader")}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(Tie,{control:r,setValue:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsxs(dt,{direction:"row",gap:2,mt:2,justifyContent:"flex-end",children:[u.jsx(Et,{sx:{height:40,width:160},children:e("button.save")}),u.jsx(Et,{sx:{height:40,width:160},children:e("button.next")})]})]})}function Rie({control:e,setValue:t}){const{t:n,i18n:r}=wt(["form"]),[o,s]=_e.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(hs,{children:i=>u.jsxs(dt,{direction:"column",my:4,children:[u.jsx(Dc,{control:e,isDesktop:i}),u.jsx(ue,{container:!0,mb:4,children:u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"address",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("address"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l})})})})}),u.jsx(ue,{container:!0,mb:4,children:u.jsx(ue,{item:!0,xs:!0,children:u.jsx(As,{sx:{color:"text.secondary",fontWeight:500},control:u.jsx(yh,{}),label:n("placeholder.receiveSCS")})})}),u.jsx(HR,{control:e,isDesktop:i}),u.jsx(Ze,{variant:"title3",color:"text.secondary",sx:{mb:2,mt:3},children:n("locationSubmitInfo")}),u.jsx(Fc,{control:e,isDesktop:i}),u.jsx(zR,{control:e,isDesktop:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(nf,{control:e,isDesktop:i})]})}),u.jsx(Us,{open:o,onClose:()=>s(!1),onChange:({address:i,inputManually:l})=>{if(i){const a=`${i.buildingEn}, ${i.districtEn}, ${i.streetEn}`,c=`${i.buildingTc}, ${i.districtTc}, ${i.streetTc}`;t("addressEn",a),t("addressTc",c),t("isEngAddressReadOnly",!0),t("isChiAddressReadOnly",!0)}l&&(t("isEngAddressReadOnly",!1),t("isChiAddressReadOnly",!1),t("addressEn",""),t("addressTc",""))}})]})}function Die(){const{t:e,i18n:t}=wt(["form"]),{handleSubmit:n,control:r,formState:{errors:o},watch:s,setValue:i}=Lo({defaultValues:{isEngAddressReadOnly:!0,isChiAddressReadOnly:!0}});return u.jsxs(dt,{direction:"column",p:5,overflow:"auto",sx:{backgroundColor:jt.bgColor},children:[u.jsx(Ze,{variant:"title2",color:"text.secondary",sx:{textAlign:"center",mb:2},children:e("e2FormHeader")}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(Rie,{control:r,setValue:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsxs(dt,{direction:"row",gap:2,mt:2,justifyContent:"flex-end",children:[u.jsx(Et,{sx:{height:40,width:160},children:e("button.save",{ns:"form"})}),u.jsx(Et,{sx:{height:40,width:160},children:e("button.next",{ns:"form"})})]})]})}function Fie({control:e,setValue:t={setValue:t}}){const{t:n,i18n:r}=wt(["form"]),[o,s]=_e.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(hs,{children:i=>u.jsxs(dt,{direction:"column",my:4,children:[u.jsxs(st,{container:!0,isDesktop:i,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:i?8:!0,children:u.jsx(be,{name:"amendmentOfLayoutPlanAsAdvisedBy",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("amendmentOfLayoutPlanAsAdvisedBy"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"date",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("date"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(nr,{...l})})})})]}),u.jsx(Dc,{control:e,isDesktop:i}),u.jsx(Ze,{variant:"title3",color:"text.secondary",sx:{mb:2,mt:3},children:n("locationSubmitInfo")}),u.jsx(Fc,{control:e,isDesktop:i}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"proposedNameOfSchool",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsxs(Ce,{title:n("proposedNameOfSchool"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:[u.jsx(Te,{...l,sx:{mb:1}}),u.jsx(Te,{...l})]})})}),u.jsx(ue,{item:!0,xs:i?6:!0,mb:3,children:u.jsx(be,{name:"refOfBuildingsDepartmentLeter",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("refOfBuildingsDepartmentLeter"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:u.jsx(nr,{...l})})})})]})}),u.jsx(Us,{open:o,onClose:()=>s(!1),onChange:({address:i,inputManually:l})=>{if(i){const a=`${i.buildingEn}, ${i.districtEn}, ${i.streetEn}`,c=`${i.buildingTc}, ${i.districtTc}, ${i.streetTc}`;t("addressEn",a),t("addressTc",c),t("isEngAddressReadOnly",!0),t("isChiAddressReadOnly",!0)}l&&(t("isEngAddressReadOnly",!1),t("isChiAddressReadOnly",!1),t("addressEn",""),t("addressTc",""))}})]})}function jie(){const{t:e,i18n:t}=wt(["form"]),{handleSubmit:n,control:r,formState:{errors:o},watch:s,setValue:i}=Lo({defaultValues:{isEngAddressReadOnly:!0,isChiAddressReadOnly:!0}});return u.jsxs(vt,{p:4,bgcolor:jt.bgColor,height:"100%",display:"flex",flexDirection:"column",overflow:"auto",children:[u.jsx(Ze,{variant:"title2",color:"navy",align:"center",mb:2,children:e("b2FormHeader")}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx(Fie,{control:r,setValue:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsxs(dt,{direction:"row",gap:2,mt:2,justifyContent:"flex-end",children:[u.jsx(Et,{sx:{height:40,width:160},children:e("button.save")}),u.jsx(Et,{sx:{height:40,width:160},children:e("button.next")})]})]})}function $ie({control:e,setValue:t}){const{t:n,i18n:r}=wt(["form"]),[o,s]=_e.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(hs,{children:i=>u.jsxs(dt,{direction:"column",my:4,children:[u.jsxs(st,{container:!0,isDesktop:i,gap:3,mb:4,children:[u.jsx(ue,{item:!0,xs:i?8:!0,children:u.jsx(be,{name:"amendmentOfLayoutPlanAsAdvisedBy",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("amendmentOfLayoutPlanAsAdvisedBy"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(Te,{...l})})})}),u.jsx(ue,{item:!0,xs:!0,children:u.jsx(be,{name:"date",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("date"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(nr,{...l})})})})]}),u.jsx(Dc,{control:e,isDesktop:i}),u.jsx(Ze,{variant:"title3",color:"text.secondary",sx:{mb:2,mt:3},children:n("locationSubmitInfo")}),u.jsx(Fc,{control:e,isDesktop:i}),u.jsx(ue,{item:!0,xs:!0,mb:4,children:u.jsx(be,{name:"proposedNameOfSchool",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsxs(Ce,{title:n("proposedNameOfSchool"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,children:[u.jsx(Te,{...l,sx:{mb:1}}),u.jsx(Te,{...l})]})})}),u.jsx(ue,{item:!0,xs:i?6:!0,mb:3,children:u.jsx(be,{name:"refOfBuildingsDepartmentLeter",control:e,render:({field:l,fieldState:{invalid:a,error:c}})=>u.jsx(Ce,{title:n("refOfBuildingsDepartmentLeter"),formLabelProps:{variant:"navyHeader"},labelPlacement:"top",error:a,helperText:c==null?void 0:c.message,fullWidth:!0,required:!0,children:u.jsx(nr,{...l})})})})]})}),u.jsx(Us,{open:o,onClose:()=>s(!1),onChange:({address:i,inputManually:l})=>{if(i){const a=`${i.buildingEn}, ${i.districtEn}, ${i.streetEn}`,c=`${i.buildingTc}, ${i.districtTc}, ${i.streetTc}`;t("addressEn",a),t("addressTc",c),t("isEngAddressReadOnly",!0),t("isChiAddressReadOnly",!0)}l&&(t("isEngAddressReadOnly",!1),t("isChiAddressReadOnly",!1),t("addressEn",""),t("addressTc",""))}})]})}function Lie(){const{t:e,i18n:t}=wt(["form"]);_e.useState(!1);const{handleSubmit:n,control:r,formState:{errors:o},watch:s,setValue:i}=Lo({defaultValues:{isEngAddressReadOnly:!0,isChiAddressReadOnly:!0}});return u.jsxs(vt,{p:4,bgcolor:jt.bgColor,height:"100%",display:"flex",flexDirection:"column",overflow:"auto",children:[u.jsx(Ze,{variant:"title2",color:"navy",align:"center",mb:2,children:e("c2FormHeader")}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsx($ie,{control:r,setValue:i}),u.jsx(yt,{sx:{borderColor:"text.secondary"}}),u.jsxs(dt,{direction:"row",gap:2,mt:2,justifyContent:"flex-end",children:[u.jsx(Et,{sx:{height:40,width:160},children:e("button.save")}),u.jsx(Et,{sx:{height:40,width:160},children:e("button.next")})]})]})}function Nie(){return u.jsx(h.Suspense,{fallback:u.jsx("div",{}),children:u.jsx(uj,{children:u.jsxs(wn,{exact:!0,path:"/",element:u.jsx(d6,{}),children:[u.jsx(wn,{index:!0,element:u.jsx(lj,{to:"a2",replace:!0})}),u.jsx(wn,{path:"home",element:u.jsx(A6,{})}),u.jsx(wn,{path:"dashboard",element:u.jsx(hZ,{})}),u.jsx(wn,{path:"advance-search",element:u.jsx(bse,{})}),u.jsx(wn,{path:"user-management",element:u.jsx(rZ,{})}),u.jsxs(wn,{path:"forms",children:[u.jsx(wn,{index:!0,element:u.jsx(xse,{})}),u.jsx(wn,{path:"jokc02",exact:!0,element:u.jsx(Sie,{})}),u.jsx(wn,{path:"cccaimh3",exact:!0,element:u.jsx(Aie,{})}),u.jsx(wn,{path:"cccaic2",exact:!0,element:u.jsx(kie,{})}),u.jsx(wn,{path:"f2",exact:!0,element:u.jsx(Mie,{})}),u.jsx(wn,{path:"g2",exact:!0,element:u.jsx(Oie,{})}),u.jsx(wn,{path:"e2",exact:!0,element:u.jsx(Die,{})}),u.jsx(wn,{path:"b2",element:u.jsx(jie,{})}),u.jsx(wn,{path:"c2",element:u.jsx(Lie,{})}),u.jsx(wn,{path:"a2",element:u.jsx(Cie,{})})]})]})})})}db({username:yp().required("Required"),password:yp().required("Required"),department:db({id:yp().required("Required")}).required("Required")});Br(vt)(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100%",backgroundColor:jt.main,overflow:"hidden"}));X(XV)(({theme:e})=>({display:"flex",flexDirection:"column",padding:e.spacing(4),borderRadius:e.shape.borderRadius,boxShadow:e.shadows[3],backgroundColor:e.palette.background.paper,width:"550px",overflow:"auto"}));const Bie={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class Ah{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||Bie,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,o){return o&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Ah(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Ah(this.logger,t)}}var ns=new Ah;class ag{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(i=>{let[l,a]=i;for(let c=0;c<a;c++)l(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[l,a]=i;for(let c=0;c<a;c++)l.apply(l,[t,...r])})}}function lu(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n}function vA(e){return e==null?"":""+e}function Hie(e,t,n){e.forEach(r=>{t[r]&&(n[r]=t[r])})}const zie=/###/g;function ju(e,t,n){function r(l){return l&&l.indexOf("###")>-1?l.replace(zie,"."):l}function o(){return!e||typeof e=="string"}const s=typeof t!="string"?t:t.split(".");let i=0;for(;i<s.length-1;){if(o())return{};const l=r(s[i]);!e[l]&&n&&(e[l]=new n),Object.prototype.hasOwnProperty.call(e,l)?e=e[l]:e={},++i}return o()?{}:{obj:e,k:r(s[i])}}function bA(e,t,n){const{obj:r,k:o}=ju(e,t,Object);if(r!==void 0||t.length===1){r[o]=n;return}let s=t[t.length-1],i=t.slice(0,t.length-1),l=ju(e,i,Object);for(;l.obj===void 0&&i.length;)s=`${i[i.length-1]}.${s}`,i=i.slice(0,i.length-1),l=ju(e,i,Object),l&&l.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=n}function _ie(e,t,n,r){const{obj:o,k:s}=ju(e,t,Object);o[s]=o[s]||[],o[s].push(n)}function Eh(e,t){const{obj:n,k:r}=ju(e,t);if(n)return n[r]}function Vie(e,t,n){const r=Eh(e,n);return r!==void 0?r:Eh(t,n)}function WR(e,t,n){for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof t[r]=="string"||t[r]instanceof String?n&&(e[r]=t[r]):WR(e[r],t[r],n):e[r]=t[r]);return e}function Zl(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Wie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Uie(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,t=>Wie[t]):e}class Gie{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const Qie=[" ",",","?","!",";"],Kie=new Gie(20);function Yie(e,t,n){t=t||"",n=n||"";const r=Qie.filter(i=>t.indexOf(i)<0&&n.indexOf(i)<0);if(r.length===0)return!0;const o=Kie.getRegExp(`(${r.map(i=>i==="?"?"\\?":i).join("|")})`);let s=!o.test(e);if(!s){const i=e.indexOf(n);i>0&&!o.test(e.substring(0,i))&&(s=!0)}return s}function fb(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let o=e;for(let s=0;s<r.length;){if(!o||typeof o!="object")return;let i,l="";for(let a=s;a<r.length;++a)if(a!==s&&(l+=n),l+=r[a],i=o[l],i!==void 0){if(["string","number","boolean"].indexOf(typeof i)>-1&&a<r.length-1)continue;s+=a-s+1;break}o=i}return o}function kh(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class xA extends ag{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,i=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,n],r&&(Array.isArray(r)?l.push(...r):typeof r=="string"&&s?l.push(...r.split(s)):l.push(r)));const a=Eh(this.data,l);return!a&&!n&&!r&&t.indexOf(".")>-1&&(t=l[0],n=l[1],r=l.slice(2).join(".")),a||!i||typeof r!="string"?a:fb(this.data&&this.data[t]&&this.data[t][n],r,s)}addResource(t,n,r,o){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let l=[t,n];r&&(l=l.concat(i?r.split(i):r)),t.indexOf(".")>-1&&(l=t.split("."),o=n,n=l[1]),this.addNamespaces(n),bA(this.data,l,o),s.silent||this.emit("added",t,n,r,o)}addResources(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(typeof r[s]=="string"||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});o.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,o,s){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[t,n];t.indexOf(".")>-1&&(l=t.split("."),o=r,r=n,n=l[1]),this.addNamespaces(n);let a=Eh(this.data,l)||{};i.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?WR(a,r,s):a={...a,...r},bA(this.data,l,a),i.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var UR={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,o){return e.forEach(s=>{this.processors[s]&&(t=this.processors[s].process(t,n,r,o))}),t}};const CA={};class Ih extends ag{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Hie(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ns.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const r=this.resolve(t,n);return r&&r.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const i=r&&t.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Yie(t,r,o);if(i&&!l){const a=t.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:t,namespaces:s};const c=t.split(r);(r!==o||r===o&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),t=c.join(o)}return typeof s=="string"&&(s=[s]),{key:t,namespaces:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:i,namespaces:l}=this.extractFromKey(t[t.length-1],n),a=l[l.length-1],c=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(d){const S=n.nsSeparator||this.options.nsSeparator;return o?{res:`${a}${S}${i}`,usedKey:i,exactUsedKey:i,usedLng:c,usedNS:a,usedParams:this.getUsedParamsDetails(n)}:`${a}${S}${i}`}return o?{res:i,usedKey:i,exactUsedKey:i,usedLng:c,usedNS:a,usedParams:this.getUsedParamsDetails(n)}:i}const f=this.resolve(t,n);let p=f&&f.res;const b=f&&f.usedKey||i,v=f&&f.exactUsedKey||i,x=Object.prototype.toString.apply(p),C=["[object Number]","[object Function]","[object RegExp]"],g=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&p&&(typeof p!="string"&&typeof p!="boolean"&&typeof p!="number")&&C.indexOf(x)<0&&!(typeof g=="string"&&Array.isArray(p))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,p,{...n,ns:l}):`key '${i} (${this.language})' returned an object instead of string.`;return o?(f.res=S,f.usedParams=this.getUsedParamsDetails(n),f):S}if(s){const S=Array.isArray(p),P=S?[]:{},E=S?v:b;for(const A in p)if(Object.prototype.hasOwnProperty.call(p,A)){const k=`${E}${s}${A}`;P[A]=this.translate(k,{...n,joinArrays:!1,ns:l}),P[A]===k&&(P[A]=p[A])}p=P}}else if(y&&typeof g=="string"&&Array.isArray(p))p=p.join(g),p&&(p=this.extendTranslation(p,t,n,r));else{let S=!1,P=!1;const E=n.count!==void 0&&typeof n.count!="string",A=Ih.hasDefaultValue(n),k=E?this.pluralResolver.getSuffix(c,n.count,n):"",j=n.ordinal&&E?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",D=E&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),N=D&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${k}`]||n[`defaultValue${j}`]||n.defaultValue;!this.isValidLookup(p)&&A&&(S=!0,p=N),this.isValidLookup(p)||(P=!0,p=i);const R=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&P?void 0:p,O=A&&N!==p&&this.options.updateMissing;if(P||S||O){if(this.logger.log(O?"updateKey":"missingKey",c,a,i,O?N:p),s){const $=this.resolve(i,{...n,keySeparator:!1});$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let I=[];const M=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&M&&M[0])for(let $=0;$<M.length;$++)I.push(M[$]);else this.options.saveMissingTo==="all"?I=this.languageUtils.toResolveHierarchy(n.lng||this.language):I.push(n.lng||this.language);const T=($,L,B)=>{const z=A&&B!==p?B:R;this.options.missingKeyHandler?this.options.missingKeyHandler($,a,L,z,O,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing($,a,L,z,O,n),this.emit("missingKey",$,a,L,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?I.forEach($=>{const L=this.pluralResolver.getSuffixes($,n);D&&n[`defaultValue${this.options.pluralSeparator}zero`]&&L.indexOf(`${this.options.pluralSeparator}zero`)<0&&L.push(`${this.options.pluralSeparator}zero`),L.forEach(B=>{T([$],i+B,n[`defaultValue${B}`]||N)})}):T(I,i,N))}p=this.extendTranslation(p,t,n,f,r),P&&p===i&&this.options.appendNamespaceToMissingKey&&(p=`${a}:${i}`),(P||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${i}`:i,S?p:void 0):p=this.options.parseMissingKeyHandler(p))}return o?(f.res=p,f.usedParams=this.getUsedParamsDetails(n),f):p}extendTranslation(t,n,r,o,s){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=typeof t=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const p=t.match(this.interpolator.nestingRegexp);d=p&&p.length}let f=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),t=this.interpolator.interpolate(t,f,r.lng||this.language||o.usedLng,r),c){const p=t.match(this.interpolator.nestingRegexp),b=p&&p.length;d<b&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var p=arguments.length,b=new Array(p),v=0;v<p;v++)b[v]=arguments[v];return s&&s[0]===b[0]&&!r.context?(i.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${n[0]}`),null):i.translate(...b,n)},r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,a=typeof l=="string"?[l]:l;return t!=null&&a&&a.length&&r.applyPostProcessor!==!1&&(t=UR.handle(a,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,s,i,l;return typeof t=="string"&&(t=[t]),t.forEach(a=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(a,n),d=c.key;o=d;let f=c.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const p=n.count!==void 0&&typeof n.count!="string",b=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),v=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",x=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(C=>{this.isValidLookup(r)||(l=C,!CA[`${x[0]}-${C}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(CA[`${x[0]}-${C}`]=!0,this.logger.warn(`key "${o}" for languages "${x.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(g=>{if(this.isValidLookup(r))return;i=g;const y=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,d,g,C,n);else{let S;p&&(S=this.pluralResolver.getSuffix(g,n.count,n));const P=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(y.push(d+S),n.ordinal&&S.indexOf(E)===0&&y.push(d+S.replace(E,this.options.pluralSeparator)),b&&y.push(d+P)),v){const A=`${d}${this.options.contextSeparator}${n.context}`;y.push(A),p&&(y.push(A+S),n.ordinal&&S.indexOf(E)===0&&y.push(A+S.replace(E,this.options.pluralSeparator)),b&&y.push(A+P))}}let w;for(;w=y.pop();)this.isValidLookup(r)||(s=w,r=this.getResource(g,C,w,n))}))})}),{res:r,usedKey:o,exactUsedKey:s,usedLng:i,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,r,o):this.resourceStore.getResource(t,n,r,o)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&typeof t.replace!="string";let o=r?t.replace:t;if(r&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const s of n)delete o[s]}return o}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}function Ey(e){return e.charAt(0).toUpperCase()+e.slice(1)}class wA{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ns.create("languageUtils")}getScriptPartFromCode(t){if(t=kh(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=kh(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=t.split("-");return this.options.lowerCaseLng?r=r.map(o=>o.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ey(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ey(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Ey(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],s=i=>{i&&(this.isSupportedCode(i)?o.push(i):this.logger.warn(`rejecting language code not found in supportedLngs: ${i}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):typeof t=="string"&&s(this.formatLanguageCode(t)),r.forEach(i=>{o.indexOf(i)<0&&s(this.formatLanguageCode(i))}),o}}let qie=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Xie={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}};const Jie=["v1","v2","v3"],Zie=["v4"],SA={zero:0,one:1,two:2,few:3,many:4,other:5};function ele(){const e={};return qie.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:Xie[t.fc]}})}),e}class tle{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=ns.create("pluralResolver"),(!this.options.compatibilityJSON||Zie.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=ele()}addRule(t,n){this.rules[t]=n}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(kh(t==="dev"?"en":t),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(o=>`${n}${o}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((o,s)=>SA[o]-SA[s]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):r.numbers.map(o=>this.getSuffix(t,o,n)):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(t,r);return o?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:this.getSuffixRetroCompatible(o,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){const r=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let o=t.numbers[r];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));const s=()=>this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString();return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?`_plural_${o.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Jie.includes(this.options.compatibilityJSON)}}function PA(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Vie(e,t,n);return!s&&o&&typeof n=="string"&&(s=fb(e,n,r),s===void 0&&(s=fb(t,n,r))),s}class nle{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ns.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:s,prefixEscaped:i,suffix:l,suffixEscaped:a,formatSeparator:c,unescapeSuffix:d,unescapePrefix:f,nestingPrefix:p,nestingPrefixEscaped:b,nestingSuffix:v,nestingSuffixEscaped:x,nestingOptionsSeparator:C,maxReplaces:g,alwaysFormat:y}=t.interpolation;this.escape=n!==void 0?n:Uie,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?Zl(s):i||"{{",this.suffix=l?Zl(l):a||"}}",this.formatSeparator=c||",",this.unescapePrefix=d?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?Zl(p):b||Zl("$t("),this.nestingSuffix=v?Zl(v):x||Zl(")"),this.nestingOptionsSeparator=C||",",this.maxReplaces=g||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,o){let s,i,l;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(v){return v.replace(/\$/g,"$$$$")}const d=v=>{if(v.indexOf(this.formatSeparator)<0){const y=PA(n,a,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...o,...n,interpolationkey:v}):y}const x=v.split(this.formatSeparator),C=x.shift().trim(),g=x.join(this.formatSeparator).trim();return this.format(PA(n,a,C,this.options.keySeparator,this.options.ignoreJSONStructure),g,r,{...o,...n,interpolationkey:C})};this.resetRegExp();const f=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,p=o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>c(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?c(this.escape(v)):c(v)}].forEach(v=>{for(l=0;s=v.regex.exec(t);){const x=s[1].trim();if(i=d(x),i===void 0)if(typeof f=="function"){const g=f(t,s,o);i=typeof g=="string"?g:""}else if(o&&Object.prototype.hasOwnProperty.call(o,x))i="";else if(p){i=s[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${t}`),i="";else typeof i!="string"&&!this.useRawValueToEscape&&(i=vA(i));const C=v.safeValue(i);if(t=t.replace(s[0],C),p?(v.regex.lastIndex+=i.length,v.regex.lastIndex-=s[0].length):v.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,i;function l(a,c){const d=this.nestingOptionsSeparator;if(a.indexOf(d)<0)return a;const f=a.split(new RegExp(`${d}[ ]*{`));let p=`{${f[1]}`;a=f[0],p=this.interpolate(p,i);const b=p.match(/'/g),v=p.match(/"/g);(b&&b.length%2===0&&!v||v.length%2!==0)&&(p=p.replace(/'/g,'"'));try{i=JSON.parse(p),c&&(i={...c,...i})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${a}`,x),`${a}${d}${p}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,a}for(;o=this.nestingRegexp.exec(t);){let a=[];i={...r},i=i.replace&&typeof i.replace!="string"?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let c=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const d=o[1].split(this.formatSeparator).map(f=>f.trim());o[1]=d.shift(),a=d,c=!0}if(s=n(l.call(this,o[1].trim(),i),i),s&&o[0]===t&&typeof s!="string")return s;typeof s!="string"&&(s=vA(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),s=""),c&&(s=a.reduce((d,f)=>this.format(d,f,r.lng,{...r,interpolationkey:o[1].trim()}),s.trim())),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}function rle(e){let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);t==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(i=>{if(i){const[l,...a]=i.split(":"),c=a.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();n[d]||(n[d]=c),c==="false"&&(n[d]=!1),c==="true"&&(n[d]=!0),isNaN(c)||(n[d]=parseInt(c,10))}})}return{formatName:t,formatOptions:n}}function ea(e){const t={};return function(r,o,s){const i=o+JSON.stringify(s);let l=t[i];return l||(l=e(kh(o),s),t[i]=l),l(r)}}class ole{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ns.create("formatter"),this.options=t,this.formats={number:ea((n,r)=>{const o=new Intl.NumberFormat(n,{...r});return s=>o.format(s)}),currency:ea((n,r)=>{const o=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>o.format(s)}),datetime:ea((n,r)=>{const o=new Intl.DateTimeFormat(n,{...r});return s=>o.format(s)}),relativetime:ea((n,r)=>{const o=new Intl.RelativeTimeFormat(n,{...r});return s=>o.format(s,r.range||"day")}),list:ea((n,r)=>{const o=new Intl.ListFormat(n,{...r});return s=>o.format(s)})},this.init(t)}init(t){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=ea(n)}format(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((l,a)=>{const{formatName:c,formatOptions:d}=rle(a);if(this.formats[c]){let f=l;try{const p=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},b=p.locale||p.lng||o.locale||o.lng||r;f=this.formats[c](l,b,{...d,...o,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${c}`);return l},t)}}function sle(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}class ile extends ag{constructor(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=ns.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,o.backend,o)}queueLoad(t,n,r,o){const s={},i={},l={},a={};return t.forEach(c=>{let d=!0;n.forEach(f=>{const p=`${c}|${f}`;!r.reload&&this.store.hasResourceBundle(c,f)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?i[p]===void 0&&(i[p]=!0):(this.state[p]=1,d=!1,i[p]===void 0&&(i[p]=!0),s[p]===void 0&&(s[p]=!0),a[f]===void 0&&(a[f]=!0)))}),d||(l[c]=!0)}),(Object.keys(s).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(i),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(a)}}loaded(t,n,r){const o=t.split("|"),s=o[0],i=o[1];n&&this.emit("failedLoading",s,i,n),r&&this.store.addResourceBundle(s,i,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2;const l={};this.queue.forEach(a=>{_ie(a.loaded,[s],i),sle(a,t),n&&a.errors.push(n),a.pendingCount===0&&!a.done&&(Object.keys(a.loaded).forEach(c=>{l[c]||(l[c]={});const d=a.loaded[c];d.length&&d.forEach(f=>{l[c][f]===void 0&&(l[c][f]=!0)})}),a.done=!0,a.errors.length?a.callback(a.errors):a.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(a=>!a.done)}read(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!t.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:o,wait:s,callback:i});return}this.readingCalls++;const l=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(c&&d&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,o+1,s*2,i)},s);return}i(c,d)},a=this.backend[r].bind(this.backend);if(a.length===2){try{const c=a(t,n);c&&typeof c.then=="function"?c.then(d=>l(null,d)).catch(l):l(null,c)}catch(c){l(c)}return}return a(t,n,l)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof n=="string"&&(n=[n]);const s=this.queueLoad(t,n,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(i=>{this.loadOne(i)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),o=r[0],s=r[1];this.read(o,s,"read",void 0,void 0,(i,l)=>{i&&this.logger.warn(`${n}loading namespace ${s} for language ${o} failed`,i),!i&&l&&this.logger.log(`${n}loaded namespace ${s} for language ${o}`,l),this.loaded(t,i,l)})}saveMissing(t,n,r,o,s){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const a={...i,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let d;c.length===5?d=c(t,n,r,o,a):d=c(t,n,r,o),d&&typeof d.then=="function"?d.then(f=>l(null,f)).catch(l):l(null,d)}catch(d){l(d)}else c(t,n,r,o,l,a)}!t||!t[0]||this.store.addResource(t[0],n,r,o)}}}function AA(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let n={};if(typeof t[1]=="object"&&(n=t[1]),typeof t[1]=="string"&&(n.defaultValue=t[1]),typeof t[2]=="string"&&(n.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(o=>{n[o]=r[o]})}return n},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function EA(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Wf(){}function lle(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})}class wd extends ag{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=EA(t),this.services={},this.logger=ns,this.modules={external:[]},lle(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=AA();this.options={...o,...this.options,...EA(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function s(d){return d?typeof d=="function"?new d:d:null}if(!this.options.isClone){this.modules.logger?ns.init(s(this.modules.logger),this.options):ns.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=ole);const f=new wA(this.options);this.store=new xA(this.options.resources,this.options);const p=this.services;p.logger=ns,p.resourceStore=this.store,p.languageUtils=f,p.pluralResolver=new tle(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(p.formatter=s(d),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new nle(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new ile(s(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(b){for(var v=arguments.length,x=new Array(v>1?v-1:0),C=1;C<v;C++)x[C-1]=arguments[C];t.emit(b,...x)}),this.modules.languageDetector&&(p.languageDetector=s(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=s(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new Ih(this.services,this.options),this.translator.on("*",function(b){for(var v=arguments.length,x=new Array(v>1?v-1:0),C=1;C<v;C++)x[C-1]=arguments[C];t.emit(b,...x)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Wf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return t.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return t.store[d](...arguments),t}});const a=lu(),c=()=>{const d=(f,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(p),r(f,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),a}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wf;const o=typeof t=="string"?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],i=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};o?i(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(a=>i(a)),this.options.preload&&this.options.preload.forEach(l=>i(l)),this.services.backendConnector.load(s,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(t,n,r){const o=lu();return t||(t=this.languages),n||(n=this.options.ns),r||(r=Wf),this.services.backendConnector.reload(t,n,s=>{o.resolve(),r(s)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&UR.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const o=lu();this.emit("languageChanging",t);const s=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},i=(a,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(a,function(){return r.t(...arguments)})},l=a=>{!t&&!a&&this.services.languageDetector&&(a=[]);const c=typeof a=="string"?a:this.services.languageUtils.getBestMatchFromCodes(a);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,d=>{i(d,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(t),o}getFixedT(t,n,r){var o=this;const s=function(i,l){let a;if(typeof l!="object"){for(var c=arguments.length,d=new Array(c>2?c-2:0),f=2;f<c;f++)d[f-2]=arguments[f];a=o.options.overloadTranslationOptionHandler([i,l].concat(d))}else a={...l};a.lng=a.lng||s.lng,a.lngs=a.lngs||s.lngs,a.ns=a.ns||s.ns,a.keyPrefix!==""&&(a.keyPrefix=a.keyPrefix||r||s.keyPrefix);const p=o.options.keySeparator||".";let b;return a.keyPrefix&&Array.isArray(i)?b=i.map(v=>`${a.keyPrefix}${p}${v}`):b=a.keyPrefix?`${a.keyPrefix}${p}${i}`:i,o.t(b,a)};return typeof t=="string"?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const i=(l,a)=>{const c=this.services.backendConnector.state[`${l}|${a}`];return c===-1||c===2};if(n.precheck){const l=n.precheck(this,i);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(r,t)&&(!o||i(s,t)))}loadNamespaces(t,n){const r=lu();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=lu();typeof t=="string"&&(t=[t]);const o=this.options.preload||[],s=t.filter(i=>o.indexOf(i)<0&&this.services.languageUtils.isSupportedCode(i));return s.length?(this.options.preload=o.concat(s),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new wA(AA());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new wd(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wf;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const o={...this.options,...t,isClone:!0},s=new wd(o);return(t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new xA(this.store.data,o),s.services.resourceStore=s.store),s.translator=new Ih(s.services,o),s.translator.on("*",function(l){for(var a=arguments.length,c=new Array(a>1?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];s.emit(l,...c)}),s.init(o,n),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Un=wd.createInstance();Un.createInstance=wd.createInstance;Un.createInstance;Un.dir;Un.init;Un.loadResources;Un.reloadResources;Un.use;Un.changeLanguage;Un.getFixedT;Un.t;Un.exists;Un.setDefaultNamespace;Un.hasLoadedNamespace;Un.loadNamespaces;Un.loadLanguages;const ale={submit:"提交",remove:"移除"},cle={pleaseSelect:"Please Select"},ule={button:ale,placeholder:cle},dle="地址搜尋",fle="大廈名稱",ple="街道名稱",hle="搜尋",mle="選擇大廈地址",gle="選擇",yle="未能找到大廈地址，進行手動輸入。",vle={addressSearch:dle,buildingName:fle,streetName:ple,search:hle,selectBuildingAddress:mle,select:gle,notFound:yle},ble="Welcome to Building Department Self-Certification System",xle="Search Case",Cle="Outstanding Case Summary",wle={fileReferenceNo:"File Reference No",inputFileReferenceNo:"Please input File Reference No"},Sle={total:"Total no. of case",sevenDaysBeforeTargetReplyDate:"7 days before target reply date",overdue:"Overdue"},Ple={myTask:"My Task",myTeamTask:"My Team Task"},Ale={exportToExcel:"Export to Excel",delegateTo:"Delegate to"},Ele={welcome:ble,searchCase:xle,outstandingCaseSummary:Cle,placeholder:wle,table:Sle,tabs:Ple,button:Ale},kle="Welcome to the user management service",Ile="Total users",Mle="Idle users",Tle="Locked users",Ole={createUser:"Create New Users"},Rle={welcome:kle,totalUsers:Ile,idleUsers:Mle,lockedUsers:Tle,button:Ole},Dle="Advance Search",Fle="Applicant Number",jle="License Case ID",$le="File Reference",Lle="L.A. File Reference",Nle="School Name (Chinese)",Ble="School Name (English)",Hle="Address (Chinese)",zle="Address (English)",_le="AP/RSE Registration Number",Vle="AP/RSE Name",Wle="Case Officer",Ule="Nature",Gle="Category",Qle="Received Date",Kle="Region",Yle="Target Reply Date",qle="District",Xle="DCCA1990 District",Jle="Area",Zle="DCCA1990 Area",eae="Actual Reply Date",tae="Audit Result",nae="Remarks",rae="Application Type",oae="Block/Unit ID",sae="Permission",iae={all:"All",any:"Any",includeUnitSign:"Include Unit/Sign",includeHistory:"Include History"},lae="Outstanding Cases Only",aae="With Reminder(s) More Than",cae="no(s)",uae={search:"Search"},dae={pleaseSelect:"Please Select"},fae={advanceSearch:Dle,applicantNumber:Fle,licesneCaseId:jle,fileReference:$le,LAFileReference:Lle,in:"In",schoolNameChi:Nle,schoolNameEng:Ble,addressChi:Hle,addressEng:zle,ApRseRegNunber:_le,ApRseName:Vle,caseOfficer:Wle,nature:Ule,category:Gle,receivedDate:Qle,region:Kle,targetReplyDate:Yle,district:qle,dccA1990District:Xle,area:Jle,dccA1990Area:Zle,actualReplyDate:eae,auditResult:tae,remarks:nae,applicationType:rae,blockUnitId:oae,permission:sae,permissionOptions:iae,outstandingCasesOnly:lae,withReminderMoreThan:aae,no:cae,button:uae,placeholder:dae},pae="表格 A2",hae="表格 JOKC 02",mae="表格 CCCAI:C/2",gae="表格 F2",yae="表格 G2",vae="表格 E2",bae="表格 B2",xae="表格 C2",Cae="申請人全名",wae="申請人電郵地址",Sae="申請人手提號碼",Pae="通訊地址",Aae="聯絡人資料與申請人相同",Eae="聯絡人姓名 (如適用)",kae="聯絡人電話號碼",Iae="聯絡人手機號碼",Mae="提交申請之處所位置 (Lot No. 如適用)",Tae="學校名稱",Oae="學校類別",Rae="請註明",Dae="學生年齡",Fae="推算學生人數",jae="上載圖則及文件",$ae="申請人英文全名",Lae="申請人中文全名",Nae="申請人/代表機構電郵地址",Bae="申請人/代表懶構手提號碼",Hae="申請人身份證號碼",zae="代表機構英文名稱(個人申請省毋須填寫)",_ae="代表機構中文名稱(個人申請省毋須填寫)",Vae="申請人/代表機構英文地址",Wae="申請人/代表機構中文地址",Uae="申請人/代表機構電話號碼",Gae="稱謂",Qae="日期",Kae="英文地址",Yae="中文地址",qae="樓層",Xae="單位/室",Jae="聯絡人姓名",Zae="聯絡人傳真號碼",ece="聯絡人電郵地址",tce="聯絡人手機號碼",nce="聯絡人英文地址",rce="委任上載 APP-13 文件之認可人士資料",oce="委任上載 結構計算表之結構工程師資料",sce="委任執行「自行核證制度」之認可人士資料 / 結構工程師資料",ice="英文全名",lce="中文全名",ace="註冊號碼",cce="電郵地址",uce="手提號碼",dce="擬辦中心資料",fce="擬辦中心名稱",pce="擬辦中心電話號碼(如可提供)",hce="聯絡人資料",mce="Amendment of Layout Plan as advised by",gce="Proposed Name of School",yce="Reference to the date of letter",vce="Reference of Buildings Department Leter",bce={mr:"先生",mrs:"太太",miss:"小姐",ms:"女士"},xce={kinderg:"幼稚園",primary:"小學",secondary:"中學",tutorial_sch:"教育中心",other_sch:"其他"},Cce={"3above":"3歲或以上","6above":"6歲或以上"},wce={layoutPlan:"Layout Plan (requires applicant e-signature)",photo:"Photo Record",other:"Other"},Sce={applicantFullName:"需與身份証明文件一致",receiveSCS:"接收 SCS 平台訊息",floor:"例如: 1-3, UG, G, B1",unit:"例如: 1001-1003, A, B",pleaseSelect:"請選取",selectDocType:"請選擇文件種類",registerNo:"例如: 99/99",eng:"(英文)",chinese:"(中文)"},Pce={submit:"提交",save:"保存",next:"下一步"},Ace={required:"欄位需要輸入資料"},Ece={a2FormHeader:pae,jokc02formHeader:hae,cccaic2formHeader:mae,f2FormHeader:gae,g2FormHeader:yae,e2FormHeader:vae,b2FormHeader:bae,c2FormHeader:xae,applicantFullName:Cae,applicantEmail:wae,applicantPhone:Sae,address:Pae,sameAsApplicant:Aae,contactName2:Eae,contactPhone2:kae,contactMobilePhone:Iae,locationSubmitInfo:Mae,schoolName:Tae,schoolCategory:Oae,pleaseRemarks:Rae,studentAge:Dae,estimateTheNumberOfStudents:Fae,uploadPlansAndDocuments:jae,applicantFullNameEng:$ae,applicantFullNameChi:Lae,applicantAgencyEmail:Nae,applicantAgencyPhone:Bae,applicantIdCardNo:Hae,agencyNameEng:zae,agencyNameChi:_ae,agencyAddressEng:Vae,agencyAddressChi:Wae,agencyPhone:Uae,title:Gae,date:Qae,addressEng:Kae,addressChi:Yae,floor:qae,unit:Xae,contactName:Jae,contactFax:Zae,contactEmail:ece,contactPhone:tce,contactAddressEng:nce,uploadPersonInfo:rce,structuralEngineerInformation:oce,engineerInformation:sce,fullNameEng:ice,fullNameChi:lce,registerNo:ace,email:cce,phone:uce,proposedCenterInformation:dce,proposedCenterName:fce,proposedCenterPhone:pce,contactInformation:hce,amendmentOfLayoutPlanAsAdvisedBy:mce,proposedNameOfSchool:gce,refToTheDateOfLetter:yce,refOfBuildingsDepartmentLeter:vce,titleOptions:bce,schoolOptions:xce,studentAgeOptions:Cce,docOptions:wce,placeholder:Sce,button:Pce,warning:Ace},kce="表格 CCCAI:MH/ 3",Ice="代表人英文全名",Mce="代表人中文全名",Tce="代表人電郵地址",Oce="代表人手提號碼",Rce="代表人身份證號碼",Dce="代表人職位",Fce="主辨機構英文名稱",jce="主辨機構中文名稱",$ce="主辨機構地址英文",Lce="主辨機構地址中文",Nce="主辨機構電話號碼",Bce={formHeader:kce,representativeFullNameEng:Ice,representativeFullNameChi:Mce,representativeEmail:Tce,representativePhone:Oce,representativeIdNo:Rce,representativePosition:Dce,organiserNameEng:Fce,organiserNameChi:jce,organiserAddressEng:$ce,organiserAddressChi:Lce,organiserPhone:Nce},Hce={common:ule,addressDialog:vle,dashboard:Ele,userManagement:Rle,advanceSearch:fae,form:Ece,cccaimh3:Bce},zce={submit:"提交",remove:"移除"},_ce={pleaseSelect:"Please Select"},Vce={button:zce,placeholder:_ce},Wce="地址搜尋",Uce="大廈名稱",Gce="街道名稱",Qce="搜尋",Kce="選擇大廈地址",Yce="選擇",qce="未能找到大廈地址，進行手動輸入。",Xce={addressSearch:Wce,buildingName:Uce,streetName:Gce,search:Qce,selectBuildingAddress:Kce,select:Yce,notFound:qce},Jce="Welcome to Building Department Self-Certification System",Zce="Search Case",eue="Outstanding Case Summary",tue={fileReferenceNo:"File Reference No",inputFileReferenceNo:"Please input File Reference No"},nue={total:"Total no. of case",sevenDaysBeforeTargetReplyDate:"7 days before target reply date",overdue:"Overdue"},rue={myTask:"My Task",myTeamTask:"My Team Task"},oue={exportToExcel:"Export to Excel",delegateTo:"Delegate to"},sue={welcome:Jce,searchCase:Zce,outstandingCaseSummary:eue,placeholder:tue,table:nue,tabs:rue,button:oue},iue="Welcome to the user management service",lue="Total users",aue="Idle users",cue="Locked users",uue={createUser:"Create New Users"},due={welcome:iue,totalUsers:lue,idleUsers:aue,lockedUsers:cue,button:uue},fue="Advance Search",pue="Applicant Number",hue="License Case ID",mue="File Reference",gue="L.A. File Reference",yue="School Name (Chinese)",vue="School Name (English)",bue="Address (Chinese)",xue="Address (English)",Cue="AP/RSE Registration Number",wue="AP/RSE Name",Sue="Case Officer",Pue="Nature",Aue="Category",Eue="Received Date",kue="Region",Iue="Target Reply Date",Mue="District",Tue="DCCA1990 District",Oue="Area",Rue="DCCA1990 Area",Due="Actual Reply Date",Fue="Audit Result",jue="Remarks",$ue="Application Type",Lue="Block/Unit ID",Nue="Permission",Bue={all:"All",any:"Any",includeUnitSign:"Include Unit/Sign",includeHistory:"Include History"},Hue="Outstanding Cases Only",zue="With Reminder(s) More Than",_ue="no(s)",Vue={search:"Search"},Wue={pleaseSelect:"Please Select"},Uue={advanceSearch:fue,applicantNumber:pue,licesneCaseId:hue,fileReference:mue,LAFileReference:gue,in:"In",schoolNameChi:yue,schoolNameEng:vue,addressChi:bue,addressEng:xue,ApRseRegNunber:Cue,ApRseName:wue,caseOfficer:Sue,nature:Pue,category:Aue,receivedDate:Eue,region:kue,targetReplyDate:Iue,district:Mue,dccA1990District:Tue,area:Oue,dccA1990Area:Rue,actualReplyDate:Due,auditResult:Fue,remarks:jue,applicationType:$ue,blockUnitId:Lue,permission:Nue,permissionOptions:Bue,outstandingCasesOnly:Hue,withReminderMoreThan:zue,no:_ue,button:Vue,placeholder:Wue},Gue="表格 A2",Que="表格 JOKC 02",Kue="表格 CCCAI:C/2",Yue="表格 F2",que="表格 G2",Xue="表格 E2",Jue="表格 B2",Zue="表格 C2",ede="申請人全名",tde="申請人電郵地址",nde="申請人手提號碼",rde="通訊地址",ode="聯絡人資料與申請人相同",sde="聯絡人姓名 (如適用)",ide="聯絡人電話號碼",lde="聯絡人手機號碼",ade="提交申請之處所位置 (Lot No. 如適用)",cde="學校名稱",ude="學校類別",dde="請註明",fde="學生年齡",pde="推算學生人數",hde="上載圖則及文件",mde="申請人英文全名",gde="申請人中文全名",yde="申請人/代表機構電郵地址",vde="申請人/代表懶構手提號碼",bde="申請人身份證號碼",xde="代表機構英文名稱(個人申請省毋須填寫)",Cde="代表機構中文名稱(個人申請省毋須填寫)",wde="申請人/代表機構英文地址",Sde="申請人/代表機構中文地址",Pde="申請人/代表機構電話號碼",Ade="稱謂",Ede="日期",kde="英文地址",Ide="中文地址",Mde="樓層",Tde="單位/室",Ode="聯絡人姓名",Rde="聯絡人傳真號碼",Dde="聯絡人電郵地址",Fde="聯絡人手機號碼",jde="聯絡人英文地址",$de="委任上載 APP-13 文件之認可人士資料",Lde="委任上載 結構計算表之結構工程師資料",Nde="委任執行「自行核證制度」之認可人士資料 / 結構工程師資料",Bde="英文全名",Hde="中文全名",zde="註冊號碼",_de="電郵地址",Vde="手提號碼",Wde="擬辦中心資料",Ude="擬辦中心名稱",Gde="擬辦中心電話號碼(如可提供)",Qde="聯絡人資料",Kde="Amendment of Layout Plan as advised by",Yde="Proposed Name of School",qde="Reference to the date of letter",Xde="Reference of Buildings Department Leter",Jde={mr:"先生",mrs:"太太",miss:"小姐",ms:"女士"},Zde={kinderg:"幼稚園",primary:"小學",secondary:"中學",tutorial_sch:"教育中心",other_sch:"其他"},efe={"3above":"3歲或以上","6above":"6歲或以上"},tfe={layoutPlan:"Layout Plan (requires applicant e-signature)",photo:"Photo Record",other:"Other"},nfe={applicantFullName:"需與身份証明文件一致",receiveSCS:"接收 SCS 平台訊息",floor:"例如: 1-3, UG, G, B1",unit:"例如: 1001-1003, A, B",pleaseSelect:"請選取",selectDocType:"請選擇文件種類",registerNo:"例如: 99/99",eng:"(英文)",chinese:"(中文)"},rfe={submit:"提交",save:"保存",next:"下一步"},ofe={required:"欄位需要輸入資料"},sfe={a2FormHeader:Gue,jokc02formHeader:Que,cccaic2formHeader:Kue,f2FormHeader:Yue,g2FormHeader:que,e2FormHeader:Xue,b2FormHeader:Jue,c2FormHeader:Zue,applicantFullName:ede,applicantEmail:tde,applicantPhone:nde,address:rde,sameAsApplicant:ode,contactName2:sde,contactPhone2:ide,contactMobilePhone:lde,locationSubmitInfo:ade,schoolName:cde,schoolCategory:ude,pleaseRemarks:dde,studentAge:fde,estimateTheNumberOfStudents:pde,uploadPlansAndDocuments:hde,applicantFullNameEng:mde,applicantFullNameChi:gde,applicantAgencyEmail:yde,applicantAgencyPhone:vde,applicantIdCardNo:bde,agencyNameEng:xde,agencyNameChi:Cde,agencyAddressEng:wde,agencyAddressChi:Sde,agencyPhone:Pde,title:Ade,date:Ede,addressEng:kde,addressChi:Ide,floor:Mde,unit:Tde,contactName:Ode,contactFax:Rde,contactEmail:Dde,contactPhone:Fde,contactAddressEng:jde,uploadPersonInfo:$de,structuralEngineerInformation:Lde,engineerInformation:Nde,fullNameEng:Bde,fullNameChi:Hde,registerNo:zde,email:_de,phone:Vde,proposedCenterInformation:Wde,proposedCenterName:Ude,proposedCenterPhone:Gde,contactInformation:Qde,amendmentOfLayoutPlanAsAdvisedBy:Kde,proposedNameOfSchool:Yde,refToTheDateOfLetter:qde,refOfBuildingsDepartmentLeter:Xde,titleOptions:Jde,schoolOptions:Zde,studentAgeOptions:efe,docOptions:tfe,placeholder:nfe,button:rfe,warning:ofe},ife="表格 CCCAI:MH/ 3",lfe="代表人英文全名",afe="代表人中文全名",cfe="代表人電郵地址",ufe="代表人手提號碼",dfe="代表人身份證號碼",ffe="代表人職位",pfe="主辨機構英文名稱",hfe="主辨機構中文名稱",mfe="主辨機構地址英文",gfe="主辨機構地址中文",yfe="主辨機構電話號碼",vfe={formHeader:ife,representativeFullNameEng:lfe,representativeFullNameChi:afe,representativeEmail:cfe,representativePhone:ufe,representativeIdNo:dfe,representativePosition:ffe,organiserNameEng:pfe,organiserNameChi:hfe,organiserAddressEng:mfe,organiserAddressChi:gfe,organiserPhone:yfe},bfe={common:Vce,addressDialog:Xce,dashboard:sue,userManagement:due,advanceSearch:Uue,form:sfe,cccaimh3:vfe},xfe={en:Hce,zh:bfe};Un.use(L6).init({resources:xfe,lng:"zh",interpolation:{escapeValue:!1}});const Cfe=Sm({palette:{primary:{main:jt.main},secondary:{main:jt.secondary},text:{primary:"#000",secondary:"#2E4765",disabled:"#9e9e9e"}},typography:{title:{color:"#000",fontSize:"18px"},subtitle:{color:"#616161",fontSize:"14px"},title2:{color:"#000",fontSize:"24px",fontWeight:"bold"},title3:{fontSize:"14px",fontWeight:500},large:{fontSize:"18px"},medium:{fontSize:"14px"},small:{fontSize:"12px"},warning:{textDecoration:"underline",color:jt.red},link:{textDecoration:"underline",color:"rgb(59 130 246)",cursor:"pointer"}}}),wfe=X("div")({display:"flex",width:"100vw"}),Sfe=X("div")({height:"100vh",flexDirection:"column",width:"calc(100% - 100px)",backgroundColor:"#ffffff",overflow:"hidden"});function Pfe(){return h.useContext(c0),u.jsxs(wfe,{children:[u.jsx(QG,{}),u.jsx(Sfe,{children:u.jsx(Nie,{})})]})}const Afe=new oH;function Efe(){return u.jsx(kv,{theme:Cfe,children:u.jsx(iH,{client:Afe,children:u.jsx(l6,{children:u.jsxs(tT,{children:[u.jsx(Pfe,{}),u.jsx(JG,{})]})})})})}const kfe=ky.createRoot(document.getElementById("root"));kfe.render(u.jsx(_e.StrictMode,{children:u.jsx(pj,{children:u.jsx(Efe,{})})}));

================
File: bd-scs-backend-backend-main/routes/applications.js
================
var express = require("express");
var router = express.Router();
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const { APPLICATION_TYPES, SubmissionType } = require("../models/Application");
const { TaskType } = require("../models/Task");
const { generateApplicationNo } = require("../utils/application");
const multer = require("multer");
const path = require("path");
const mongoose = require("mongoose");
const ObjectId = mongoose.Types.ObjectId;
const REPLY_DAYS = require("../config/replyDays");
require("dotenv").config();

function buildAddressEN(ad) {
  const parts = [
    ad.osadR_E1,
    ad.osadR_E2,
    ad.osadR_E3,
    ad.osadR_E4,
    ad.osadR_E5,
    ad.bldG_NAME_E1,
    ad.osadR_LOT_E1,
    ad.osadR_LOT_E2,
    ad.osadR_LOT_E3,
    ad.osadR_LOT_E4,
    ad.osadR_ST_E1,
    ad.osadR_ST_E2,
    ad.district_e,
  ];
  return parts.filter((part) => part && part.trim()).join(", ");
}

// Configure storage for uploaded files
const storage = multer.diskStorage({
  destination: function (req, file, cb) {
    cb(null, "uploads/"); // Directory to save uploaded files
  },
  filename: function (req, file, cb) {
    cb(null, Date.now() + path.extname(file.originalname)); // Append timestamp to avoid naming conflicts
  },
});
const upload = multer({ storage: storage });

// Create an 'uploads' directory if it doesn't exist
const fs = require("fs");
const { TASKS } = require("../config/task");
const { BS_TEAM_MAPPINGS } = require("../config/user");
const { NotificationType } = require("../models/Notification");
const { AttachemntType } = require("../models/Attachment");
const { default: axios } = require("axios");
const uploadsDir = "uploads";
if (!fs.existsSync(uploadsDir)) {
  fs.mkdirSync(uploadsDir);
}

/* GET applications listing. */
router.get("/", async function (req, res, next) {
  try {
    const query = {};

    // Build the query dynamically based on the provided search parameters
    if (req.query.ApplicationNo) {
      query.ApplicationNo = { $regex: req.query.ApplicationNo, $options: "i" };
    }
    if (req.query.NameOfSchoolCN) {
      query.NameOfSchoolCN = {
        $regex: req.query.NameOfSchoolCN,
        $options: "i",
      };
    }
    if (req.query.NameOfSchoolEN) {
      query.NameOfSchoolEN = {
        $regex: req.query.NameOfSchoolEN,
        $options: "i",
      };
    }
    if (req.query.AddressOfPremiseCN) {
      query.AddressOfPremiseCN = {
        $regex: req.query.AddressOfPremiseCN,
        $options: "i",
      };
    }
    if (req.query.AddressOfPremiseEN) {
      query.AddressOfPremiseEN = {
        $regex: req.query.AddressOfPremiseEN,
        $options: "i",
      };
    }
    if (req.query.ApplicationType) {
      query.ApplicationType = {
        $regex: req.query.ApplicationType,
        $options: "i",
      };
    }

    const ApplicationModel = MongoDBHelper.getCollection(
      collections.Application
    );

    console.log("Query", query);

    const applications = await ApplicationModel.find(query).sort({
      createdAt: -1,
    });
    res.send(applications);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* POST create application. */
router.post("/", async function (req, res, next) {
  try {
    const ApplicationModel = MongoDBHelper.getCollection(
      collections.Application
    );
    console.log("Request", JSON.stringify(req.body));
    const SubmissionModel = MongoDBHelper.getCollection(collections.Submission);
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    req.body.SubmissionType = SubmissionType.PAPER;
    let assignedBS = null;

    let assignedSBS = null;
    let assignedGR = null;
    if (req.body.RelatedPremise) {
      const blockId = req.body.RelatedPremise;
      const BsBlockModel = MongoDBHelper.getCollection(collections.BsBlock);
      const UserModel = MongoDBHelper.getCollection(collections.User);
      if (blockId) {
        const matchBlockId = await BsBlockModel.findOne({ blockId: blockId });
        assignedBS = (
          await UserModel.findOne({
            role: "BS",
            bdgis: matchBlockId.bdgis,
          })
        )?.position;
        if (assignedBS) {
          assignedSBS = (
            await UserModel.findOne({
              team: assignedBS,
              role: "SBS",
            })
          )?.position;
          assignedGR = (
            await UserModel.findOne({
              team: assignedBS,
              role: "GR",
            })
          )?.position;
        }
      }
    }
    // create new application
    const application = await ApplicationModel.create({
      ...req.body,
      ApplicationNo:
        req.body.ApplicationNo ||
        (await generateApplicationNo(req.body.ApplicationType)),
      ApplicationDate: req.body.Date,
      assignedBS,
      assignedSBS,
      assignedGR,
    });
    res.send(application);
    // } else {
    //   next({ status: 400, message: "Submission not valid" });
    // }
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* POST create application. */
// router.post("/electronic", async function (req, res, next) {
//   try {
//     const ApplicationModel = MongoDBHelper.getCollection(
//       collections.Application
//     );

//     // "NEWSCH", "EXTSCH", "ALTSCH", "NEWCCC", "NEWJOKC", "NEWMUT", "ALTCCC", "NLHE"
//     const APPLICATION_TYPE_MAP = {
//       NEWSCH: "SCH",
//       EXTSCH: "SCH",
//       ALTSCH: "SCH",
//       NEWCCC: "CCC",
//       NEWJOKC: "CCC",
//       NEWMUT: "CCC",
//       ALTCCC: "CCC",
//       NLHE: "CCC",
//     };
//     console.log("Request", JSON.stringify(req.body));
//     const SubmissionModel = MongoDBHelper.getCollection(collections.Submission);
//     const TaskModel = MongoDBHelper.getCollection(collections.Task);
//     req.body.SubmissionType = SubmissionType.EAPPLICATION;
//     req.body.ApplicationType = APPLICATION_TYPE_MAP[req.body.ApplicationType];
//     let assignedBS = new mongoose.Types.ObjectId("66c9bcc7a5fb78db361953ab");
//     if (req.body.address) {
//       const blockId = req.body.address.adR_BLK_ID;
//       const BsBlockModel = MongoDBHelper.getCollection(collections.BsBlock);
//       const UserModel = MongoDBHelper.getCollection(collections.User);
//       if (blockId) {
//         const matchBlockId = await BsBlockModel.findOne({ blockId: blockId });
//         assignedBS =
//           (
//             await UserModel.findOne({
//               role: "BS",
//               bdgis: matchBlockId.bdgis,
//             })
//           )?._id || assignedBS;
//       }
//     }
//     // create new application
//     let application = await ApplicationModel.create({
//       ...req.body,
//       ApplicationNo:
//         req.body.ApplicationNo ||
//         (await generateApplicationNo(req.body.ApplicationType)),
//       ApplicationDate: req.body.Date,
//       assignedBS,
//     });

//     application = await application.populate("assignedBS");

//     const UserModel = MongoDBHelper.getCollection(collections.User);
//     const CaseModel = MongoDBHelper.getCollection(collections.Case);

//     let team = application.assignedBS.team;
//     const lookforpositions = [team, ...Object.values(BS_TEAM_MAPPINGS[team])];
//     const teamMembers = await UserModel.find({
//       position: { $in: lookforpositions },
//     });

//     const teamGroup = {
//       SO: teamMembers.find((user) => user.role == "SO"),
//       TO: teamMembers.find((user) => user.role == "TO"),
//       SE: teamMembers.find((user) => user.role == "SE"),
//       BS: teamMembers.find((user) => user.role == "BS"),
//       SSE: teamMembers.find((user) => user.role == "SSE"),
//       SBS: teamMembers.find((user) => user.role == "SBS"),
//       CBS: teamMembers.find((user) => user.role == "CBS"),
//     };
//     const caseItem = await CaseModel.create({
//       ...req.body,
//       application: application._id,
//       assignedBS: application.assignedBS._id,
//       assignedGR: application.assignedGR,
//       team: team,
//     });
//     // TODO: find all members
//     // Create tasks

//     const possibleCatNature = [...new Set(TASKS.map((task) => task.catNature))];
//     let catNature = (caseItem.Nature = caseItem.Category);
//     if (!possibleCatNature.includes(catNature)) {
//       catNature = "NEWSCH";
//     }
//     let newTasks = TASKS.filter((task) =>
//       task.catNature?.includes(catNature)
//     ).map((task) => ({
//       taskType: task.type,
//       application: application._id,
//       submissionCase: caseItem._id,
//       user: teamGroup[task.doneBy]?._id,
//       team,
//     }));
//     // let tasks = [
//     //   {
//     //     taskType: TaskType.DESK_STUDY,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["SO"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.INITIAL_SITE_INSPECTION,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["SO"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.ENDORSE_SO_EMINUTES,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["BS"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.SEARCH_STRUCTURAL_DATA,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["TO"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.ENDORSE_TO_EMINUTES,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["SE"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.PREPARE_STRUCTURAL_ADVICE,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["SE"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.ENDORSE_SE_EMINUTES,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["SSE"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.CHECK_PLAN_AND_SITE_CONDITION,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["BS"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.PREPARE_LETTER_CERT,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["BS"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.ENDORSE_BS_EMINUTES,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["SBS"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.ENDORSE_LETTER_CERT,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["SBS"]?._id,
//     //     team,
//     //   },
//     //   {
//     //     taskType: TaskType.ENDORSE_OBJECTION_SPECIAL_CASE,
//     //     application: application._id,
//     //     submissionCase: caseItem._id,
//     //     user: teamGroup["CBS"]?._id,
//     //     team,
//     //   },
//     // ];
//     const insertedTasks = await TaskModel.insertMany(newTasks);

//     res.send({
//       application,
//       caseItem,
//     });
//     // } else {
//     //   next({ status: 400, message: "Submission not valid" });
//     // }
//   } catch (e) {
//     console.log(e);
//     next(e);
//   }
// });

/* GET application by ID. */
router.get("/:applicationId", async function (req, res, next) {
  try {
    const ApplicationModel = MongoDBHelper.getCollection(
      collections.Application
    );
    const SysFileRefModel = MongoDBHelper.getCollection(collections.SysFileRef);
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    console.log("AID", req.params.applicationId);
    const application = await ApplicationModel.findOne(
      ObjectId.isValid(req.params.applicationId)
        ? { _id: req.params.applicationId }
        : { applicationNo: req.params.applicationId }
    )
      .populate("assignedBS", "name")
      .lean();
    const sysFileRef = await SysFileRefModel.findOne({
      sysFileRefId: application.FileReference,
    });
    const attachments = await AttachmentModel.find({
      application: req.params.applicationId,
      type: AttachemntType.APPLICATION,
    });
    // Get the related Premise details from frontend
    if (application.RelatedPremise) {
      const relatedPremiseDetails = (
        await axios.post(
          `${process.env.FRONTEND_API_URL}/application/find-address`,
          {
            BuildingId: application.RelatedPremise,
          }
        )
      )?.data?.data?.[0];
      application.RelatedPremiseType = relatedPremiseDetails.bt_e;
      application.RelatedPremiseAddress = buildAddressEN(relatedPremiseDetails);
      application.District = relatedPremiseDetails.district_e;
      application.Region = relatedPremiseDetails.region_e;
      application.Area = relatedPremiseDetails.area_e;
    }

    application.FileReferenceDisplay = sysFileRef?.display;
    application.attachments = attachments;
    res.send(application);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* GET application history by ID. */
router.get("/:applicationId/history", async function (req, res, next) {
  try {
    const ApplicationModel = MongoDBHelper.getCollection(
      collections.Application
    );
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    const SysFileRefModel = MongoDBHelper.getCollection(collections.SysFileRef);
    const application = await ApplicationModel.findOne({
      _id: req.params.applicationId,
    }).lean();
    const applicationHistory = await AttachmentModel.find({
      application: req.params.applicationId,
      sysFileRefId: application.FileReference,
      efolio: { $ne: null },
    });

    const applicationHistoryWithFileRef = await Promise.all(
      applicationHistory.map(async (attachment) => {
        const fileRef = await SysFileRefModel.findOne({
          sysFileRefId: attachment.sysFileRefId,
        });
        return {
          ...attachment.toObject(),
          fileReference: fileRef?.display,
        };
      })
    );

    res.send(applicationHistoryWithFileRef);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* POST update application by ID. */
router.post("/:applicationId", async function (req, res, next) {
  try {
    const ApplicationModel = MongoDBHelper.getCollection(
      collections.Application
    );
    // const address = req.body.RelatedPremises?.[0]?.AddressObject;
    // if (address) {
    if (req.body.RelatedPremise) {
      const blockId = req.body.RelatedPremise;
      const BsBlockModel = MongoDBHelper.getCollection(collections.BsBlock);
      const UserModel = MongoDBHelper.getCollection(collections.User);
      if (blockId) {
        const matchBlockId = await BsBlockModel.findOne({ blockId: blockId });
        req.body.assignedBS = (
          await UserModel.findOne({
            role: "BS",
            bdgis: matchBlockId.bdgis,
          })
        )?.position;
        if (req.body.assignedBS) {
          req.body.assignedSBS = await UserModel.find({
            team: req.body.assignedBS,
            role: "SBS",
          })?.position;
          req.body.assignedGR = await UserModel.find({
            team: req.body.assignedBS,
            role: "GR",
          })?.position;
        }
      }
      // find child cases without case officer
      const CaseModel = MongoDBHelper.getCollection(collections.Case);
      const TaskModel = MongoDBHelper.getCollection(collections.Task);
      const unhandledCases = await CaseModel.find({
        application: req.params.applicationId,
        caseOfficerReceive: null,
      });
      for (const caseItem of unhandledCases) {
        await CaseModel.update(
          { _id: caseItem._id },
          {
            caseOfficerReceive: req.body.assignedBS,
            caseOfficerReply: req.body.assignedBS,
            seniorCaseOfficerReceive: req.body.assignedSBS,
            seniorCaseOfficerReply: req.body.assignedSBS,
            assignedGR: req.body.assignedGR,
            team: req.body.assignedBS,
          }
        );
        const teamMembers = await UserModel.find({
          team: req.body.assignedBS,
        });
        const teamGroup = {
          SO: teamMembers.find((user) => user.role == "SO"),
          TO: teamMembers.find((user) => user.role == "TO"),
          SE: teamMembers.find((user) => user.role == "SE"),
          BS: teamMembers.find((user) => user.role == "BS"),
          SSE: teamMembers.find((user) => user.role == "SSE"),
          SBS: teamMembers.find((user) => user.role == "SBS"),
          CBS: teamMembers.find((user) => user.role == "CBS"),
        };
        // update case tasks
        let catNature =
          caseItem.Nature +
          caseItem.Category +
          (caseItem?.ViaSCS ? "VIASCS" : "");
        if (!catNature || !possibleCatNature.includes(catNature)) {
          catNature = "NEWSCH";
        }
        await TaskModel.deleteMany({ submissionCase: caseItem._id });
        let newTasks = TASKS.filter((task) =>
          task.catNature?.includes(catNature)
        ).map((task) => {
          let taskDetails = {
            taskType: task.type,
            application: application._id,
            submissionCase: caseItem._id,
            user:
              (teamGroup && teamGroup[task.doneBy]?.position) || "UNASSIGNED",
            team,
            status: task.defaultStatus || "INACTIVE",
          };
          return taskDetails;
        });
        const insertedTasks = await TaskModel.insertMany(newTasks);
      }
    }
    // const filter = mongoose.isValidObjectId(req.params.applicationId)
    //   ? { _id: req.params.applicationId }
    //   : {
    //       ApplicationNo: req.params.applicationId,
    //     };
    const application = await ApplicationModel.findOneAndUpdate(
      { _id: req.params.applicationId },
      { ...req.body },
      { new: true }
    );
    if (req.body.assignedGR) {
      const TaskModel = MongoDBHelper.getCollection(collections.Task);
      await TaskModel.update(
        {
          taskType: "CREATE_APPLICATION_CASE",
          application: req.params.applicationId,
          status: "ACTIVE",
        },
        { user: req.body.assignedGR }
      );
    }
    console.log(application);
    res.send(application);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* GET application cases by ID. */
router.get("/:applicationId/cases", async function (req, res, next) {
  try {
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    const SysFileRefModel = MongoDBHelper.getCollection(collections.SysFileRef);
    const cases = await CaseModel.find({
      application: req.params.applicationId,
    })
      .sort({ createdAt: -1 })
      .populate("caseOfficerReceive");
    // Fetch E-folio of the cases
    const casesWithEfolio = await Promise.all(
      cases.map(async (caseItem) => {
        const efolioAttachment = await AttachmentModel.findOne({
          submissionCase: caseItem._id,
          type: AttachemntType.CREATE_CASE,
        });

        // Find the file ref display
        const fileReference = await SysFileRefModel.findOne({
          sysFileRefId: efolioAttachment?.sysFileRefId,
        });

        return {
          ...caseItem.toObject(),
          efolio: efolioAttachment?.efolio,
          filePartNo: efolioAttachment?.filePartNo,
          fileReference: fileReference?.display,
        };
      })
    );

    res.send(casesWithEfolio);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* POST create case */
router.post("/:applicationId/cases", async function (req, res, next) {
  try {
    const ApplicationModel = MongoDBHelper.getCollection(
      collections.Application
    );
    const UserModel = MongoDBHelper.getCollection(collections.User);
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    const NotificationModel = MongoDBHelper.getCollection(
      collections.Notification
    );
    const application = await ApplicationModel.findOne({
      _id: req.params.applicationId,
    });
    // console.log("Assigned BS", application.assignedBS);
    if (application) {
      // console.log("CCC Application", application);
      let team = "UNASSIGNED";
      let teamGroup = null;
      if (req.body.caseOfficerReceive) {
        team = req.body.caseOfficerReceive;
        const teamMembers = await UserModel.find({
          team,
        });
        teamGroup = {
          SO: teamMembers.find((user) => user.role == "SO"),
          TO: teamMembers.find((user) => user.role == "TO"),
          SE: teamMembers.find((user) => user.role == "SE"),
          BS: teamMembers.find((user) => user.role == "BS"),
          SSE: teamMembers.find((user) => user.role == "SSE"),
          SBS: teamMembers.find((user) => user.role == "SBS"),
          CBS: teamMembers.find((user) => user.role == "CBS"),
        };
      }
      const possibleCatNature = [
        ...new Set(TASKS.map((task) => task.catNature).flat()),
      ];

      const { Nature, Category, ViaSCS } = req.body;
      let catNature = Nature + Category + (ViaSCS ? "VIASCS" : "");
      console.log("Before catNature", catNature);
      if (!catNature || !possibleCatNature.includes(catNature)) {
        catNature = "NEWSCH";
      }

      const targetReplyDays = REPLY_DAYS[catNature] || 7;
      console.log("Target Reply Days", targetReplyDays);
      let targetReplyDate = new Date();
      targetReplyDate.setDate(targetReplyDate.getDate() + targetReplyDays);
      console.log("Target Reply Date", targetReplyDate);
      // console.log("Group", teamGroup);
      const caseItem = await CaseModel.create({
        ...req.body,
        application: req.params.applicationId,
        caseOfficerReply: req.body.caseOfficerReceive,
        seniorCaseOfficerReply: req.body.seniorCaseOfficerReceive,
        team: team,
        TargetReplyDate: targetReplyDate,
      });

      // TODO: find all members
      // Create tasks

      console.log("CatNature", catNature);
      let newTasks = TASKS.filter((task) =>
        task.catNature?.includes(catNature)
      ).map((task) => {
        let taskDetails = {
          taskType: task.type,
          application: application._id,
          submissionCase: caseItem._id,
          user: (teamGroup && teamGroup[task.doneBy]?.position) || "UNASSIGNED",
          team,
          status: task.defaultStatus || "INACTIVE",
        };

        return taskDetails;

        // if (
        //   task.type == "CREATE_APPLICATION_CASE" ||
        //   task.type == "CREATE_CASE"
        // ) {
        //   taskDetails = {
        //     ...taskDetails,
        //     status: "COMPLETED",
        //   };
        // }
      });
      const insertedTasks = await TaskModel.insertMany(newTasks);
      const notifications = insertedTasks.map((task) => ({
        user: task.user,
        notificationType: NotificationType.NEW_TASK,
        task: task._id,
        requireSendEmail: false,
      }));
      const insertedNotifications = await NotificationModel.insertMany(
        notifications
      );
      console.log(caseItem);
      // create empty attachment for case
      const AttachmentModel = MongoDBHelper.getCollection(
        collections.Attachment
      );
      console.log("Application File Reference", application.FileReference);
      const efolioCount = await AttachmentModel.countDocuments({
        sysFileRefId: application.FileReference,
      });
      const attachment = await AttachmentModel.create({
        application: application._id,
        submissionCase: caseItem._id,
        sysFileRefId: application.FileReference,
        efolio: "" + (efolioCount + 1),
        type: AttachemntType.CREATE_CASE,
        receivedDate: new Date(),
      });
      console.log(attachment);
      res.send(caseItem);
    } else {
      next({ status: 400, message: "Application not ready to create case" });
    }
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* Add new application submission attachment. */
// router.post(
//   "/:applicationId/submissions/:submissionId/attachments",
//   upload.single("file"),
//   async function (req, res, next) {
//     if (!req.file) {
//       return res.status(400).send("No file uploaded.");
//     }
//     const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
//     const attachment = await AttachmentModel.create({
//       ...req.body,
//       application: req.params.applicationId,
//       submission: req.params.submissionId,
//       file: req.file,
//     });
//     console.log(attachment);
//     res.send(attachment);
//   },
// );

module.exports = router;

================
File: bd-scs-backend-backend-main/routes/attachments.js
================
require("dotenv").config();
var express = require("express");
var router = express.Router();
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const { hkpostSign } = require("../utils/hkpostUtils");
const fs = require("fs");
const multer = require("multer");
const path = require("path");
const { AttachemntType } = require("../models/Attachment");
const { lookup } = require("mime-types");
const axios = require("axios");
const sendEmail = require("../utils/sendEmail");
// Configure storage for uploaded files
const storage = multer.diskStorage({
  destination: function (req, file, cb) {
    cb(null, "uploads/"); // Directory to save uploaded files
  },
  filename: function (req, file, cb) {
    cb(null, Date.now() + path.extname(file.originalname)); // Append timestamp to avoid naming conflicts
  },
});
const upload = multer({ storage: storage });

const FRONTEND_API_URL = process.env.FRONTEND_API_URL;

/* Add attachment. */
router.post("/", upload.single("file"), async function (req, res, next) {
  try {
    if (!req.file) {
      return res.status(400).send("No file uploaded.");
    }
    const ApplicationModel = MongoDBHelper.getCollection(
      collections.Application
    );
    const application = await ApplicationModel.findOne({
      _id: req.body.application,
    });
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    let efolio = null;
    if (
      req.body.type === AttachemntType.CASE ||
      req.body.type === AttachemntType.PREPARE_LETTER
    ) {
      efolio = null;
    } else {
      const efolioCount = await AttachmentModel.countDocuments({
        sysFileRefId: application.FileReference,
        efolio: { $ne: null },
      });
      efolio = "" + (efolioCount + 1);
    }
    const attachment = await AttachmentModel.create({
      ...req.body,
      sysFileRefId: application.FileReference,
      efolio,
      file: req.file,
      receivedDate: new Date(),
    });
    console.log(attachment);
    res.send(attachment);
  } catch (err) {
    next(err);
  }
});

/* Update attachment. */
router.post(
  "/:attachmentId",
  upload.single("file"),
  async function (req, res, next) {
    try {
      let update = req.body;
      delete update.file;
      if (req.file) {
        update.file = req.file;
      }
      console.log(update, "update attachment");
      const AttachmentModel = MongoDBHelper.getCollection(
        collections.Attachment
      );
      const attachment = await AttachmentModel.findOneAndUpdate(
        { _id: req.params.attachmentId },
        update,
        { new: true }
      );
      console.log(attachment);
      res.send(attachment);
    } catch (err) {
      next(err);
    }
  }
);

/* DELETE attachment */
router.delete("/:attachmentId", async function (req, res, next) {
  try {
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    const attachment = await AttachmentModel.deleteOne({
      _id: req.params.attachmentId,
    });
    res.send(attachment);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* GET list attachments */
router.get("/", async function (req, res, next) {
  try {
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    const attachments = await AttachmentModel.find({ ...req.query });
    console.log(attachments);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* GET get attachment */
router.get("/:attachmentId", async function (req, res, next) {
  try {
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);

    const attachment = await AttachmentModel.findOne({
      _id: req.params.attachmentId,
    });

    if (!attachment) {
      return res.status(404).send("Attachment not found");
    }

    console.log(attachment);

    // Set headers for file download
    res.setHeader(
      "Content-Disposition",
      `attachment; filename=${attachment.file.originalname}`
    );
    res.setHeader("Content-Type", attachment.file.mimetype);
    var s = fs.createReadStream(attachment.file.path).on("error", (error) => {
      console.log("Read file error");
    });
    s.pipe(res);
    // res.send(attachment.file.path, { root: "." }, (err) => {
    //   if (err) {
    //     console.error("Error sending file:", err);
    //     res.status(500).send("Error downloading the file");
    //   }
    // });
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* Post sign attachment */
router.post(
  "/sign/:attachmentId",
  upload.single("file"),
  async function (req, res, next) {
    try {
      const AttachmentModel = MongoDBHelper.getCollection(
        collections.Attachment
      );
      const attachment = await AttachmentModel.findOne({
        _id: req.params.attachmentId,
      }).populate("application");
      if (!attachment) {
        return res.status(404).send("Attachment not found");
      }
      if (!attachment.application) {
        return res.status(400).send("Attachment does not have an application");
      }
      const application = attachment.application;
      let sign = req.body;
      delete sign.file;
      console.log(req.file, "req.file");

      if (req.file) {
        sign.file = req.file;
      }
      await hkpostSign(attachment, sign);
      // Change the Letter Signature task to complete
      const TaskModel = MongoDBHelper.getCollection(collections.Task);
      // Mark the letter signature task as complete
      await TaskModel.updateOne(
        {
          application: application._id,
          type: "LETTER_SIGNATURE",
          status: "ACTIVE",
        },
        { status: "COMPLETED" }
      );
      // Update frontend status
      // Send the file to frontend
      const formData = new FormData();
      formData.append("applicationNo", application.ApplicationNo);
      formData.append("submissionId", attachment.submissionCase);
      // Create blob from file
      const file = new Blob([fs.readFileSync(attachment.file.path)], {
        type: lookup(attachment.file.path),
      });
      formData.append("file", file, "Prepare_Letter.pdf");
      formData.append("updateType", "Prepare Letter");
      formData.append("stage", 3);
      await axios.post(
        `${FRONTEND_API_URL}/application/backend-update`,
        formData,
        { headers: { "Content-Type": "multipart/form-data" } }
      );
      await sendEmail(
        application.ApplicantEmail,
        `New reply: ${application.ApplicationNo}`,
        `
Dear Sir/Madam,
Please login LSCP to view the application reply.
 
The application  number is ${application.ApplicationNo}.
 
For enquiry, please contact us at telephone no. 2626 1616 (Handled by “1823”) or via email non-reply_LSCP@bd.gov.hk.

Please do not reply to this email as it comes from an automated mailbox.

Buildings Department
        `
      );
      res.send("Signed");
    } catch (e) {
      console.log(e);
      next(e);
    }
  }
);

/* Post issue letter. */
router.post("/:caseId/issueLetter", async function (req, res, next) {
  try {
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const caseItem = await CaseModel.findOne({ _id: req.params.caseId });
    if (caseItem) {
      const attachments = await AttachmentModel.find({
        type: "PREPARE_LETTER",
        submissionCase: req.params.caseId,
      }).sort({ subType: 1 });
      // Merge attachments which are docx into a single pdf file
      const pdfObject = await mergeDocxToPdf(attachments);
      if (pdfObject) {
        // Save the merged pdf file to the database
        const pdfAttachment = await AttachmentModel.findOneAndUpdate(
          {
            type: "ISSUE_LETTER",
            subType: "ISSUE_LETTER",
            application: caseItem.application,
            submissionCase: req.params.caseId,
          },
          { file: pdfObject },
          { upsert: true }
        );
        res.send("Letter issued");
      } else {
        next({ status: 400, message: "Cannot generate PDF" });
      }
    } else {
      next({ status: 400, message: "Case not found" });
    }
  } catch (err) {
    next(err);
  }
});

const mergeDocxToPdf = async (attachments) => {
  const fs = require("fs");
  const path = require("path");
  const { promisify } = require("util");
  const readFile = promisify(fs.readFile);
  const writeFile = promisify(fs.writeFile);
  const libre = require("libreoffice-convert");

  const { default: PDFMerger } = await import("pdf-merger-js");
  const pdfs = [];

  for (let i = 0; i < attachments.length; i++) {
    const attachment = attachments[i];
    const docxBuffer = await readFile(attachment.file.path);
    const timestamp = Date.now();
    const pdfPath = path.join(
      "uploads",
      `${attachment.file.filename.replace(".docx", "")}_${timestamp}.pdf`
    );

    // Convert DOCX to PDF using LibreOffice
    const pdfBuffer = await new Promise((resolve, reject) => {
      libre.convertWithOptions(
        docxBuffer,
        ".pdf",
        undefined,
        {
          sofficeBinaryPaths: [
            "/opt/libreoffice24.8/program/soffice",
            "/opt/libreoffice24.8/program",
            "/opt/libreoffice24.8",
          ],
        },
        (err, done) => {
          if (err) {
            reject(err);
          } else {
            resolve(done);
          }
        }
      );
    });

    await writeFile(pdfPath, pdfBuffer);
    pdfs.push(pdfPath);
  }

  // Merge PDF files
  const pdfMergeInstance = new PDFMerger();
  for (const pdf of pdfs) {
    const pdfBuffer = await readFile(pdf);
    await pdfMergeInstance.add(pdfBuffer);
  }
  const mergedPdfBuffer = await pdfMergeInstance.saveAsBuffer();
  // Remove temporary PDF files
  pdfs.forEach((pdf) => {
    fs.unlinkSync(pdf);
  });
  const timestamp = Date.now();
  const pdfPath = path.join("uploads", `issue ${timestamp}.pdf`);
  await writeFile(pdfPath, mergedPdfBuffer);

  return {
    fieldname: "file",
    originalname: `issue ${timestamp}.pdf`,
    encoding: "7bit",
    mimetype: "application/pdf",
    destination: "uploads/",
    filename: `issue ${timestamp}.pdf`,
    path: pdfPath,
    size: mergedPdfBuffer.length,
  };
};

module.exports = router;

================
File: bd-scs-backend-backend-main/routes/auth.js
================
var express = require("express");
var router = express.Router();
const OAuth2Server = require("oauth2-server");
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");

/* GET home page. */
router.post("/token", async function (req, res, next) {
  try {
    const OAuth2Server = require("oauth2-server");
    const oauth = new OAuth2Server({
      model: require("./OAuthModel"),
      grants: ["password", "refresh_token"],
      accessTokenLifetime: parseInt(process.env.ACCESS_TOKEN_LIFETIME),
      refreshTokenLifetime: parseInt(process.env.REFRESH_TOKEN_LIFETIME),
    });
    // Verify the login credentials at the very first
    let request = new OAuth2Server.Request(req);
    let response = new OAuth2Server.Response(res);
    let tokenInfo = await oauth.token(request, response);

    console.log("Body", req.body);
    if (req.body.grant_type == "refresh_token")
      return res.status(200).send(tokenInfo);
    // Check if the user has any delegated users
    const UserModel = MongoDBHelper.getCollection(collections.User);
    const user = await UserModel.findOne({
      osdpLoginId: req.body.username.toLowerCase(),
    }).lean();
    const delegateList = await UserModel.find({
      delegateTo: { $eq: user._id },
    }).select("name osdpLoginId password");

    if (delegateList.length > 0) {
      delegateList.push({
        _id: user._id,
        name: user.name,
        osdpLoginId: user.osdpLoginId,
        password: user.password,
      });
      if (!req.body.chosen_user) {
        return res.status(202).send(delegateList);
      } else {
        const chosen_user = delegateList.find(
          (user) => user._id.toString() === req.body.chosen_user
        );
        if (!chosen_user) {
          return res.status(401).send("Invalid delegation");
        } else {
          req.body.username = chosen_user.osdpLoginId;
          req.body.password = chosen_user.password;
          request = new OAuth2Server.Request(req);
          tokenInfo = await oauth.token(request, response);
        }
      }
    }

    return res.status(200).send(tokenInfo);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

module.exports = router;

================
File: bd-scs-backend-backend-main/routes/cases.js
================
var express = require("express");
var router = express.Router();
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const multer = require("multer");
const path = require("path");
const { ObjectId } = require("mongodb");
const axios = require("axios");
const { EminuteStatus } = require("../models/Eminute");
const { TASKS } = require("../config/task");
const { generateLetterTemplate } = require("../utils/letter");
const LETTER_TEMPLATES = require("../config/letterTemplates");
var stream = require("stream");
const { Readable } = require("stream");
const { AttachemntType } = require("../models/Attachment");
const { NotificationType } = require("../models/Notification");
const { type } = require("os");
// Configure storage for uploaded files
const storage = multer.diskStorage({
  destination: function (req, file, cb) {
    cb(null, "uploads/"); // Directory to save uploaded files
  },
  filename: function (req, file, cb) {
    cb(null, Date.now() + path.extname(file.originalname)); // Append timestamp to avoid naming conflicts
  },
});
const upload = multer({ storage: storage });

const filterCases = (cases, cat, nature, from, to) => {
  return cases.filter(
    (c) =>
      (!cat || c.Category == cat) &&
      (!nature || c.Nature == nature) &&
      (!from || (c.TargetReplyDate && c.TargetReplyDate >= from)) &&
      (!to || (c.TargetReplyDate && c.TargetReplyDate <= to))
  );
};

router.get("/caseSummary", async function (req, res, next) {
  try {
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const allCases = await CaseModel.find({}).populate(
      "application",
      "ApplicationType"
    );
    const newSchCount = filterCases(allCases, "SCH", "NEW").length;
    const revSchCount = filterCases(allCases, "SCH", "REV").length;
    const altSchCount = filterCases(allCases, "SCH", "ALT").length;
    const schoolCount = newSchCount + revSchCount + altSchCount;
    const newCccCount = filterCases(allCases, "CCC", "NEW").length;
    const revCccCount = filterCases(allCases, "CCC", "REV").length;
    const altCccCount = filterCases(allCases, "CCC", "ALT").length;
    const rnlCccCount = filterCases(allCases, "CCC", "RNL").length;
    const cccCount = newCccCount + revCccCount + altCccCount + rnlCccCount;
    const newNlheCount = filterCases(allCases, "NLHE", "NEW").length;
    const revNlheCount = filterCases(allCases, "NLHE", "REV").length;
    const altNlheCount = filterCases(allCases, "NLHE", "ALT").length;
    const nlheCount = newNlheCount + revNlheCount + altNlheCount;
    const currentDate = new Date();
    const sevenDaysAfter = new Date(currentDate);
    sevenDaysAfter.setDate(currentDate.getDate() + 7);
    const sevenDaysNewSchCount = filterCases(
      allCases,
      "SCH",
      "NEW",
      currentDate,
      sevenDaysAfter
    ).length;

    const sevenDaysRevSchCount = filterCases(
      allCases,
      "SCH",
      "REV",
      currentDate,
      sevenDaysAfter
    ).length;

    const sevenDaysAltSchCount = filterCases(
      allCases,
      "SCH",
      "ALT",
      currentDate,
      sevenDaysAfter
    ).length;

    const sevenDaysSchCount =
      sevenDaysNewSchCount + sevenDaysRevSchCount + sevenDaysAltSchCount;

    const sevenDaysNewCccCount = filterCases(
      allCases,
      "CCC",
      "NEW",
      currentDate,
      sevenDaysAfter
    ).length;

    const sevenDaysRevCccCount = filterCases(
      allCases,
      "CCC",
      "REV",
      currentDate,
      sevenDaysAfter
    ).length;

    const sevenDaysAltCccCount = filterCases(
      allCases,
      "CCC",
      "ALT",
      currentDate,
      sevenDaysAfter
    ).length;

    const sevenDaysRnlCccCount = filterCases(
      allCases,
      "CCC",
      "RNL",
      currentDate,
      sevenDaysAfter
    ).length;

    const sevenDaysCccCount =
      sevenDaysNewCccCount +
      sevenDaysRevCccCount +
      sevenDaysAltCccCount +
      sevenDaysRnlCccCount;

    const sevenDaysNewNlheCount = filterCases(
      allCases,
      "NLHE",
      "NEW",
      currentDate,
      sevenDaysAfter
    ).length;

    const sevenDaysRevNlheCount = filterCases(
      allCases,
      "NLHE",
      "REV",
      currentDate,
      sevenDaysAfter
    ).length;

    const sevenDaysAltNlheCount = filterCases(
      allCases,
      "NLHE",
      "ALT",
      currentDate,
      sevenDaysAfter
    ).length;

    const sevenDaysNlheCount =
      sevenDaysNewNlheCount + sevenDaysRevNlheCount + sevenDaysAltNlheCount;

    const overdueNewSchCount = filterCases(
      allCases,
      "SCH",
      "NEW",
      null,
      currentDate
    ).length;

    const overdueRevSchCount = filterCases(
      allCases,
      "SCH",
      "REV",
      null,
      currentDate
    ).length;

    const overdueAltSchCount = filterCases(
      allCases,
      "SCH",
      "ALT",
      null,
      currentDate
    ).length;

    const overdueSchCount =
      overdueNewSchCount + overdueRevSchCount + overdueAltSchCount;

    const overdueNewCccCount = filterCases(
      allCases,
      "CCC",
      "NEW",
      null,
      currentDate
    ).length;

    console.log(
      "overdue_cases_NEW_CCC",
      filterCases(allCases, "CCC", "NEW", null, currentDate).map(
        (c) => c.TargetReplyDate
      )
    );

    const overdueRevCccCount = filterCases(
      allCases,
      "CCC",
      "REV",
      null,
      currentDate
    ).length;

    console.log(
      "overdue_cases_REV_CCC",
      filterCases(allCases, "CCC", "REV", null, currentDate).map(
        (c) => c.TargetReplyDate
      )
    );

    const overdueAltCccCount = filterCases(
      allCases,
      "CCC",
      "ALT",
      null,
      currentDate
    ).length;

    console.log(
      "overdue_cases_ALT_CCC",
      filterCases(allCases, "CCC", "ALT", null, currentDate).map(
        (c) => c.TargetReplyDate
      )
    );

    const overdueRnlCccCount = filterCases(
      allCases,
      "CCC",
      "RNL",
      null,
      currentDate
    ).length;

    console.log(
      "overdue_cases_RNL_CCC",
      filterCases(allCases, "CCC", "RNL", null, currentDate).map(
        (c) => c.TargetReplyDate
      )
    );

    const overdueCccCount =
      overdueNewCccCount +
      overdueRevCccCount +
      overdueAltCccCount +
      overdueRnlCccCount;

    const overdueNewNlheCount = filterCases(
      allCases,
      "NLHE",
      "NEW",
      null,
      currentDate
    ).length;

    const overdueRevNlheCount = filterCases(
      allCases,
      "NLHE",
      "REV",
      null,
      currentDate
    ).length;

    const overdueAltNlheCount = filterCases(
      allCases,
      "NLHE",
      "ALT",
      null,
      currentDate
    ).length;

    const overdueNlheCount =
      overdueNewNlheCount + overdueRevNlheCount + overdueAltNlheCount;

    const summary = {
      total: {
        sch: schoolCount,
        newsch: newSchCount,
        revsch: revSchCount,
        altsch: altSchCount,
        ccc: cccCount,
        newccc: newCccCount,
        revccc: revCccCount,
        altccc: altCccCount,
        rnlccc: rnlCccCount,
        nlhe: nlheCount,
        newnlhe: newNlheCount,
        revnlhe: revNlheCount,
        altnlhe: altNlheCount,
      },
      sevenDaysBeforeTargetReplyDate: {
        sch: sevenDaysSchCount,
        newsch: sevenDaysNewSchCount,
        revsch: sevenDaysRevSchCount,
        altsch: sevenDaysAltSchCount,
        ccc: sevenDaysCccCount,
        newccc: sevenDaysNewCccCount,
        revccc: sevenDaysRevCccCount,
        altccc: sevenDaysAltCccCount,
        rnlccc: sevenDaysRnlCccCount,
        nlhe: sevenDaysNlheCount,
        newnlhe: sevenDaysNewNlheCount,
        revnlhe: sevenDaysRevNlheCount,
        altnlhe: sevenDaysAltNlheCount,
      },
      overdue: {
        sch: overdueSchCount,
        newsch: overdueNewSchCount,
        revsch: overdueRevSchCount,
        altsch: overdueAltSchCount,
        ccc: overdueCccCount,
        newccc: overdueNewCccCount,
        revccc: overdueRevCccCount,
        altccc: overdueAltCccCount,
        rnlccc: overdueRnlCccCount,
        nlhe: overdueNlheCount,
        newnlhe: overdueNewNlheCount,
        revnlhe: overdueRevNlheCount,
        altnlhe: overdueAltNlheCount,
      },
    };
    if (allCases) {
      // console.log(allCases);
    } else {
      next({ status: 400, message: "Cannot fetch case" });
    }
    res.send(summary);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

router.get("/", async function (req, res, next) {
  try {
    const query = {};

    // Build the query dynamically based on the provided search parameters
    if (req.query.LicensingCaseNo) {
      try {
        query._id = new ObjectId(req.query.LicensingCaseNo);
      } catch (error) {
        // If it's not a valid ObjectId, you can return an error or handle it accordingly
        return res
          .status(400)
          .send({ error: "Invalid Licensing Case Number format." });
      }
    }
    if (req.query.ApplicationNo) {
      const ApplicationModel = MongoDBHelper.getCollection(
        collections.Application
      );
      const applications = await ApplicationModel.find({
        ApplicationNo: {
          $regex: req.query.ApplicationNo,
          $options: "i",
        },
      });
      query.application = {
        $in: applications.map((app) => app._id),
      };
    }

    if (req.query.Category) {
      query.Category = {
        $regex: req.query.Category,
        $options: "i",
      };
    }
    if (req.query.Nature) {
      query.Nature = {
        $regex: req.query.Nature,
        $options: "i",
      };
    }
    if (req.query.FileReference) {
      query.FileReference = {
        $regex: req.query.FileReference,
        $options: "i",
      };
    }
    if (req.query.overdue) {
      query.TargetReplyDate = {
        $lte: new Date(),
      };
    } 
    if (req.query.sevenDaysBeforeTargetReplyDate) {
      query.TargetReplyDate = {
        $gte: new Date(),
        $lte: new Date(new Date().setDate(new Date().getDate() + 7)),
      };
    } 

    const CaseModel = MongoDBHelper.getCollection(collections.Case);

    const cases = await CaseModel.find(query).sort({
      createdAt: -1,
    });
    res.send(cases);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* GET case by ID. */
router.get("/:caseId", async function (req, res, next) {
  try {
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    const SysFileRefModel = MongoDBHelper.getCollection(collections.SysFileRef);
    const caseItem = await CaseModel.findOne({ _id: req.params.caseId })
      .populate("application")
      .populate("caseOfficerReceive", "name position")
      .lean();

    // Get the file reference if any
    if (caseItem?.application?.FileReference) {
      const sysFileRef = await SysFileRefModel.findOne({
        sysFileRefId: caseItem.application.FileReference,
      });

      caseItem.FileReference = sysFileRef?.display;
    }

    // Find the address
    // Get the related Premise details from frontend
    console.log("CaseItem", caseItem.application);
    if (caseItem?.application.RelatedPremise) {
      const relatedPremiseDetails = (
        await axios.post(
          `${process.env.FRONTEND_API_URL}/application/find-address`,
          {
            BuildingId: caseItem.application.RelatedPremise,
          }
        )
      )?.data?.data?.[0];
      caseItem.RelatedPremiseType = relatedPremiseDetails.bt_e;
      caseItem.District = relatedPremiseDetails.district_e;
      caseItem.Region = relatedPremiseDetails.region_e;
      caseItem.Area = relatedPremiseDetails.area_e;
    }

    if (caseItem) {
      const attachments = await AttachmentModel.find({
        submissionCase: req.params.caseId,
        type: AttachemntType.CASE,
      });

      caseItem.attachments = attachments;
      const site_inspection = await AttachmentModel.findOne({
        submissionCase: req.params.caseId,
        type: AttachemntType.INSPECTION_REPORT,
      });

      const prepareLetter = await AttachmentModel.find({
        submissionCase: req.params.caseId,
        type: AttachemntType.PREPARE_LETTER,
      });

      const issueLetter = await AttachmentModel.find({
        submissionCase: req.params.caseId,
        type: AttachemntType.ISSUE_LETTER,
      });

      caseItem.site_inspection = site_inspection;

      caseItem.prepareLetter = prepareLetter;

      caseItem.issueLetter = issueLetter;
      const tasks = await TaskModel.find({ submissionCase: req.params.caseId });
      caseItem.tasks = tasks
        .map((t) => {
          const taskDetails = TASKS.find((task) => task.type === t.taskType);
          return { ...t.toObject(), ...taskDetails };
        })
        .sort((a, b) => a.zIndex - b.zIndex);
      res.send(caseItem);
    } else {
      next({ status: 400, message: "Case not found" });
    }
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* POST update case */
router.post("/:caseId", async function (req, res, next) {
  try {
    const SubmissionModel = MongoDBHelper.getCollection(collections.Submission);
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    const UserModel = MongoDBHelper.getCollection(collections.User);
    console.log(req.body);
    if (req.body.dv) {
      // check dv acceptable
      const adequacyOfExitsFromStoreysFail =
        req.body.dv.adequacyOfExitsFromStoreys.filter(
          (row) => row.checkingResult != "yes"
        );
      const adequacyOfStaircasesFail =
        req.body.dv.adequacyOfStaircasesResult.checkingResult.filter(
          (row) => row != "yes"
        );
      console.log(adequacyOfExitsFromStoreysFail, adequacyOfStaircasesFail);
      if (
        adequacyOfExitsFromStoreysFail.length > 0 ||
        adequacyOfStaircasesFail.length > 0
      ) {
        req.body.dv.acceptable = false;
      } else {
        req.body.dv.acceptable = true;
      }
    }
    if (req.body.caseOfficerReceive) {
      // TODO: update all related task user position
      // let team = req.body.caseOfficerReceive;
      // const teamMembers = await UserModel.find({
      //   team,
      // });
      // let teamGroup = {
      //   SO: teamMembers.find((user) => user.role == "SO"),
      //   TO: teamMembers.find((user) => user.role == "TO"),
      //   SE: teamMembers.find((user) => user.role == "SE"),
      //   BS: teamMembers.find((user) => user.role == "BS"),
      //   SSE: teamMembers.find((user) => user.role == "SSE"),
      //   SBS: teamMembers.find((user) => user.role == "SBS"),
      //   CBS: teamMembers.find((user) => user.role == "CBS"),
      // };
      // const tasks = await TaskModel.find({ submissionCase: req.params.caseId });
      // await Promise.all(
      //   tasks.map(async (task) => {
      //     const doneBy = TASKS.find((t) => t.type === task.taskType).doneBy;
      //     task.doneBy = teamGroup[doneBy].position || "UNASSIGNED";
      //     await TaskModel.findOneAndUpdate(
      //       { _id: task._id },
      //       { doneBy: teamGroup[task.progressType] },
      //     );
      //   }),
      // );
    }

    const caseItem = await CaseModel.findOneAndUpdate(
      { _id: req.params.caseId },
      { ...req.body, updatedAt: new Date() },
      { new: true }
    );
    console.log(caseItem);
    res.send(caseItem);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* GET letter templates  */
router.get("/:caseId/letterTemplate", async function (req, res, next) {
  try {
    // Get case data
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const caseData = await CaseModel.findOne({
      _id: req.params.caseId,
    })
      .populate("application")
      .lean();

    if (!caseData) {
      console.log("Case not found");
      return next({ status: 404, message: "Case not found" });
    }

    const templateBuffer = await generateLetterTemplate(
      req.query.type,
      caseData
    );
    if (!templateBuffer) {
      return next({ status: 400, message: "Invalid letter type" });
    }

    // Set headers for file download
    res.setHeader(
      "Content-Disposition",
      `attachment; filename=${LETTER_TEMPLATES[req.query.type].name}`
    );
    res.setHeader(
      "Content-Type",
      "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
    );
    // var s = Readable.from(templateBuffer);
    var readStream = new stream.PassThrough();
    readStream.end(templateBuffer);
    readStream.pipe(res);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* GET list eminutes  */
router.get("/:caseId/eminutes", async function (req, res, next) {
  try {
    const EminuteModel = MongoDBHelper.getCollection(collections.Eminute);
    const minutes = await EminuteModel.find({
      submissionCase: req.params.caseId,
    })
      .populate(["from", "to"])
      .lean();
    console.log(minutes);
    res.send(minutes);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* GET eminute by ID  */
router.get("/:caseId/eminutes/:eminuteId", async function (req, res, next) {
  try {
    const EminuteModel = MongoDBHelper.getCollection(collections.Eminute);
    const minute = await EminuteModel.findOne({
      _id: req.params.eminuteId,
      submissionCase: req.params.caseId,
    })
      .populate(["from", "to"])
      .lean();
    console.log(minute);
    res.send(minute);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* POST update eminute by ID  */
router.post("/:caseId/eminutes/:eminuteId", async function (req, res, next) {
  try {
    const EminuteModel = MongoDBHelper.getCollection(collections.Eminute);
    const minute = await EminuteModel.findOneAndUpdate(
      {
        _id: req.params.eminuteId,
        submissionCase: req.params.caseId,
      },
      { ...req.body },
      { new: true }
    )
      .populate(["from", "to"])
      .lean();
    const { status } = req.body;

    if (status == EminuteStatus.ENDORSED) {
      const TaskModel = MongoDBHelper.getCollection(collections.Task);
      const tasks = await TaskModel.find({ submissionCase: req.params.caseId });
      // Change task status if endorse action is matched
      await Promise.all(
        tasks.map(async (task) => {
          const taskDetails = TASKS.find((t) => t.type === task.taskType);
          const endorseAction = taskDetails.endorseAction;

          if (
            endorseAction &&
            endorseAction[0] == minute.from?.split("/")?.[0] &&
            endorseAction[1] == minute.to?.split("/")?.[0] &&
            endorseAction[2] == task.status
          ) {
            await TaskModel.findOneAndUpdate(
              { _id: task._id },
              { status: endorseAction[3] }
            );
          }
        })
      );
    }
    console.log(minute);
    res.send(minute);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* POST add eminutes  */
router.post("/:caseId/eminutes", async function (req, res, next) {
  try {
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    const ApplicationModel = MongoDBHelper.getCollection(
      collections.Application
    );
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const EminuteModel = MongoDBHelper.getCollection(collections.Eminute);
    const NotificationModel = MongoDBHelper.getCollection(
      collections.Notification
    );
    const caseItem = await CaseModel.findOne({
      _id: req.params.caseId,
    })
      .populate("application")
      .lean();
    if (caseItem) {
      const sysFileRefEminutesCount = await EminuteModel.countDocuments({
        sysFileRefId: caseItem.application.FileReference,
      });
      const caseEminutesCount = await EminuteModel.countDocuments({
        submissionCase: caseItem._id,
      });
      const eminute = await EminuteModel.create({
        submissionCase: caseItem._id,
        from: req.body.from,
        to: req.body.to,
        content: req.body.content,
        subject: req.body.subject,
        eminuteId: "E-" + String(caseEminutesCount).padStart(3, "0"),
        sysFileRefId: caseItem.application.FileReference,
        efolio: "" + (sysFileRefEminutesCount + 1),
        status: EminuteStatus.PENDING,
      });
      const notification = await NotificationModel.create({
        user: eminute.to,
        notificationType: NotificationType.NEW_EMINUTE,
        eminute: eminute._id,
        requireSendEmail: false,
      });
      // Check if any eminute action is matched
      const tasks = await TaskModel.find({ submissionCase: req.params.caseId });
      // Change task status if eminute action is matched
      await Promise.all(
        tasks.map(async (task) => {
          const taskDetails = TASKS.find((t) => t.type === task.taskType);
          console.log("Tasks", task.taskType, ":", taskDetails);
          const eminuteAction = taskDetails.eminuteAction;
          console.log(
            "Eminute",
            eminute.from?.split("/")?.[0],
            eminute.to?.split("/")?.[0],
            task.status,
            eminuteAction
          );
          if (
            eminuteAction &&
            eminuteAction[0] == eminute.from?.split("/")?.[0] &&
            eminuteAction[1] == eminute.to?.split("/")?.[0] &&
            eminuteAction[2] == task.status
          ) {
            await TaskModel.findOneAndUpdate(
              { _id: task._id },
              { status: eminuteAction[3] }
            );
          }
        })
      );

      res.send(eminute);
    } else {
      next({ status: 400, message: "Case not found" });
    }
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* Add case site inspection. */
router.post(
  "/:caseId/siteinspection",
  upload.single("file"),
  async function (req, res, next) {
    try {
      if (!req.file) {
        return res.status(400).send("No file uploaded.");
      }
      const AttachmentModel = MongoDBHelper.getCollection(
        collections.Attachment
      );
      const existingReport = await AttachmentModel.findOne({
        submissionCase: req.params.caseId,
        type: AttachemntType.INSPECTION_REPORT,
      });
      if (existingReport) {
        existingReport.file = req.file;
        existingReport.updatedAt = new Date();
        await existingReport.save();
        res.send(existingReport);
      } else {
        const CaseModel = MongoDBHelper.getCollection(collections.Case);
        const caseItem = await CaseModel.findOne({
          _id: req.params.caseId,
        }).populate("application");
        const efolioCount = await AttachmentModel.countDocuments({
          sysFileRefId: caseItem.application.FileReference,
        });
        const attachment = await AttachmentModel.create({
          application: caseItem.application,
          submissionCase: req.params.caseId,
          type: AttachemntType.INSPECTION_REPORT,
          sysFileRefId: caseItem.application.FileReference,
          efolio: "" + (efolioCount + 1),
          file: req.file,
          receivedDate: new Date(),
        });
        console.log(attachment);
        res.send(attachment);
      }
    } catch (err) {
      next(err);
    }
  }
);

/* Add case attachment. */
router.post(
  "/:caseId/attachments",
  upload.single("file"),
  async function (req, res, next) {
    try {
      console.log("FFFFFF", req.body);
      if (!req.file) {
        return res.status(400).send("No file uploaded.");
      }
      const AttachmentModel = MongoDBHelper.getCollection(
        collections.Attachment
      );
      const CaseModel = MongoDBHelper.getCollection(collections.Case);
      const caseItem = await CaseModel.findOne({ _id: req.params.caseId });
      if (caseItem) {
        // if (req.body.type === "PREPARE_LETTER") {
        //   const attachments = await AttachmentModel.find({
        //     type: "PREPARE_LETTER",
        //     subType: req.body.subType,
        //     submissionCase: req.params.caseId,
        //   });
        //   if (attachments.length > 0) {
        //     // replace existing letter
        //     console.log("Delete existing letter");
        //     await AttachmentModel.deleteMany({
        //       type: "PREPARE_LETTER",
        //       subType: req.body.subType,
        //       submissionCase: req.params.caseId,
        //     });
        //   }
        // }
        const attachment = await AttachmentModel.create({
          ...req.body,
          application: caseItem.application,
          submissionCase: req.params.caseId,
          file: req.file,
        });

        console.log(attachment);
        res.send(attachment);
      } else {
        next({ status: 400, message: "Case not found" });
      }
    } catch (err) {
      next(err);
    }
  }
);

/* Issue letter. */
router.post("/:caseId/issueLetter", async function (req, res, next) {
  try {
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const caseItem = await CaseModel.findOne({ _id: req.params.caseId });
    if (caseItem) {
      const attachments = await AttachmentModel.find({
        type: "PREPARE_LETTER",
        submissionCase: req.params.caseId,
      }).sort({ subType: 1 });
      // Merge attachments which are docx into a single pdf file
      const pdfObject = await mergeDocxToPdf(attachments);
      if (pdfObject) {
        // Save the merged pdf file to the database
        const pdfAttachment = await AttachmentModel.create({
          type: "ISSUE_LETTER",
          subType: "ISSUE_LETTER",
          application: caseItem.application,
          submissionCase: req.params.caseId,
          file: pdfObject,
        });
        console.log(pdfAttachment, "Letter issued");
        res.send("Letter issued");
      } else {
        next({ status: 400, message: "Cannot generate PDF" });
      }
    } else {
      next({ status: 400, message: "Case not found" });
    }
  } catch (err) {
    next(err);
  }
});

const mergeDocxToPdf = async (attachments) => {
  const fs = require("fs");
  const path = require("path");
  const { promisify } = require("util");
  const readFile = promisify(fs.readFile);
  const writeFile = promisify(fs.writeFile);
  const libre = require("libreoffice-convert");

  const { default: PDFMerger } = await import("pdf-merger-js");
  const pdfs = [];

  for (let i = 0; i < attachments.length; i++) {
    const attachment = attachments[i];
    const docxBuffer = await readFile(attachment.file.path);
    const timestamp = Date.now();
    const pdfPath = path.join(
      "uploads",
      `${attachment.file.filename.replace(".docx", "")}_${timestamp}.pdf`
    );

    // Convert DOCX to PDF using LibreOffice
    const pdfBuffer = await new Promise((resolve, reject) => {
      libre.convertWithOptions(
        docxBuffer,
        ".pdf",
        undefined,
        {
          sofficeBinaryPaths: [
            "/opt/libreoffice24.8/program/soffice",
            "/opt/libreoffice24.8/program",
            "/opt/libreoffice24.8",
          ],
        },
        (err, done) => {
          if (err) {
            reject(err);
          } else {
            resolve(done);
          }
        }
      );
    });

    await writeFile(pdfPath, pdfBuffer);
    pdfs.push(pdfPath);
  }

  // Merge PDF files
  const pdfMergeInstance = new PDFMerger();
  for (const pdf of pdfs) {
    const pdfBuffer = await readFile(pdf);
    await pdfMergeInstance.add(pdfBuffer);
  }
  const mergedPdfBuffer = await pdfMergeInstance.saveAsBuffer();
  // Remove temporary PDF files
  pdfs.forEach((pdf) => {
    fs.unlinkSync(pdf);
  });
  const timestamp = Date.now();
  const pdfPath = path.join("uploads", `merged_${timestamp}.pdf`);
  await writeFile(pdfPath, mergedPdfBuffer);
  return {
    fieldname: "file",
    originalname: `merged_${timestamp}.pdf`,
    encoding: "7bit",
    mimetype: "application/pdf",
    destination: "uploads/",
    filename: `merged_${timestamp}.pdf`,
    path: pdfPath,
    size: mergedPdfBuffer.length,
  };
};

module.exports = router;

================
File: bd-scs-backend-backend-main/routes/fileReferences.js
================
var express = require("express");
var router = express.Router();
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const multer = require("multer");
const path = require("path");

router.post("/", async function (req, res) {
  try {
    await MongoDBHelper.connectionDB();
    const SysFileRef = MongoDBHelper.getCollection(collections.SysFileRef);
    const { frefPref, frefSeq, frefYr, frefSuf } = req.body;
    let query = {};
    console.log("Body", req.body);
    if (frefPref) query.frefPref = frefPref;
    if (frefSeq) query.frefSeq = frefSeq;
    if (frefYr) query.frefYr = frefYr;
    if (frefSuf) query.frefSuf = frefSuf;
    const sysFileRefs = await SysFileRef.find(query).limit(30);
    res.json(sysFileRefs);
  } catch (error) {
    console.error("Error getting data:", error);
    res.status(500).send("Error getting data");
  }
});


router.post("/application-histories", async function (req, res) {
  try {
    await MongoDBHelper.connectionDB();
    const SysFileRef = MongoDBHelper.getCollection(collections.SysFileRef);
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    const { frefPref, frefSeq, frefYr, frefSuf } = req.body;
    let query = {};
    console.log("Body", req.body);
    if (frefPref) query.frefPref = frefPref;
    if (frefSeq) query.frefSeq = frefSeq;
    if (frefYr) query.frefYr = frefYr;
    if (frefSuf) query.frefSuf = frefSuf;
    const sysFileRefs = await SysFileRef.find(query);
    console.log("sysFileRefs", sysFileRefs);
    const attachments = await AttachmentModel.find({ 
      efolio: { $ne: null }, sysFileRefId: { $in: sysFileRefs.map((sysFileRef) => sysFileRef.sysFileRefId) } }).lean();
    res.json(attachments.map((attachment) => {
        const sysFileRef = sysFileRefs.find((sysFileRef) => sysFileRef.sysFileRefId === attachment.sysFileRefId);
        attachment.sysFileRefDisplay = sysFileRef.display;
        return attachment;
      }));
  } catch (error) {
    console.error("Error getting data:", error);
    res.status(500).send("Error getting data");
  }
});
module.exports = router;

================
File: bd-scs-backend-backend-main/routes/index.js
================
var express = require('express');
var router = express.Router();

/* GET home page. */
router.get('/', function(req, res, next) {
  res.render('index', { title: 'Express' });
});

module.exports = router;

================
File: bd-scs-backend-backend-main/routes/OAuthModel.js
================
const collections = require("../config/collections");
const MongoDBHelper = require("../utils/MongoDBHelper");

module.exports = {
  generateAccessToken: async function (client, user, scope) {
    console.log("OAuthServer", "generateAccessToken", client, user, scope);
    var jwt = require("jsonwebtoken");
    return jwt.sign(user, process.env.JWT_SECRET, {
      expiresIn: parseInt(process.env.ACCESS_TOKEN_LIFETIME),
    });
  },
  generateRefreshToken: async function (client, user, scope) {
    console.log("OAuthServer", "generateRefreshToken", client, user, scope);
    const { v4: uuidv4 } = require("uuid");
    return uuidv4();
  },
  getAccessToken: async function (accessToken) {
    console.log("OAuthServer", "getAccessToken", accessToken);
    const OAuthToken = MongoDBHelper.getCollection(collections.OAuthToken);
    const oauthToken = await OAuthToken.findOne({ accessToken })
      .populate("user")
      .lean();
    console.log("getAccessToken", oauthToken);
    return oauthToken;
  },
  revokeToken: async function (token) {
    console.log("OAuthServer", "revokeToken", token);
    const OAuthToken = MongoDBHelper.getCollection(collections.OAuthToken);
    const result = await OAuthToken.deleteOne({
      refreshToken: token.refreshToken,
    });
    console.log("revoke token result", result);
    return true;
  },
  getRefreshToken: async function (refreshToken) {
    console.log("OAuthServer", "getRefreshToken", refreshToken);
    const OAuthToken = MongoDBHelper.getCollection(collections.OAuthToken);
    const oauthToken = await OAuthToken.findOne({ refreshToken })
      .populate("user")
      .lean();
    console.log("getRefreshToken", oauthToken);
    return oauthToken;
  },
  getClient: async function (clientId, clientSecret) {
    console.log("OAuthServer", "getClient", clientId, clientSecret);
    // check clientId and clientSecret
    if (
      clientId == process.env.CLIENT_ID &&
      clientSecret == process.env.CLIENT_SECRET
    ) {
      return {
        id: clientId,
        grants: ["password", "refresh_token"],
      };
    }
  },
  getUser: async function (username, password) {
    console.log("OAuthServer", "getUser", username, password);
    const UserModel = MongoDBHelper.getCollection(collections.User);
    let user = await UserModel.findOne({
      osdpLoginId: username.toLowerCase(),
    }).lean();
    if (user) {
      // compare password
      if (user.lock) {
        throw new Error("Account locked");
      }
      var bcrypt = require("bcryptjs");
      var validPassword = bcrypt.compareSync(password, user.password);
      if (password == user.password || validPassword) {
        console.log("getUser", user);
        let update = { lastLoginAt: new Date() };
        user = await UserModel.findOneAndUpdate({ _id: user._id }, update, {
          new: true,
        }).lean();
        delete user.password;
        return user;
      }
    }
    return null;
  },
  saveToken: async function (token, client, user) {
    console.log("OAuthServer", "saveToken", token, client, user);
    const OAuthToken = MongoDBHelper.getCollection(collections.OAuthToken);
    const oauthtoken = new OAuthToken({
      ...token,
      client: client,
      user: user._id,
    });
    await oauthtoken.save();
    return {
      accessToken: oauthtoken.accessToken,
      accessTokenExpiresAt: oauthtoken.accessTokenExpiresAt,
      refreshToken: oauthtoken.refreshToken,
      refreshTokenExpiresAt: oauthtoken.refreshTokenExpiresAt,
      client,
      user,
    };
  },
  validateScope(user, client, scope) {
    console.log("OAuthServer", "validateScope", user, client, scope);
    return ["read", "write"];
  },
  verifyScope: async function (accessToken, scope) {
    console.log("OAuthServer", "verifyScope", accessToken, scope);
    return true;
  },
};

================
File: bd-scs-backend-backend-main/routes/submissions.js
================
var express = require("express");
var router = express.Router();
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const { SubmissionType } = require("../models/Submission");
const { TaskType } = require("../models/Task");

/* GET submission */
router.get("/:submissionId", async function (req, res, next) {
  try {
    const SubmissionModel = MongoDBHelper.getCollection(collections.Submission);
    const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);
    const submission = await SubmissionModel.findOne({
      _id: req.params.submissionId,
    })
      .populate(["assignedBS", "assignedGR"])
      .lean();
    const attachments = await AttachmentModel.find({
      submission: req.params.submissionId,
    }).lean();
    submission.attachments = attachments;
    console.log(submission);
    res.send(submission);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* POST assign GR */
router.post("/:submissionId/assignGR", async function (req, res, next) {
  try {
    const UserModel = MongoDBHelper.getCollection(collections.User);
    const SubmissionModel = MongoDBHelper.getCollection(collections.Submission);
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    let gr = req.body.gr;
    const user = await UserModel.findOne({
      _id: gr,
      role: "GR",
    }).lean();
    if (user) {
      const submission = await SubmissionModel.findOneAndUpdate(
        {
          _id: req.params.submissionId,
        },
        { assignedGR: user._id },
        { new: true },
      ).lean();
      const task = await TaskModel.create({
        application: submission.application,
        submission: submission._id,
        taskType: TaskType.GR_HANDLE,
        user: gr,
      });
      console.log(submission);
      res.send(submission);
    } else {
      next({ status: 400, message: "Invalid GR" });
    }
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* POST create case */
router.post("/:submissionId/case", async function (req, res, next) {
  try {
    const SubmissionModel = MongoDBHelper.getCollection(collections.Submission);
    const UserModel = MongoDBHelper.getCollection(collections.User);
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    const submission = await SubmissionModel.findOne({
      _id: req.params.submissionId,
    }).populate("assignedBS");
    if (submission && submission.assignedBS && submission.assignedGR) {
      let team = submission.assignedBS.team;
      const teamMembers = await UserModel.find({ team });
      const teamGroup = {
        SO: teamMembers.find((user) => user.role == "SO"),
        TO: teamMembers.find((user) => user.role == "TO"),
        SE: teamMembers.find((user) => user.role == "SE"),
        BS: teamMembers.find((user) => user.role == "BS"),
        SSE: teamMembers.find((user) => user.role == "SSE"),
        SBS: teamMembers.find((user) => user.role == "SBS"),
        CBS: teamMembers.find((user) => user.role == "CBS"),
      };
      const caseItem = await CaseModel.create({
        submission: req.params.submissionId,
        application: submission.application,
        team: team,
      });
      submission.submissionCase = caseItem._id;
      await submission.save();
      // TODO: find all members
      // Create tasks
      let tasks = [
        {
          taskType: TaskType.DESK_STUDY,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["SO"]?._id,
          team,
        },
        {
          taskType: TaskType.INITIAL_SITE_INSPECTION,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["SO"]?._id,
          team,
        },
        {
          taskType: TaskType.ENDORSE_SO_EMINUTES,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["BS"]?._id,
          team,
        },
        {
          taskType: TaskType.SEARCH_STRUCTURAL_DATA,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["TO"]?._id,
          team,
        },
        {
          taskType: TaskType.ENDORSE_TO_EMINUTES,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["SE"]?._id,
          team,
        },
        {
          taskType: TaskType.PREPARE_STRUCTURAL_ADVICE,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["SE"]?._id,
          team,
        },
        {
          taskType: TaskType.ENDORSE_SE_EMINUTES,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["SSE"]?._id,
          team,
        },
        {
          taskType: TaskType.CHECK_PLAN_AND_SITE_CONDITION,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["BS"]?._id,
          team,
        },
        {
          taskType: TaskType.PREPARE_LETTER_CERT,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["BS"]?._id,
          team,
        },
        {
          taskType: TaskType.ENDORSE_BS_EMINUTES,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["SBS"]?._id,
          team,
        },
        {
          taskType: TaskType.ENDORSE_LETTER_CERT,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["SBS"]?._id,
          team,
        },
        {
          taskType: TaskType.ENDORSE_OBJECTION_SPECIAL_CASE,
          application: submission.application,
          submission: submission._id,
          submissionCase: caseItem._id,
          user: teamGroup["CBS"]?._id,
          team,
        },
      ];
      const insertedTasks = await TaskModel.insertMany(tasks);
      console.log(caseItem);
      res.send(caseItem);
    } else {
      next({ status: 400, message: "Submission not ready to create case" });
    }
  } catch (e) {
    console.log(e);
    next(e);
  }
});

module.exports = router;

================
File: bd-scs-backend-backend-main/routes/tasks.js
================
var express = require("express");
var router = express.Router();
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const requireUser = require("../middlewares/requireUser");
const mongoose = require("mongoose");

/* GET task listing. */
router.get("/", async function (req, res, next) {
  try {
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    let filter = {};
    if (req.query.application) {
      filter.application = req.query.application;
    }
    if (req.query.case) {
      filter.submissionCase = req.query.case;
    }
    const tasks = await TaskModel.find(filter).populate(["application"]).sort({
      createdAt: -1,
    });
    res.send(tasks);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* GET my task listing. */
router.get("/me", requireUser, async function (req, res, next) {
  try {
    const TaskModel = MongoDBHelper.getCollection(collections.Task);

    let filter = {
      user: req.user.position,
    };
    if (req.user.role == "Pre-GR") {
      filter = { $or: [{ user: "UNASSIGNED" }, { user: req.user.position }] };
    } else {
      filter.user = req.user.position;
    }
    if (req.query.application) {
      filter.application = req.query.application;
    }
    if (req.query.submission) {
      filter.submission = req.query.submission;
    }
    if (req.query.case) {
      filter.submissionCase = req.query.case;
    }
    if (req.query.status) {
      filter.status = req.query.status;
    }

    const tasks = await TaskModel.find(filter).populate(["application"]).sort({
      createdAt: -1,
    });
    res.send(tasks);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

router.get("/my-case-status", requireUser, async function (req, res, next) {
  try {
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    const tasks = await TaskModel.aggregate([
      // Step 1: Filter by user
      {
        $match: {
          user: req.user.role == "Pre-GR" ? "UNASSIGNED" : req.user.position,
          status: { $eq: "ACTIVE" }, // Adjust this condition based on how you mark tasks as complete/incomplete
        },
      },
      // Step 2: Group tasks by caseId
      {
        $group: {
          _id: "$submissionCase", // Group by caseId
          oldestTask: { $first: "$$ROOT" }, // Get the first task for each case after sorting
        },
      },
      // Step 3: Sort the tasks by _id (ascending) to get the oldest task
      {
        $sort: { "oldestTask._id": 1 },
      },
      {
        $replaceRoot: { newRoot: "$oldestTask" },
      },
      // Step 5: Populate (lookup) case details from the 'cases' collection
      {
        $lookup: {
          from: "cases", // Collection name for cases
          localField: "submissionCase", // Field in 'tasks' collection referencing 'cases'
          foreignField: "_id", // Field in 'cases' collection that matches 'caseId'
          as: "caseDetails",
        },
      },
      // Step 6: Unwind the case details (since it's an array after $lookup)
      {
        $unwind: "$caseDetails",
      },
      // Step 7: Populate (lookup) application details from the 'applications' collection
      {
        $lookup: {
          from: "applications", // Collection name for applications
          localField: "application", // Assuming case has 'applicationId'
          foreignField: "_id", // Field in 'applications' collection that matches 'applicationId'
          as: "applicationDetails",
        },
      },
      // Step 8: Look up the file references for the application
      {
        $lookup: {
          from: "sysfilerefs", // Collection name for file references
          localField: "applicationDetails.FileReference", // Assuming application has 'fileReferenceId'
          foreignField: "sysFileRefId", // Field in 'file references' collection that matches 'applicationId'
          as: "fileReference",
        },
      },
      // Step 8: Unwind the application details (since it's an array after $lookup)
      {
        $unwind: "$applicationDetails",
      },
    ]);
    console.log("tasks", tasks);
    return res.send(tasks);
  } catch (err) {
    console.log("Case err", err);
    next(err);
  }
});

/* GET my team task listing. */
router.get("/team", requireUser, async function (req, res, next) {
  try {
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    if (!req.user.team) {
      return res.send([]);
    }
    let filter = {
      team: req.user.team,
    };
    if (req.query.application) {
      filter.application = req.query.application;
    }
    if (req.query.submission) {
      filter.submission = req.query.submission;
    }
    if (req.query.case) {
      filter.submissionCase = req.query.case;
    }
    const tasks = await TaskModel.find(filter)
      .populate(["application", "user"])
      .sort({
        createdAt: -1,
      });
    res.send(tasks);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* GET task by ID. */
router.get("/:taskId", async function (req, res, next) {
  try {
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    const task = await TaskModel.findOne({ _id: req.params.taskId });
    res.send(task);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

/* POST update task */
router.post("/:taskId", async function (req, res, next) {
  try {
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    const task = await TaskModel.findOneAndUpdate(
      { _id: req.params.taskId },
      { ...req.body },
      { new: true }
    );
    console.log(task);
    res.send(task);
  } catch (e) {
    console.log(e);
    next(e);
  }
});

module.exports = router;

================
File: bd-scs-backend-backend-main/routes/users.js
================
var express = require("express");
var router = express.Router();
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const requireUser = require("../middlewares/requireUser");
const bcrypt = require("bcryptjs");

/* GET my profile */
router.get("/me", requireUser, async function (req, res, next) {
  try {
    const UserModel = MongoDBHelper.getCollection(collections.User);
    const user = await UserModel.findOne({ _id: req.user._id }).select(
      "-password",
    );
    res.send(user);
  } catch (e) {
    next(e);
  }
});

/* GET my notifications */
router.get("/notification", requireUser, async function (req, res, next) {
  try {
    const NotificationModel = MongoDBHelper.getCollection(collections.Notification);
    const notifications = await NotificationModel.find({ user: req.user.position });
    res.send(notifications);
  } catch (e) {
    next(e);
  }
});

/* GET users listing. */
router.get("/", async function (req, res, next) {
  try {
    console.log("Query", req.query);
    const UserModel = MongoDBHelper.getCollection(collections.User);
    const users = await UserModel.find(req.query).select("-password");
    res.send(users);
  } catch (e) {
    next(e);
  }
});

/* GET user positions */
router.get("/positions", async function (req, res, next) {
  try {
    const UserModel = MongoDBHelper.getCollection(collections.User);
    let filter = {};
    if (req.query.role) filter.role = req.query.role;
    if (req.query.team) filter.team = req.query.team;
    const positions = await UserModel.find(filter).distinct("position");
    return res.send(positions);
  } catch (e) {
    next(e);
  }
});

/* GET user by ID. */
router.get("/:userId", async function (req, res, next) {
  try {
    const UserModel = MongoDBHelper.getCollection(collections.User);
    const user = await UserModel.findOne({ _id: req.params.userId }).select(
      "-password",
    );
    res.send(user);
  } catch (e) {
    next(e);
  }
});

/* POST create user. */
router.post("/", async function (req, res, next) {
  try {
    const UserModel = MongoDBHelper.getCollection(collections.User);
    const user = await UserModel.create({
      ...req.body,
      password: req.body.password && bcrypt.hashSync(req.body.password, 10),
    });
    console.log(user);
    res.send(user);
  } catch (e) {
    next(e);
  }
});

/* POST delegate user. */
router.patch("/:userId/delegate", async function (req, res, next) {
  try {
    console.log("I am here");
    const UserModel = MongoDBHelper.getCollection(collections.User);
    const user = await UserModel.findOneAndUpdate(
      { _id: req.params.userId },
      { delegateTo: req.body.delegateTo },
      { upsert: true },
    );
    console.log(user);
    res.status(201).send({
      success: true,
    });
  } catch (e) {
    next(e);
  }
});

/* POST update user by ID. */
router.post("/:userId", async function (req, res, next) {
  try {
    const UserModel = MongoDBHelper.getCollection(collections.User);
    let updatedUser = { ...req.body };

    if (updatedUser.password) {
      updatedUser.password = bcrypt.hashSync(req.body.password, 10);
    }
    const user = await UserModel.findOneAndUpdate(
      { _id: req.params.userId },
      {
        $set: updatedUser,
      },
      { new: true },
    );
    let { password, ...result } = user;
    return res.send(result);
  } catch (e) {
    next(e);
  }
});

module.exports = router;

================
File: bd-scs-backend-backend-main/scripts/assignUserType.js
================
// Assign user type to all users in the database
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");

const assignUserType = async () => {
  await MongoDBHelper.connectionDB();
  const UserModel = MongoDBHelper.getCollection(collections.User);
  const users = await UserModel.find();
  for (const user of users) {
    user.userType = "USER";
    await user.save();
  }
  console.log("User type assigned to all users");
};

assignUserType();

================
File: bd-scs-backend-backend-main/scripts/FixBsBlock.js
================
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");

const fixBsBlock = async () => {
  await MongoDBHelper.connectionDB();
  const BsBlockModel = MongoDBHelper.getCollection(collections.BsBlock);
  const BsBlockList = await BsBlockModel.find();
  for (const bsBlock of BsBlockList) {
    bsBlock.bdgis = bsBlock.bdgis.replace(/\s+/g, "").toUpperCase();
    await bsBlock.save();
  }
};

fixBsBlock();

================
File: bd-scs-backend-backend-main/scripts/importAdrFileRef.js
================
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const mongoose = require("mongoose");
const fs = require("fs");
const csv = require("csv-parser");
const path = require("path");
const csvFilePath = path.join(__dirname, "..", "adr_blk_fileref.csv");

// Function to insert rows from CSV into MongoDB
async function insertDataFromCSV() {
  await MongoDBHelper.connectionDB();
  const AdrBlkFileRef = MongoDBHelper.getCollection(collections.AdrBlkFileRef);
  const data = [];

  // Read the CSV file
  fs.createReadStream(csvFilePath)
    .pipe(csv())
    .on("data", (row) => {
      // Convert CSV fields to match schema
      data.push({
        adrBlkFileRefId: row.ADR_BLK_FILEREF_ID || null, // ADR_BLK_FILEREF_ID
        adrBlkId: row.ADR_BLK_ID || null, // ADR_BLK_ID
        sysFileRefId: row.SYS_FILE_REF_ID || null, // SYS_FILE_REF_ID
        createdDt: row.CREATED_DT ? new Date(row.CREATED_DT) : Date.now(), // CREATED_DT
        createdPost: row.CREATED_POST || null, // CREATED_POST
        createdName: row.CREATED_NAME || null, // CREATED_NAME
        createdSection: row.CREATED_SECTION || null, // CREATED_SECTION
        lastModifiedDt: row.LAST_MODIFIED_DT
          ? new Date(row.LAST_MODIFIED_DT)
          : Date.now(), // LAST_MODIFIED_DT
        lastModifiedPost: row.LAST_MODIFIED_POST || null, // LAST_MODIFIED_POST
        lastModifiedName: row.LAST_MODIFIED_NAME || null, // LAST_MODIFIED_NAME
        lastModifiedSection: row.LAST_MODIFIED_SECTION || null, // LAST_MODIFIED_SECTION
      });
    })
    .on("end", async () => {
      console.log("CSV file successfully processed.");

      try {
        // Insert all rows into the database
        await AdrBlkFileRef.insertMany(data);
        console.log("Data inserted successfully!");
      } catch (error) {
        console.error("Error inserting data:", error);
      }
    })
    .on("error", (error) => {
      console.error("Error reading CSV file:", error);
    });
}

// Execute the function
insertDataFromCSV();

================
File: bd-scs-backend-backend-main/scripts/importBsBlock.js
================
const SHEET_NAME = "LU1_StructID";
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const XLSX = require("xlsx");
const importBsBlock = async (filePath) => {
  const workbook = XLSX.readFile(filePath);
  const sheet = workbook.Sheets[SHEET_NAME];
  const data = XLSX.utils.sheet_to_json(sheet);
  const bsBlockList = data
    .filter((row) => row["STRUCT_ID"] && row["CACODE"])
    .map((row) => ({
      blockId: row["STRUCT_ID"],
      bdgis: row["CACODE"],
    }));
  await MongoDBHelper.connectionDB();
  const BsBlockModel = MongoDBHelper.getCollection(collections.BsBlock);
  await BsBlockModel.insertMany(bsBlockList);
};

importBsBlock("./scripts/LU1.xlsx");

================
File: bd-scs-backend-backend-main/scripts/importFileRef.js
================
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const mongoose = require("mongoose");
const fs = require("fs");
const csv = require("csv-parser");
const path = require("path");
const csvFilePath = path.join(__dirname, "..", "sys_file_ref.csv");

// Function to insert rows from CSV into MongoDB
async function insertDataFromCSV() {
  await MongoDBHelper.connectionDB();
  const SysFileRef = MongoDBHelper.getCollection(collections.SysFileRef);
  const data = [];

  // Read the CSV file
  fs.createReadStream(csvFilePath)
    .pipe(csv())
    .on("data", (row) => {
      // Convert CSV fields to match schema
      data.push({
        sysFileRefId: row.SYS_FILE_REF_ID || null,
        frefPref: row.FREF_PREF || null,
        frefSeq: row.FREF_SEQ || null,
        frefYr: row.FREF_YR || null,
        frefSuf: row.FREF_SUF || null,
        display: row.DISPLAY || null,
        dvExceed: row.DV_EXCEED || null,
        dvStatusDt: row.DV_STATUS_DT ? new Date(row.DV_STATUS_DT) : null,
        createdDt: row.CREATED_DT ? new Date(row.CREATED_DT) : Date.now(),
        createdPost: row.CREATED_POST || null,
        createdName: row.CREATED_NAME || null,
        createdSection: row.CREATED_SECTION || null,
        lastModifiedDt: row.LAST_MODIFIED_DT
          ? new Date(row.LAST_MODIFIED_DT)
          : Date.now(),
        lastModifiedPost: row.LAST_MODIFIED_POST || null,
        lastModifiedName: row.LAST_MODIFIED_NAME || null,
        lastModifiedSection: row.LAST_MODIFIED_SECTION || null,
      });
    })
    .on("end", async () => {
      console.log("CSV file successfully processed.");

      try {
        // Insert all rows into the database
        await SysFileRef.insertMany(data);
        console.log("Data inserted successfully!");
      } catch (error) {
        console.error("Error inserting data:", error);
      }
    })
    .on("error", (error) => {
      console.error("Error reading CSV file:", error);
    });
}

// Execute the function
insertDataFromCSV();

================
File: bd-scs-backend-backend-main/scripts/importTeam.js
================
const { BS_TEAM_MAPPINGS } = require("../config/user");
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");

// For each user, assign team based on the bs

const assignTeam = async () => {
  await MongoDBHelper.connectionDB();
  const UserModel = MongoDBHelper.getCollection(collections.User);
  const users = await UserModel.find({ position: { $exists: true } });
  const teams = Object.keys(BS_TEAM_MAPPINGS);
  for (const user of users) {
    const team = teams.find((team) => {
      // console.log("Team", team);
      // console.log("User Position", user.position);
      // console.log("BS_TEAM_MAPPINGS", BS_TEAM_MAPPINGS[team]);
      // console.log(
      //   "Object.values(BS_TEAM_MAPPINGS[team])",
      //   Object.values(BS_TEAM_MAPPINGS[team])
      // );
      // console.log(
      //   "Object.values(BS_TEAM_MAPPINGS[team]).includes(user.position)",
      //   Object.values(BS_TEAM_MAPPINGS[team]).includes(user.position)
      // );
      // console.log("team == user.position", team == user.position);
      // console.log(
      //   "team == user.position || Object.values(BS_TEAM_MAPPINGS[team]).includes(user.position)",
      //   team == user.position ||
      //     Object.values(BS_TEAM_MAPPINGS[team]).includes(user.position)
      // );
      return (
        team == user.position ||
        Object.values(BS_TEAM_MAPPINGS[team]).includes(user.position)
      );
    });
    console.log("User position", user.position, "Team", team);
    // if (team) {
    //   user.team = team;
    //   await user.save();
    // }
  }
  console.log("Team assigned to all users");
};

assignTeam();

================
File: bd-scs-backend-backend-main/scripts/importUsers.js
================
const SHEET_NAME = "Prepocessed user list";
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const XLSX = require("xlsx");

// Department	SCS user group	Name	OSDP email	Departmental Portal Department ID	LU office post name in BCIS	BDGIS 	user english name on BD letter	user chinese name on BD letter	position	position on BD letter	position (long form) on BD letter	position (long form) on BD letter in Chinese	tel on BD letter	email (receive SCS notifications)	internet email	internet email (by name check)	OSDP User ID
const XLSX_MONGO_MAPPING = {
  Department: "department",
  "SCS user group": "role",
  Name: "name",
  "OSDP email": "osdpEmail",
  "Departmental Portal Department ID": "departmentId",
  "LU office post name in BCIS": "luPostName",
  BDGIS: "bdgis",
  "user english name on BD letter": "letterName",
  "user chinese name on BD letter": "letterNameCn",
  position: "position",
  "position on BD letter": "letterPosition",
  "position (long form) on BD letter": "letterLongPosition",
  "position (long form) on BD letter in Chinese": "letterLongPositionCn",
  "tel on BD letter": "phoneNumber",
  "email (receive SCS notifications)": "notificationEmail",
  "internet email (by name check)": "email",
  "OSDP User ID": "osdpLoginId",
};

const importUsers = async (filePath) => {
  const workbook = XLSX.readFile(filePath);
  const sheet = workbook.Sheets[SHEET_NAME];
  const data = XLSX.utils.sheet_to_json(sheet);
  var bcrypt = require("bcryptjs");

  const users = data.map((row) => {
    const user = {};
    for (const key in row) {
      if (XLSX_MONGO_MAPPING[key]) {
        user[XLSX_MONGO_MAPPING[key]] = row[key];
      }
      // hash password
      user.password = bcrypt.hashSync("123456", 10);
    }
    return user;
  });
  await MongoDBHelper.connectionDB();
  const UserModel = MongoDBHelper.getCollection(collections.User);
  await UserModel.insertMany(users);
};

importUsers("./scripts/UserList.xlsx");

================
File: bd-scs-backend-backend-main/scripts/migrateGroupAndDepartment.js
================
// Copy group value to role
// Make department to BD

const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const { ROLES } = require("../models/User");

const migrationGroupAndDepartment = async () => {
  await MongoDBHelper.connectionDB();
  const UserModel = MongoDBHelper.getCollection(collections.User);
  const users = await UserModel.find();
  for (const user of users) {
    if (!user.role && user.group && Object.keys(ROLES).includes(user.group)) {
      console.log("user.group", user.group);
      user.role = user.group;
    }
    user.department = "BD";

    await user.save();
  }
};

migrationGroupAndDepartment();

================
File: bd-scs-backend-backend-main/scripts/setUpDb.js
================
const MongoDBHelper = require("../utils/MongoDBHelper");

const setUpDb = async () => {
  await MongoDBHelper.connectionDB();
};

module.exports = setUpDb;

================
File: bd-scs-backend-backend-main/scripts/syncFrontendSubmissions.js
================
require("dotenv").config();
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
const axios = require("axios");
const { TaskType } = require("../models/Task");
const sendEmail = require("../utils/sendEmail");
const mongoose = require("mongoose");
const { TASKS } = require("../config/task");
const { BCIS_CAT_NATURE_MAP } = require("../config/application");
const { lookup } = require("mime-types");
const fs = require("fs");
const { NotificationType } = require("../models/Notification");
const { AttachemntType } = require("../models/Attachment");
const REPLY_DAYS = require("../config/replyDays");
// Sync frontend submissions to the db
// A2, E2, CCCAI-MH3, CCCAI-C2, EDB-JOKC02 are the main forms that create new applications
// Others are for updating information, so the application should already exist

const FORMS = [
  "A2",
  "B2",
  "C2",
  "E2",
  "F2",
  "G2",
  "CCCAI-MH3",
  "EDB-JOKC02",
  "CCCAI-C2",
  "submit-doc",
  "inspect-req",
  "update-info",
  "appoint-ap",
  "withdraw-app",
];

const MAIN_FORMS = ["A2", "E2", "CCCAI-MH3", "CCCAI-C2", "EDB-JOKC02"];
const FRONTEND_API_URL = process.env.FRONTEND_API_URL;

const sync = async () => {
  console.log("Syncing submissions");
  try {
    await MongoDBHelper.connectionDB();
    const ApplicationModel = MongoDBHelper.getCollection(
      collections.Application
    );
    const TaskModel = MongoDBHelper.getCollection(collections.Task);
    const BsBlockModel = MongoDBHelper.getCollection(collections.BsBlock);
    const UserModel = MongoDBHelper.getCollection(collections.User);
    const CaseModel = MongoDBHelper.getCollection(collections.Case);
    const NotificationModel = MongoDBHelper.getCollection(
      collections.Notification
    );
    // Call frontend API to fetch unsyned submissions
    const response = await axios.get(
      `${FRONTEND_API_URL}/application/unsynced-submissions`
    );

    const submissions = response.data;
    console.log("SSS Submissions", submissions);
    for (const submission of submissions) {
      // Each submission sync is a transaction
      try {
        console.log(
          "Syncing submission; Application No: ",
          submission.ApplicationNo,
          "Form Name: ",
          submission.FormName,
          "Application Type: ",
          submission.ApplicationType
        );
        const { FormName, ApplicationNo } = submission;

        if (!FormName || !ApplicationNo) {
          throw new Error("Invalid submission");
        }
        if (FORMS.includes(FormName)) {
          const { Status, ...applicationData } = submission;

          if (MAIN_FORMS.includes(FormName)) {
            // Assign a BS based on blockID
            let assignedBS = null;
            let assignedSBS = null;
            let assignedGR = null;
            if (submission.BlockID) {
              const matchBlockId = await BsBlockModel.findOne({
                blockId: submission.BlockID,
              });
              assignedBS = (
                await UserModel.findOne({
                  role: "BS",
                  bdgis: matchBlockId.bdgis,
                })
              )?.position;
              if (assignedBS) {
                assignedSBS = (
                  await UserModel.findOne({
                    team: assignedBS,
                    role: "SBS",
                  })
                )?.position;
                assignedGR = (
                  await UserModel.findOne({
                    team: assignedBS,
                    role: "GR",
                  })
                )?.position;
              }
            }
            const APP13List = submission.APP13;
            const SelfObject = submission.SelfCertification;
            // Create a new application
            const newApplication = new ApplicationModel({
              ...applicationData,
              assignedBS: assignedBS,
              assignedSBS: assignedSBS,
              assignedGR: assignedGR,
              RelatedPremise: submission.BlockID,
              APP13: APP13List,
              SelfCertification: SelfObject,
            });
            await newApplication.save();
          }
          // Create a new case
          // Find the application by ApplicationNo
          const application = await ApplicationModel.findOne({
            ApplicationNo,
          });
          if (!application) {
            throw new Error("Application not found");
          }
          // SubmittedDate is the received date,
          const { SubmittedDate } = submission;

          let team = application.assignedBS;
          const BCIS_CAT_NATURE = BCIS_CAT_NATURE_MAP.find(
            (item) =>
              item.ApplicationType === application.ApplicationType &&
              item.FormName === FormName
          );
          const possibleCatNature = [
            ...new Set(TASKS.map((task) => task.catNature).flat()),
          ];

          let catNature = BCIS_CAT_NATURE?.nature + BCIS_CAT_NATURE?.category;
          console.log("Before catNature", catNature);
          if (!catNature || !possibleCatNature.includes(catNature)) {
            catNature = "NEWSCH";
          }
          const targetReplyDays = REPLY_DAYS[catNature] || 7;
          let targetReplyDate = new Date();
          targetReplyDate.setDate(targetReplyDate.getDate() + targetReplyDays);
          console.log();
          const caseItem = await CaseModel.create({
            application: application._id,
            caseOfficerReceive: application.assignedBS,
            caseOfficerReply: application.assignedBS,
            seniorCaseOfficerReceive: application.assignedSBS,
            seniorCaseOfficerReply: application.assignedSBS,
            assignedGR: application.assignedGR,
            Nature: BCIS_CAT_NATURE?.nature,
            Category: BCIS_CAT_NATURE?.category,
            ReceivedDate: SubmittedDate,
            TargetReplyDate: targetReplyDate,
            team: team,
          });

          // TODO: find all members
          // Create tasks

          let newTasks = [];
          if (team) {
            const teamMembers = await UserModel.find({
              team,
            });
            const teamGroup = {
              SO: teamMembers.find((user) => user.role == "SO"),
              TO: teamMembers.find((user) => user.role == "TO"),
              SE: teamMembers.find((user) => user.role == "SE"),
              BS: teamMembers.find((user) => user.role == "BS"),
              SSE: teamMembers.find((user) => user.role == "SSE"),
              SBS: teamMembers.find((user) => user.role == "SBS"),
              CBS: teamMembers.find((user) => user.role == "CBS"),
            };
            newTasks = TASKS.filter((task) =>
              task.catNature?.includes(catNature)
            ).map((task) => {
              let taskDetails = {
                taskType: task.type,
                application: application._id,
                submissionCase: caseItem._id,
                user:
                  (teamGroup && teamGroup[task.doneBy]?.position) ||
                  "UNASSIGNED",
                team,
                status: task.defaultStatus || "INACTIVE",
              };
              return taskDetails;
            });
          } else {
            newTasks = TASKS.filter((task) =>
              task.catNature?.includes(catNature)
            ).map((task) => {
              let taskDetails = {
                taskType: task.type,
                application: application._id,
                submissionCase: caseItem._id,
                user:
                  task.type == "CREATE_APPLICATION_CASE" ? "UNASSIGNED" : null,
                team,
                status:
                  task.type == "CREATE_APPLICATION_CASE"
                    ? "ACTIVE"
                    : "INACTIVE",
              };
              return taskDetails;
            });
          }

          const insertedTasks = await TaskModel.insertMany(newTasks);
          const notifications = insertedTasks.map((task) => ({
            user: task.user,
            notificationType: NotificationType.NEW_TASK,
            task: task._id,
            requireSendEmail: false,
          }));
          const insertedNotifications = await NotificationModel.insertMany(
            notifications
          );
          console.log(caseItem);
          // create empty attachment for case
          const AttachmentModel = MongoDBHelper.getCollection(
            collections.Attachment
          );
          const efolioCount = await AttachmentModel.countDocuments({
            sysFileRefId: application.FileReference,
          });
          const attachment = await AttachmentModel.create({
            application: application._id,
            submissionCase: caseItem._id,
            sysFileRefId: application.FileReference,
            efolio: "" + (efolioCount + 1),
            type: AttachemntType.CREATE_CASE,
            receivedDate: new Date(),
          });
          console.log(attachment);
          console.log(`Synced submission - ${submission?.SubmissionId}`);

          // If it is A2 or E2, generate acknowledgement letter
          if (["A2", "E2"].includes(FormName)) {
            var formData = new FormData();
            formData.append("applicationNo", application.ApplicationNo);
            formData.append("submissionId", submission.SubmissionId);
            formData.append("stage", 1);

            const file = new Blob(
              [
                fs.readFileSync(
                  "letter_templates/acknowledgement_template.docx"
                ),
              ],
              {
                type: lookup("letter_templates/acknowledgement_template.docx"),
              }
            );

            formData.append("file", file, "Acknowledgement Letter.docx");

            formData.append("updateType", "Acknowledgement Letter");

            // Update frontend
            await axios.post(
              `${FRONTEND_API_URL}/application/backend-update`,
              formData,
              { headers: { "Content-Type": "multipart/form-data" } }
            );
          }
        } else {
          console.log(`Form ${FormName} not supported`);
        }
      } catch (error) {
        console.error(
          `Error syncing submission - ${submission?.SubmissionId}`,
          error
        );
      }
    }
  } catch (error) {
    console.error("Error fetching submissions", error);
    return;
  }
};

module.exports = { sync };

================
File: bd-scs-backend-backend-main/utils/application.js
================
const mongoose = require("mongoose");
const { APPLICATION_NO_TYPES } = require("../models/Application");
const MongoDBHelper = require("./MongoDBHelper");
const collections = require("../config/collections");

async function generateApplicationNo(applicationType) {
  const ApplicationModel = MongoDBHelper.getCollection(collections.Application);
  const year = new Date().getFullYear();
  if (!Object.keys(APPLICATION_NO_TYPES).includes(applicationType)) {
    return null;
  }
  const type = APPLICATION_NO_TYPES[applicationType];

  // Create a regex pattern to match application numbers starting with BYYYYTT
  const regexPattern = new RegExp(`^B${year}${type}`);

  // Query to find the last application matching the pattern
  const lastApplication = await ApplicationModel.findOne({
    ApplicationNo: { $regex: regexPattern },
  })
    .sort({ ApplicationNo: -1 }) // Sort in descending order to get the latest entry
    .exec();

  let count = 1; // Start from 1 if no previous applications are found

  if (lastApplication) {
    // Extract the count from the last application's number
    const lastCount = parseInt(lastApplication.ApplicationNo.slice(-5));
    count = lastCount + 1;
  }

  const paddedCount = count.toString().padStart(5, "0");
  const newApplicationNo = `B${year}${type}${paddedCount}`;

  return newApplicationNo;
}

module.exports = { generateApplicationNo };

================
File: bd-scs-backend-backend-main/utils/hkpostUtils.js
================
const fs = require("fs");
var P12Signer = require("@signpdf/signer-p12").P12Signer;
const MongoDBHelper = require("../utils/MongoDBHelper");
const collections = require("../config/collections");
var { PDFDocument, StandardFonts, rgb } = require("pdf-lib");
var pdflibAddPlaceholder =
  require("@signpdf/placeholder-pdf-lib").pdflibAddPlaceholder;
var signpdf = require("@signpdf/signpdf").default;

const hkpostSign = async (attachment, sign) => {
  const certFile = fs.readFileSync(sign.file.path);
  const certPassword = sign.password;
  console.log(certFile.length, "certFile");
  console.log(certPassword, "certPassword");
  var signer = new P12Signer(certFile, {
    passphrase: certPassword,
  });

  const UPLOAD_DIR = "/uploads";
  const targetFile = attachment.file.path;
  const AttachmentModel = MongoDBHelper.getCollection(collections.Attachment);

  const pdfBuffer = await signWithPlaceholder(
    targetFile,
    targetFile,
    {
      signatureLength: 9932,
    },
    signer,
    {
      x: 395,
      y: 390,
      pageNo: 1,
      fontSize: 12,
      displayText: "Signed By " + "user",
    }
  );

  const a = await AttachmentModel.findOneAndUpdate(
    { _id: attachment._id },
    { "file.signed": true },
    { new: true }
  );
};

const signWithPlaceholder = async (
  filePath,
  targetPath,
  placeholder = null,
  signer = null,
  visibleSignature = null
) => {
  console.log(filePath);
  var pdfBuffer = fs.readFileSync(filePath);
  let pdfDoc = await PDFDocument.load(pdfBuffer);

  if (visibleSignature) {
    const { x, y, pageNo, fontSize, displayText } = visibleSignature;
    const pages = pdfDoc.getPages();
    const firstPage = pages[pageNo];
    const { width, height } = firstPage.getSize();
    const helveticaFont = await pdfDoc.embedFont(StandardFonts.Helvetica);
    firstPage.drawText(displayText, {
      x: x,
      y: y,
      size: fontSize,
      font: helveticaFont,
      color: rgb(0, 0, 0),
    });
  }

  if (placeholder) {
    // Add a placeholder for a signature.
    pdflibAddPlaceholder({
      pdfDoc: pdfDoc,
      reason: "The user is declaring consent through JavaScript.",
      contactInfo: "signpdf@example.com",
      name: "John Doe",
      location: "Free Text Str., Free World",
      team: "Signority",
      byteRangePlaceholder: "**********",
      ...placeholder,
    });
  }

  if (placeholder || visibleSignature) {
    pdfBuffer = await pdfDoc.save();
  }

  if (signer) {
    pdfBuffer = await signpdf.sign(pdfBuffer, signer);
  }

  if (targetPath) {
    fs.writeFileSync(targetPath, pdfBuffer);
  }
  return pdfBuffer;
};

module.exports = { hkpostSign };

================
File: bd-scs-backend-backend-main/utils/letter.js
================
const fs = require("fs");
const { createReport } = require("docx-templates");
const { CAT_DESCRIPTIONS } = require("../config/cat");
const LETTER_TEMPLATES = require("../config/letterTemplates");
const { pre } = require("../models/Task");

const prepareMWS = (caseData) => {
  let result = [];
  // Structural BS - Q4 - The following MW are subjected to the control of the MWCS:
  for (let c of caseData?.structural_schnlhkinds?.q4?.options_cat1_1 ?? []) {
    result.push(
      CAT_DESCRIPTIONS["structural_schnlhkinds_q4_options_cat1_1"][c]
    );
  }
  for (let c of caseData?.structural_schnlhkinds?.q4?.options_cat1_2 ?? []) {
    result.push(
      CAT_DESCRIPTIONS["structural_schnlhkinds_q4_options_cat1_2"][c]
    );
  }
  for (let c of caseData?.structural_schnlhkinds?.q4?.options_cat1_3 ?? []) {
    result.push(
      CAT_DESCRIPTIONS["structural_schnlhkinds_q4_options_cat1_3"][c]
    );
  }
  for (let c of caseData?.structural_schnlhkinds?.q4?.options_cat1_4 ?? []) {
    result.push(
      CAT_DESCRIPTIONS["structural_schnlhkinds_q4_options_cat1_4"][c]
    );
  }
  // UBW - 1.3.1 The following MW are subjected to the control of the MWCS:
  for (let c of caseData?.ubw?.q1?.q3?.cat1_1 ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q1_q3_cat1_1"][c]);
  }
  return result;
};

const prepareUBW = (caseData) => {
  let result = [];
  // UBW - q1.options + q2.q1.options
  for (let c of caseData?.ubw?.q1?.options ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q1_options"][c]);
  }
  if (caseData?.ubw?.q1?.other) {
    result.push(caseData?.ubw?.q1?.other);
  }
  for (let c of caseData?.ubw?.q2?.q1?.option ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q2_q1_option"][c]);
  }
  if (caseData?.ubw?.q2?.q1?.other) {
    result.push(caseData?.ubw?.q2?.q1?.other);
  }
  return result;
};

const prepareCat1 = (caseData) => {
  let result = [];
  // Desk Study Q5 - Is the address of premises correctly described ?
  if (caseData?.deck_study?.q5?.answer_cat1) {
    result.push(CAT_DESCRIPTIONS["desk_study_q5_cat1"]);
  }
  // Structural BS - Q5 - Other General Conditions
  for (let c of caseData?.structural_schnlhkinds?.q5?.options_cat1 ?? []) {
    result.push(CAT_DESCRIPTIONS["structural_schnlhkinds_q5_options_cat1"][c]);
  }
  // Structural BS - Q6 - Additional comment from SE
  for (let c of caseData?.structural_schnlhkinds?.q6?.options_cat1 ?? []) {
    result.push(CAT_DESCRIPTIONS["structural_schnlhkinds_q6_options_cat1"][c]);
  }
  // FRC - 1.2b Is FRR certification required for the common internal corridor ?
  for (let c of caseData?.frc?.q1?.q2b?.cat1 ?? []) {
    result.push(CAT_DESCRIPTIONS["frc_q1_q2b_cat1"][c]);
  }
  // FRC - 2.1 Are the propsoed school premises and sub-divided non-licence area under the same manamgenet and control of applicant ?
  for (let c of caseData?.frc?.q2?.q1?.cat1 ?? []) {
    result.push(CAT_DESCRIPTIONS["frc_q2_q1_cat1"][c]);
  }
  // UBW - 1.3.1 The following MW are subjected to the control of the MWCS:
  for (let c of caseData?.ubw?.q1?.q3?.cat1_1 ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q1_q3_cat1_1"][c]);
  }
  // UBW - 1.3
  for (let c of caseData?.ubw?.q1?.q3?.cat1 ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q1_q3_cat1"][c]);
  }
  // UBW - 4 Any Dedicated area / Public Passage to be affected ?
  for (let c of caseData?.ubw?.q4?.cat1 ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q4_cat1"][c]);
  }
  // MISC - 1. 4 sets of duly signed revised plans to incorporate the following matters should be submitted:
  for (let c of caseData?.misc?.q1?.cat1 ?? []) {
    result.push(CAT_DESCRIPTIONS["misc_q1_cat1"][c]);
  }
  if (caseData?.misc?.q1?.cat1_other) {
    result.push(caseData?.misc?.q1?.cat1_other);
  }
  if (caseData?.misc?.q1?.cat1_1_other) {
    result.push(caseData?.misc?.q1?.cat1_1_other);
  }
  return result;
};

const prepareCat2_1b = (caseData) => {
  let result = [];
  for (let c of caseData?.ubw?.q2?.q1?.option ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q2_q1_cat2_1b"][c]);
  }
  if (caseData?.ubw?.q2?.q1?.other) {
    result.push(caseData?.ubw?.q2?.q1?.other);
  }
  // MISC - q1 - 2.1b
  if (caseData?.misc?.q1?.cat2_1b_other) {
    result.push(caseData?.misc?.q1?.cat2_1b_other);
  }
  return result;
};

const prepareCat2_3a = (caseData) => {
  let result = [];
  for (let c of caseData?.deck_study?.q4?.options_cat2_3a ?? []) {
    result.push(
      CAT_DESCRIPTIONS["desk_study_q4_cat2_3a"][c]?.replace(
        "+++bd_ref+++",
        caseData?.deck_study?.q4?.value_cat2_3a
      )
    );
  }

  return result;
};

const prepareCat2_1a = (caseData) => {
  let result = [];
  for (let c of caseData?.ubw?.q2?.q2?.cat2_1a ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q2_q2_cat2_1a"][c]);
  }
  if (caseData?.ubw?.q2?.q2?.other_cat2_1a) {
    result.push(caseData?.ubw?.q2?.q2?.other_cat2_1a);
  }
  // MISC - q1 - 2.1a
  if (caseData?.misc?.q1?.cat2_1a_other) {
    result.push(caseData?.misc?.q1?.cat2_1a_other);
  }
  return result;
};

const prepareCat2_3b = (caseData) => {
  let result = [];
  for (let c of caseData?.frc?.q2?.q2?.cat2_3b ?? []) {
    result.push(CAT_DESCRIPTIONS["frc_q2_q2_cat2_3b"][c]);
  }
  if (caseData?.frc?.q2?.q2?.cat2_3b_other) {
    result.push(caseData?.frc?.q2?.q2?.cat2_3b_other);
  }
  for (let c of caseData?.frc?.q3?.cat2_3b ?? []) {
    result.push(CAT_DESCRIPTIONS["frc_q3_cat2_3b"][c]);
  }
  if (caseData?.frc?.q3?.cat2_3b_other) {
    result.push(caseData?.frc?.q3?.cat2_3b_other);
  }
  for (let c of caseData?.frc?.q4?.cat2_3b ?? []) {
    result.push(CAT_DESCRIPTIONS["frc_q4_cat2_3b"][c]);
  }
  if (caseData?.frc?.q4?.cat2_3b_other) {
    result.push(caseData?.frc?.q4?.cat2_3b_other);
  }
  // MISC - q1 - 2.3b
  if (caseData?.misc?.q1?.cat2_3b_other) {
    result.push(caseData?.misc?.q1?.cat2_3b_other);
  }
  return result;
};

const prepareCat2_4 = (caseData) => {
  let result = [];
  for (let c of caseData?.ubw?.q1?.q3?.cat2_4 ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q1_q3_cat2_4"][c]);
  }
  if (caseData?.ubw?.q1?.q3?.cat2_4_other) {
    result.push(caseData?.ubw?.q1?.q3?.cat2_4_other);
  }
  for (let c of caseData?.ubw?.q3?.cat2_4 ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q3_cat2_4"][c]);
  }
  if (caseData?.ubw?.q3?.cat2_4_other) {
    result.push(caseData?.ubw?.q3?.cat2_4_other);
  }
  // MISC - q1 - 2.4
  if (caseData?.misc?.q1?.cat2_4_other) {
    result.push(caseData?.misc?.q1?.cat2_4_other);
  }
  return result;
};

const prepareCat2_2 = (caseData) => {
  let result = [];
  for (let c of caseData?.structural_schnlhkinds?.q3?.options_cat2_2a ?? []) {
    result.push(CAT_DESCRIPTIONS["structural_schnlhkinds_q3_cat2_2a"][c]);
  }
  if (caseData?.structural_schnlhkinds?.q3?.other_cat2_2a) {
    result.push(caseData?.structural_schnlhkinds?.q3?.other_cat2_2a);
  }
  // MISC - q1 - 2.2
  if (caseData?.misc?.q1?.cat2_2a_other) {
    result.push(caseData?.misc?.q1?.cat2_2a_other);
  }
  return result;
};

const prepareCat3 = (caseData) => {
  let result = [];
  // Check if it is an array
  for (let c of caseData?.structural_schnlhkinds?.q1?.options_cat3 ?? []) {
    result.push(CAT_DESCRIPTIONS["structural_schnlhkinds_q1_cat3"][c]);
  }

  for (let c of caseData?.structural_schnlhkinds?.q1?.options_cat3 ?? []) {
    result.push(CAT_DESCRIPTIONS["structural_schnlhkinds_q1_cat3"][c]);
  }

  if (caseData?.structural_schnlhkinds?.q1?.other_cat3) {
    result.push(caseData?.structural_schnlhkinds?.q1?.other_cat3);
  }

  for (let c of caseData?.frc?.q1?.q2a?.cat3 ?? []) {
    result.push(CAT_DESCRIPTIONS["frc_q1_q2a_cat3"][c]);
  }

  if (caseData?.frc?.q1?.q2a?.cat3_other) {
    result.push(caseData?.frc?.q1?.q2a?.cat3_other);
  }

  for (let c of caseData?.ubw?.q4?.cat3 ?? []) {
    result.push(CAT_DESCRIPTIONS["ubw_q4_cat3"][c]);
  }

  if (caseData?.ubw?.q4?.cat3_other) {
    result.push(caseData?.ubw?.q4?.cat3_other);
  }
  // MISC - q1 - 3
  if (caseData?.misc?.q1?.cat3_other) {
    result.push(caseData?.misc?.q1?.cat3_other);
  }
  return result;
};

const prepareFields = (caseData) => {
  return {
    mws: prepareMWS(caseData),
    ubws: prepareUBW(caseData),
    cat1: prepareCat1(caseData),
    cat2_1a: prepareCat2_1a(caseData),
    cat2_1b: prepareCat2_1b(caseData),
    cat2_2: prepareCat2_2(caseData),
    cat2_3a: prepareCat2_3a(caseData),
    cat2_3b: prepareCat2_3b(caseData),
    cat2_4: prepareCat2_4(caseData),
    cat3: prepareCat3(caseData),
    school_name: caseData?.school?.name,
    school_address: caseData?.school?.address,
    applicant_name: caseData?.applicant?.name,
    letter_date: new Date().toLocaleDateString(),
    app_no: caseData?.application?.ApplicationNo,
    surname: "Appleseed",
    bs_bdgis: "LIC12",
    bs_letter_name: "Tom Lee",
    bs_email: "",
  };
};

async function generateLetterTemplate(type, caseData) {
  // Get the letter template from the database
  if (!Object.keys(LETTER_TEMPLATES).includes(type)) {
    return null;
  }

  const template = fs.readFileSync(LETTER_TEMPLATES[type].path);
  const fields = prepareFields(caseData);
  console.log("Fields", fields);
  const buffer = await createReport({
    template,
    data: LETTER_TEMPLATES[type].fields.reduce((acc, field) => {
      acc[field] = fields[field];
      return acc;
    }, {}),

    fixSmartQuotes: true,
  });

  return buffer;
}

async function generateAppendixX(caseData) {
  // Get the appendix X template from the database
  const template = fs.readFileSync(LETTER_TEMPLATES["appendix_x"].path);

  const buffer = await createReport({
    template,

    data: {
      mws: [],
      cat1: [],
      cat2_1a: [],
      cat2_1b: [],
      cat2_2: [],
      cat2_3a: [],
      cat2_3b: [],
      cat2_4: [],
      cat3: [],
      school_name: "",
      school_address: "",
      applicant_name: "",
      letter_date: "",
    },
  });
  return buffer;
}

async function generateAppendixII(caseData) {
  // Get the appendix IIA template from the database
  const template = fs.readFileSync(LETTER_TEMPLATES["appendix_ii"].path);

  const buffer = await createReport({
    template,
    data: {},
  });
  console.log("Successfully generated Appendix II");
  return buffer;
}

async function generateAppendixXI(caseData) {
  // Get the appendix IIA template from the database
  const template = fs.readFileSync(LETTER_TEMPLATES["appendix_xi"].path);
  const buffer = await createReport({
    template,
    data: {},
  });

  return buffer;
}

async function generate8blNoObjection(caseData) {
  // Get the 8BL No Objection template from the database
  const template = fs.readFileSync(LETTER_TEMPLATES["8bl_no_objection"].path);
  const buffer = await createReport({
    template,
    data: {
      app_no: caseData?.application?.ApplicationNo,
      surname: "Appleseed",
      letter_date: new Date().toLocaleDateString(),
      bs_bdgis: "LIC12",
      bs_letter_name: "Tom Lee",
      bs_email: "tlee122@bd.gov.com",
    },
  });

  return buffer;
}

module.exports = {
  generateLetterTemplate,
  generate8blNoObjection,
  generateAppendixX,
  generateAppendixII,
  generateAppendixXI,
};

================
File: bd-scs-backend-backend-main/utils/MongoDBHelper.js
================
const mongoose = require("mongoose");
const path = require("path");
const collections = require("../config/collections");
let conn = null;
require("dotenv").config();

const connectionDB = async (registerExtraModels) => {
  // console.log("MongoDB", "Start Connection", process.env.MONGODB_URI);

  // TODO: fix all deprecation warnings
  // https://mongoosejs.com/docs/deprecations.html

  if (conn == null || conn.readyState != 1) {
    conn = mongoose.createConnection(process.env.MONGODB_URI, {
      // Buffering means mongoose will queue up operations if it gets
      // disconnected from MongoDB and send them when it reconnects.
      // With serverless, better to fail fast if not connected.
      appname: "ELarning-Serverless",
      serverSelectionTimeoutMS: 5000,
    });
    // `await`ing connection after assigning to the `conn` variable
    // to avoid multiple function calls creating new connections
    await conn.asPromise();
    for (const [key, value] of Object.entries(collections)) {
      registerModel(value, require(path.join(__dirname, `../models/${value}`)));
    }
    if (registerExtraModels) registerExtraModels(registerModel);
    // console.log("MongoDB", "New connection");
  } else {
    // console.log("MongoDB", "Used cache");
  }
  // console.log("MongoDB connection", conn);
  // console.log("MongoDB connection readyState", conn.readyState);
  // console.log("MongoDB", "Start Success");
};

let registerModel = (name, schema) => {
  return conn.model(name, schema);
};

let getCollection = (name) => {
  return conn.model(name);
};

let getConnection = () => {
  return conn;
};

module.exports = {
  connectionDB,
  getCollection,
  getConnection,
  registerModel,
  ObjectId: mongoose.Types.ObjectId,
  collections,
  Error: mongoose.Error,
};

================
File: bd-scs-backend-backend-main/utils/sendEmail.js
================
const { SESClient, SendEmailCommand } = require("@aws-sdk/client-ses");
const sesClient = new SESClient({ region: "ap-southeast-1" });

const createSendEmailCommand = (userEmail, subject, html) => {
  return new SendEmailCommand({
    Destination: {
      ToAddresses: Array.isArray(userEmail) ? userEmail : [userEmail],
    },
    Message: {
      Body: {
        Html: {
          Data: html,
        },
        Text: {
          Data: html,
        },
      },
      Subject: {
        Data: subject,
      },
    },
    Source: "info@ddroom.io",
  });
};

module.exports = async function (userEmail, subject, html) {
  try {
    const sendEmailCommand = createSendEmailCommand(userEmail, subject, html);
    const result = await sesClient.send(sendEmailCommand);
    console.log("sendEmail result", result);
    console.log("sendEmail done");
    return result;
  } catch (caught) {
    if (caught instanceof Error && caught.name === "MessageRejected") {
      const messageRejectedError = caught;
      return messageRejectedError;
    }
    throw caught;
  }
};

================
File: bd-scs-backend-backend-main/utils/SQLDBHelper.js
================
const { Sequelize } = require("sequelize");
require("dotenv").config();

console.log("DB_NAME", process.env.SQL_DB_NAME);
console.log("DB_USER", process.env.SQL_DB_USER);
console.log("DB_PASSWORD", process.env.SQL_DB_PASSWORD);
console.log("DB_HOST", process.env.SQL_DB_HOST);

const sequelize = new Sequelize(
  process.env.SQL_DB_NAME,
  process.env.SQL_DB_USER,
  process.env.SQL_DB_PASSWORD,
  {
    host: process.env.SQL_DB_HOST,
    dialect: process.env.SQL_DB_DIALECT,
  }
);

module.exports = sequelize;

================
File: bd-scs-backend-web-main/src/apis/application.js
================
import { request } from './index'

export const createApplication = (payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/applications`,
      data: payload,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const getApplication = (id) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'get',
      url: `/api/applications/${id}`,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const getSubmission = (submissionId) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'get',
      url: `/api/submissions/${submissionId}`,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const getSubmissions = (applicationId) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'get',
      url: `/api/applications/${applicationId}/submissions`,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const createSubmission = (applicationId, payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/applications/${applicationId}/submissions`,
      data: payload,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const updateApplication = (id, payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/applications/${id}`,
      data: payload,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const addAttachments = (applicationId, submissionId, payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/applications/${applicationId}/submissions/${submissionId}/attachments`,
      data: payload,
      headers: {
        'Content-Type': 'multipart/form-data',
      },
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const downloadAttachment = (attachmentId) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'get',
      url: `/api/attachments/${attachmentId}`,
      responseType: 'blob',
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const getAdrBlk = (filter) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `https://d18x58rnezl7fu.cloudfront.net/application/find-address`,
      // url: 'http://localhost:7001/application/find-address',
      data: filter,
    })
      .then((res) => {
        console.log(res)
        resolve(res.data)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const getApplicationHistory = (filter) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/file-references/application-histories`,
      data: filter,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const getFileReferences = (filter) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/file-references`,
      data: filter,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const assignGR = (id, payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/submissions/${id}/assignGR`,
      data: payload,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

================
File: bd-scs-backend-web-main/src/apis/auth.js
================
import { request } from './index'

export const login = (payload) => {
    return new Promise((resolve, reject) => {
        return request({
            method: 'post',
            url: `/api/auth/token`,
            data: payload,
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

================
File: bd-scs-backend-web-main/src/apis/case.js
================
import { request } from './index'
import axios from 'axios'

export const fetchCaseDetail = (id) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'get',
      url: `/api/cases/${id}`,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const createCase = (id, payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/applications/${id}/cases`,
      data: payload,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const createSiteInSpection = (id, payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/cases/${id}/siteinspection`,
      data: payload,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const updateCase = (id, payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/cases/${id}`,
      data: payload,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const createMinutes = (id, payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/cases/${id}/eminutes`,
      data: payload,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const fetchEMinutes = (caseId, id) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'get',
      url: `/api/cases/${caseId}/eminutes/${id}`,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const updateEMinutes = (caseId, id, payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/cases/${caseId}/eminutes/${id}`,
      data: payload,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const addAttachments = (payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/attachments`,
      data: payload,
      headers: {
        'Content-Type': 'multipart/form-data',
      },
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const deleteAttachment = (id) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'delete',
      url: `/api/attachments/${id}`,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const updateAttachment = (id, payload) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/attachments/${id}`,
      data: payload,
      headers: {
        'Content-Type': 'multipart/form-data',
      },
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const downloadAttachment = (attachmentId) => {
  console.log('attachmentId', attachmentId)
  return new Promise((resolve, reject) => {
    return request({
      method: 'get',
      url: `/api/attachments/${attachmentId}`,
      responseType: 'blob',
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

//TODO: delete?
export const getCaseSummary = () => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'get',
      url: `/api/cases/caseSummary`,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

export const issueLetter = (caseId) => {
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/attachments/${caseId}/issueLetter`,
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
  //   return new Promise((resolve, reject) => {
  //     return axios
  //       .post(`http://13.215.240.112:8080/attachments/${caseId}/issueLetter`)
  //       .then((res) => {
  //         resolve(res.data)
  //       })
  //       .catch((error) => {
  //         reject(error)
  //       })
  //   })
}

export const signAttachment = (id, payload) => {
  console.log('signAttachment', id, payload)
  return new Promise((resolve, reject) => {
    return request({
      method: 'post',
      url: `/api/attachments/sign/${id}`,
      data: payload,
      headers: {
        'Content-Type': 'multipart/form-data',
      },
    })
      .then((res) => {
        resolve(res)
      })
      .catch((error) => {
        reject(error)
      })
  })
}

================
File: bd-scs-backend-web-main/src/apis/letterTemplate.js
================
const LETTER_TEMPLATES = {
    appendix_x: {
        name: 'Appendix X Template',
    },
    appendix_ii: {
        name: 'Appendix II Template',
        path: 'letter_templates/lu_appendix_ii_template.docx',
    },
    appendix_xi: {
        name: 'Appendix XI Template',
        path: 'letter_templates/lu_appendix_xi_template.docx',
    },
    '8bl_no_objection': {
        name: '8BL No Objection Template',
        path: 'letter_templates/8bl_no_objection_template.docx',
    },
}

export { LETTER_TEMPLATES }

================
File: bd-scs-backend-web-main/src/apis/task.js
================
import { request } from './index'

export const getTask = (id) => {
    return new Promise((resolve, reject) => {
        return request({
            method: 'get',
            url: `/api/tasks/${id}`,
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

================
File: bd-scs-backend-web-main/src/apis/user.js
================
import { request } from './index'

export const fetchProfile = () => {
    return new Promise((resolve, reject) => {
        return request({
            method: 'get',
            url: `/api/users/me`,
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

export const createUser = (payload) => {
    return new Promise((resolve, reject) => {
        return request({
            method: 'post',
            url: `/api/users`,
            data: payload,
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

export const getUser = (id) => {
    return new Promise((resolve, reject) => {
        return request({
            method: 'get',
            url: `/api/users/${id}`,
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

export const getUserPositions = (filter = {}) => {
    return new Promise((resolve, reject) => {
        return request({
            method: 'get',
            url: `/api/users/positions`,
            params: filter,
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

export const getUsers = (filter = {}) => {
    return new Promise((resolve, reject) => {
        return request({
            method: 'get',
            url: `/api/users`,
            params: filter,
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

export const getMyTasks = (filter = {}) => {
    return new Promise((resolve, reject) => {
        return request({
            method: 'get',
            url: `/api/tasks/me`,
            params: filter,
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

export const updateTask = (id, data) => {
    return new Promise((resolve, reject) => {
        return request({
            method: 'post',
            url: `/api/tasks/${id}`,
            data: data,
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

export const updateUser = (id, payload) => {
    console.log(id, payload)
    return new Promise((resolve, reject) => {
        return request({
            method: 'post',
            url: `/api/users/${id}`,
            data: payload,
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

export const delegateUser = (id, payload) => {
    return new Promise((resolve, reject) => {
        return request({
            method: 'patch',
            url: `/api/users/${id}/delegate`,
            data: payload,
        })
            .then((res) => {
                resolve(res)
            })
            .catch((error) => {
                reject(error)
            })
    })
}

================
File: bd-scs-backend-web-main/src/App.test.js
================
import { render, screen } from "@testing-library/react";
import App from "./App";

test("renders learn react link", () => {
  render(<App />);
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});

================
File: bd-scs-backend-web-main/src/constants/colors.js
================
export default {
    main: 'rgb(68, 184, 186)',
    secondary: '#000',
    success: '#4CAF50',
    warning: '#ed6c02',
    red: '#ED4343',
    navy: '#1a6390',
    navyText: '#2E4765',
    darkGrey: 'rgb(91,91,91)',
    disabledText: '#a0a0a0',
    disabledBackground: '#f0f0f0',
    disabledBorder: '#a0a0a0',
    bgColor: 'rgb(236, 243, 245)',
}

================
File: bd-scs-backend-web-main/src/constants/index.js
================
export default {
  // apiEndPoint: 'http://13.215.240.112:8080/',
  apiEndPoint: 'https://www2.scs.bd.ccgo.hksarg/',
  // apiEndPoint: 'http://localhost:7002/',
  client_id: '253ba96831ff4a575fb78e5b2dd69962',
  client_secret: 'gUkXp2s5v8y/B?E(H+KbPeShVmYq3t6w',
  DATE_FORMAT: 'DD/MM/YYYY HH:mm',
}

================
File: bd-scs-backend-web-main/src/constants/letters.js
================
const LETTERS = {
    '8bl_no_objection': {
        name: '8BL No Objection',
    },
    appendix_x: {
        name: 'Appendix X',
    },
    appendix_ii: {
        name: 'Appendix II',
    },
    appendix_xi: {
        name: 'Appendix XI',
    },
}

export { LETTERS }

================
File: bd-scs-backend-web-main/src/constants/options.js
================
import i18n from 'src/i18n'

const departments = [
  { label: 'Buildings Department', id: 'BD' },
  { label: 'Education Bureau', id: 'EBD' },
  { label: 'Social Welfare Department', id: 'SWD' },
  { label: 'Education Bureau - JOKC', id: 'EBDC' },
]

const roles = [
  { label: 'Pre-GR', id: 'Pre-GR' },
  { label: 'GR', id: 'GR' },
  { label: 'SO', id: 'SO' },
  { label: 'BS', id: 'BS' },
  { label: 'SBS', id: 'SBS' },
  { label: 'CBS', id: 'CBS' },
  { label: 'TO', id: 'TO' },
  { label: 'SE', id: 'SE' },
  { label: 'SEE', id: 'SEE' },
  { label: 'EDB', id: 'EDB' },
  { label: 'SWD', id: 'SWD' },
  { label: 'EDB-JOKC', id: 'EDB-JOKC' },
  { label: 'IT', id: 'IT' },
]

const userTypes = [
  { label: 'Admin', id: 'ADMIN' },
  { label: 'Super Admin', id: 'SUPER_ADMIN' },
  { label: 'User', id: 'USER' },
]

const submissionTypes = [
  { label: 'Electronic', id: 'ELECTRONIC' },
  { label: 'Paper', id: 'PAPER' },
]

const positions = [
  { label: 'Clerical Officer', id: 'clerical-officer' },
  { label: 'Building Surveyor', id: 'building-surveyor' },
  { label: 'Senior Building Surveyor', id: 'senior-building-surveyor' },
  { label: 'Chief Building Surveyor', id: 'chief-building-surveyor' },
  { label: 'Technical Officer', id: 'technical-officer' },
  { label: 'Survey Officer', id: 'survey-officer' },
  { label: 'Structural Engineer', id: 'structural-engineer' },
  { label: 'Senor Structural Officer', id: 'senor-structural-officer' },
]

const RegTypes1 = [
  { label: 'AP(A)', id: 'APA' },
  { label: 'AP(E)', id: 'APE' },
  { label: 'AP(S)', id: 'APS' },
]

const RegTypes2 = [{ label: 'RSE', id: 'RSE' }]

const RegTypes3 = [
  { label: 'AP(A)', id: 'APA' },
  { label: 'AP(E)', id: 'APE' },
  { label: 'AP(S)', id: 'APS' },
  { label: 'RSE', id: 'RSE' },
]

const SchoolCategory = [
  { label: i18n.t('schoolOptions.kinderg', { ns: 'form' }), id: 'kinderg' },
  { label: i18n.t('schoolOptions.primary', { ns: 'form' }), id: 'primary' },
  {
    label: i18n.t('schoolOptions.secondary', { ns: 'form' }),
    id: 'secondary',
  },
  {
    label: i18n.t('schoolOptions.tutorial_sch', { ns: 'form' }),
    id: 'tutorial_sch',
  },
  {
    label: i18n.t('schoolOptions.other_sch', { ns: 'form' }),
    id: 'other_sch',
  },
]

const StudentAge = [
  {
    label: i18n.t('studentAgeOptions.3above', { ns: 'form' }),
    id: '3above',
  },
  {
    label: i18n.t('studentAgeOptions.6above', { ns: 'form' }),
    id: '6above',
  },
]

const Title = [
  { label: i18n.t('titleOptions.mr', { ns: 'form' }), id: 'mr' },
  { label: i18n.t('titleOptions.mrs', { ns: 'form' }), id: 'mrs' },
  { label: i18n.t('titleOptions.miss', { ns: 'form' }), id: 'miss' },
  { label: i18n.t('titleOptions.ms', { ns: 'form' }), id: 'ms' },
]

const Applications = {
  NEWSCH: 'a2',
  EXTSCH: 'e2',
  NEWCCC: 'cccaic2',
  NEWJOKC: 'jokc02',
  NEWMUT: 'cccaimh3',
}

const Category = { SCH: 'SCH', NLHE: 'NLHE', CCC: 'CCC' }

const Nature = { NEW: 'NEW', REV: 'REV', ALT: 'ALT' }

export {
  departments,
  roles,
  userTypes,
  positions,
  RegTypes1,
  RegTypes2,
  RegTypes3,
  SchoolCategory,
  StudentAge,
  Title,
  Applications,
  Category,
  Nature,
  submissionTypes,
}

================
File: bd-scs-backend-web-main/src/constants/tasks.js
================
const TaskTitle = {
  INITIAL_SITE_INSPECTION: 'Initial Site Inspection',
  ENDORSE_SO_EMINUTES: 'Endorse SO Eminutes',
  ENDORSE_TO_EMINUTES: 'Endorse TO Eminutes',
  ENDORSE_SE_EMINUTES: 'Endorse SE Eminutes',
  ENDORSE_BS_EMINUTES: 'Endorse SE Eminutes',
  PREPARE_STRUCTURAL_ADVICE: 'Prepare Stuctual Advice',
  CHECK_PLAN_AND_SITE_CONDITION: 'Check plan and site condition',
  ENDORSE_LETTER_CERT: 'Endorse letter/cert',
  ENDORSE_OBJECTION_SPECIAL_CASE: 'Endorse Objection Special Case',
  ASSIGN_GR: 'Pre-GR Assign GR',
  GR_HANDLE: 'GR Handle Submission',
  DESK_STUDY: 'Desk Study',
  INSPECTION_REPORT: 'Inspection Report',
  ENDORSE_SO_EMINUTE: 'SO E-minute Endorsement',
  CHECK_PLAN_AND_PROFORMA: 'Plan Checking & Proforma',
  PREPARE_LETTER_CERT: 'Letter/Cert. Preparation',
  PREPARE_LETTER: 'Letter Preparation',
  ISSUE_LETTER: 'Issue Letter',
  PREPARE_MEMO: 'Memo Preparation',
  ENDORSE_SSE_EMINUTE: 'SSE E-minute Endorsement',
  ENDORSE_BS_EMINUTE_AND_SIGN: 'BS E-minute Endorsement & Signature',
  ENDORSE_SBS_EMINUTE: 'SBS E-minute Endorsement',
  SEARCH_STRUCTURAL_DATA: 'Structural Data Search',
  ENDORSE_TO_EMINUTE: 'TO E-minute Endorsement',
  STRUCTURAL_ADVICE_AND_PROFORMA: 'Structural Advice & Proforma',
  STRUCTURAL_ADVICE: 'Structural Advice Preparation',
  ENDORSE_SE_EMINUTE: 'SE E-minute Endorsement',
  CREATE_APPLICATION_CASE: 'Application / Case Creation',
  CREATE_CASE: 'Case Creation',
  ISSUE_ACKNOWLEDGEMENT_LETTER: 'Issue Acknowledgement Letter',
  DISPATCH: 'Dispatch',
  DOCUMENTS_CHECKLIST: 'Documents Checklist',
  NOTIFICATION_LETTER: 'Notification Letter',
  AUDIT_SELECTION: 'Audit Selection',
  LETTER_SIGNATURE: 'Letter Signature',
  ENDORSE_BS_EMINUTE: 'BS E-minute Endorsement',
}

// 0. Initial Site Inspection, 1. Desk Study, 2. Structural (SE), 3. Structural (BS), 4. Mean of Escape, 5. Fire Resisting Construction, 6. Unauthorized building work, 7. Miscellaneous
const TASK_TAB_MAP = {
  INSPECTION_REPORT: [0],
  DESK_STUDY: [1],
  ENDORSE_SO_EMINUTE: [],
  PREPARE_LETTER_CERT: [8, 9],
  PREPARE_LETTER: [8, 9],
  PREPARE_MEMO: [],
  ENDORSE_SSE_EMINUTE: [],
  ENDORSE_BS_EMINUTE_AND_SIGN: [],
  ENDORSE_BS_EMINUTE: [],
  LETTER_SIGNATURE: [9],
  ENDORSE_SBS_EMINUTE: [],
  PREPARE_STRUCTURAL_ADVICE: [2],
  CHECK_PLAN_AND_PROFORMA: [2, 3, 4, 5, 6, 7],
  SEARCH_STRUCTURAL_DATA: [2],
  ENDORSE_TO_EMINUTE: [],
  STRUCTURAL_ADVICE_AND_PROFORMA: [2],
  STRUCTURAL_ADVICE: [2],
  ENDORSE_SE_EMINUTE: [0],
  CREATE_APPLICATION_CASE: [],
  CREATE_CASE: [],
  ISSUE_ACKNOWLEDGEMENT_LETTER: [],
  DISPATCH: [],
  DOCUMENTS_CHECKLIST: [1, 10],
}

export { TaskTitle, TASK_TAB_MAP }

================
File: bd-scs-backend-web-main/src/i18n.js
================
import i18n from "i18next";
import { initReactI18next } from "react-i18next";

import enTransaction from 'src/transactions/en';
import zhTransaction from 'src/transactions/zh';

const resources = {
    en: enTransaction,
    zh: zhTransaction
};

i18n
    .use(initReactI18next) // passes i18n down to react-i18next
    .init({
        resources,
        lng: "en",

        interpolation: {
            escapeValue: false
        }
    });

export default i18n;

================
File: bd-scs-backend-web-main/src/reportWebVitals.js
================
const reportWebVitals = onPerfEntry => {
  if (onPerfEntry && onPerfEntry instanceof Function) {
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(onPerfEntry);
      getFID(onPerfEntry);
      getFCP(onPerfEntry);
      getLCP(onPerfEntry);
      getTTFB(onPerfEntry);
    });
  }
};

export default reportWebVitals;

================
File: bd-scs-backend-web-main/src/setupTests.js
================
// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom';

================
File: bd-scs-backend-web-main/src/transactions/en/index.js
================
import common from './common.json';
import addressDialog from './addressDialog.json';
import dashboard from './dashboard.json';
import userManagement from './userManagement.json';
import advanceSearch from './advanceSearch.json';
import form from './Form/form.json';
import cccaimh3 from './Form/cccaimh3.json';
import commonTask from './Task/common.json';
import p1Task from './Task/p1.json';
import P2Task from './Task/p2.json';
import P3Task from './Task/p3.json';
import P4Task from './Task/p4.json';
import P5Task from './Task/p5.json';
import P6Task from './Task/p6.json';
import P7Task from './Task/p7.json';

export default {
    common,
    addressDialog,
    dashboard,
    userManagement,
    advanceSearch,
    form,
    cccaimh3,
    commonTask,
    p1Task,
    P2Task,
    P3Task,
    P4Task,
    P5Task,
    P6Task,
    P7Task
}

================
File: bd-scs-backend-web-main/src/transactions/zh/index.js
================
import common from './common.json';
import addressDialog from './addressDialog.json';
import dashboard from './dashboard.json';
import userManagement from './userManagement.json';
import advanceSearch from './advanceSearch.json';
import form from './Form/form.json';
import cccaimh3 from './Form/cccaimh3.json';

export default {
    common,
    addressDialog,
    dashboard,
    userManagement,
    advanceSearch,
    form,
    cccaimh3,
}

================
File: bd-scs-nodejs-frontend-main/src/app.js
================
const express = require("express");
const app = express();

var createError = require("http-errors");
var path = require("path");
var cors = require("cors");
require("dotenv").config();
const port = process.env.PORT || 7001;
// const runTest = require("./tests/testSysMetaDataModel");

const sequelize = require("./config/database");

sequelize.authenticate().then(() => {
  sequelize.sync({}).then(() => {
    console.log("Tables synced");
  });
  console.log("Connection has been established successfully.");
});

// const redis = require("redis");

// // Create a Redis client
// const client = redis.createClient();

// // Connect to Redis
// client.on("connect", () => {
//   console.log("Connected to Redis");
// });

// // Handle errors
// client.on("error", (err) => {
//   console.log("Redis error: ", err);
// });

app.use(
  cors({
    origin: true,
  })
);
app.use(express.json());
app.use(express.urlencoded({ extended: false }));

app.use("/application", require("./routes/ApplicationController"));
app.use("/auth", require("./routes/AuthController"));
app.use("/esign", require("./routes/ESignController"));

app.get("/", (req, res) => {
  res.send("Hello World!");
});

app.listen(port, () => {
  console.log(`Example app listening at http://localhost:${port}`);
});

================
File: bd-scs-nodejs-frontend-main/src/migrations/20241013174558-add_Synced_field.js
================
"use strict";

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    /**
     * Add altering commands here.
     *
     * Example:
     * await queryInterface.createTable('users', { id: Sequelize.INTEGER });
     */
    // Add a new column (Synced - Boolean; default: false) to the table (SchoolApp_Submissions)
    const sql = `ALTER TABLE SchoolApp_Submissions ADD Synced BIT DEFAULT 0 NOT NULL;`;
    const [results, metadata] = await queryInterface.sequelize.query(sql, {
      type: queryInterface.sequelize.QueryTypes.RAW,
    });
  },

  async down(queryInterface, Sequelize) {
    /**
     * Add reverting commands here.
     *
     * Example:
     * await queryInterface.dropTable('users');
     */
    // Remove the column (Synced) from the table (SchoolApp_Submissions)
    return queryInterface.removeColumn("SchoolApp_Submissions", "Synced");
  },
};

================
File: bd-scs-nodejs-frontend-main/src/models/AdrBlk.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class AdrBlkModel extends Model {}

AdrBlkModel.init(
  {
    ADR_BLK_ID: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    BLK_TYPE_ID: {
      type: DataTypes.BIGINT,
      allowNull: false,
    },
    BLDG_CAT_ID: {
      type: DataTypes.BIGINT,
      allowNull: false,
    },
    BLDG_USAGE_ID: {
      type: DataTypes.BIGINT,
      allowNull: false,
    },
    SYS_REGION_ID: {
      type: DataTypes.BIGINT,
      allowNull: false,
    },
    SYS_DISTRICT_ID: {
      type: DataTypes.BIGINT,
      allowNull: false,
    },
    AREA_ID: {
      type: DataTypes.BIGINT,
      allowNull: false,
    },
    BLK_DESC_E_ID: {
      type: DataTypes.BIGINT,
      allowNull: false,
    },
    BLK_NO_NUM: {
      type: DataTypes.INTEGER,
      allowNull: false,
    },
    BLK_NO_ALPHA: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    BLDG_NAME_E1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    BLDG_NAME_E2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    BLDG_NAME_E3: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    BLDG_NAME_C1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    BLDG_NAME_C2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    BLDG_NAME_C3: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_E1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_E2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_E3: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_E4: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_E5: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_ST_E1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_ST_E2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_LOT_E1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_LOT_E2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_LOT_E3: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_LOT_E4: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_ST_C: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_LOT_C1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_LOT_C2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_LOT_C3: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_LOT_C4: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_C1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_C2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_C3: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_C4: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OSADR_C5: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OBSOLETE: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "AdrBlkModel",
    tableName: "AdrBlk",
    timestamps: true,
  }
);

module.exports = AdrBlkModel;

================
File: bd-scs-nodejs-frontend-main/src/models/ApplicationCase.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class ApplicationCaseModel extends Model {}

ApplicationCaseModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    FromId: {
      type: DataTypes.BIGINT,
      allowNull: true,
    },
    ApplicationNo: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FileDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    CreatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    UpdatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "ApplicationCaseModel",
    tableName: "ApplicationCase",
    timestamps: true,
  }
);

module.exports = ApplicationCaseModel;

================
File: bd-scs-nodejs-frontend-main/src/models/ApplicationFile.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");
const IamSmartModel = require("./IamSmart")

class ApplicationFileModel extends Model {
 
}

ApplicationFileModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    FromId: {
      type: DataTypes.BIGINT,
      allowNull: true,
    },
    ApplicationNo: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    SubmissionId: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FileId: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FileName: {
      type: DataTypes.STRING,
      allowNull: true,
      unique: true, // Unique index
    },
    FileSize: {
      type: DataTypes.BIGINT,
      allowNull: true,
    },
    DocumentType: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    SignDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    SignType: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FilePath: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FileDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    RemoveStatus: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CreatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    UpdatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "ApplicationFileModel",
    tableName: "ApplicationFiles",
    timestamps: true,
  }
);


module.exports = ApplicationFileModel;

================
File: bd-scs-nodejs-frontend-main/src/models/ApRse.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class ApRseModel extends Model {}

ApRseModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    UUID: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Name: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Name_tc: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RegistrationNumber: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RegistrationType: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ExpiryDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    CreatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    UpdatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "ApRseModel",
    tableName: "ApRse",
    timestamps: true,
  }
);

module.exports = ApRseModel;

================
File: bd-scs-nodejs-frontend-main/src/models/Attachment.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class AttachmentModel extends Model {}
AttachmentModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    SubmissionId: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    ApplicationNo: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    DocumentType: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    RemoveStatus: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FromId: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FileId: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    FileName: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    FilePath: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    FileDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    FileSize: {
      type: DataTypes.BIGINT,
      allowNull: true,
    },
    signDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    signType: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CreatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    UpdatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "AttachmentModel",
    tableName: "Attachment",
    timestamps: true,
  }
);

module.exports = AttachmentModel;

================
File: bd-scs-nodejs-frontend-main/src/models/BackendUpdate.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class BackendUpdateModel extends Model {}
BackendUpdateModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    ApplicationNo: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    UpdateType: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Status: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FileSize: {
      type: DataTypes.BIGINT,
      allowNull: true,
    },
    DocumentType: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FilePath: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FileDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    FileMimeType: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    File: {
      type: DataTypes.TEXT,
      allowNull: true,
    },
    UpdatedAt: {
      type: DataTypes.DATE,
      allowNull: true,
      defaultValue: DataTypes.NOW,
    },
  },
  {
    sequelize,
    modelName: "BackendUpdate",
    tableName: "BackendUpdate",
    timestamps: false,
  }
);

module.exports = BackendUpdateModel;

================
File: bd-scs-nodejs-frontend-main/src/models/GenOtp.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class GenOtpModel extends Model {}

GenOtpModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    ApplicationNo: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    UserId: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    Otp: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Used: {
      type: DataTypes.BIGINT,
      allowNull: true,
    },
    EffectiveUntil: {
      type: DataTypes.DATE,
      allowNull: false,
    },
    CreatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    UpdatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "GenOtpModel",
    tableName: "GenOtp",
    timestamps: true,
  }
);

module.exports = GenOtpModel;

================
File: bd-scs-nodejs-frontend-main/src/models/IamSmart.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");
const ApplicationFileModel = require("./ApplicationFile")

class IamSmartModel extends Model {
}

IamSmartModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    BusinessId: {
      type: DataTypes.STRING,
    },
    FileId: {
      type: DataTypes.STRING,
    },
    CurrentUrl: {
      type: DataTypes.STRING
    }
  },
  {
    sequelize,
    modelName: "IamSmartModel",
    tableName: "IamSmart",
    timestamps: true,
  }
);


module.exports = IamSmartModel;

================
File: bd-scs-nodejs-frontend-main/src/models/LogEvents.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class LogEventsModel extends Model {}

LogEventsModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    LogAlias: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    IpAddress: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    PlatformId: {
      type: DataTypes.INTEGER,
      allowNull: false,
    },
    FromUrl: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CallUrlApi: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    StatusCode: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    LoginInfo: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RequestBody: {
      type: DataTypes.TEXT,
      allowNull: true,
    },
    Response: {
      type: DataTypes.TEXT,
      allowNull: true,
    },
    PrgError: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CreatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "LogEventsModel",
    tableName: "LogEvents",
    timestamps: true,
  }
);

module.exports = LogEventsModel;

================
File: bd-scs-nodejs-frontend-main/src/models/SchoolAppInfo.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class SchoolAppInfoModel extends Model {}
SchoolAppInfoModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    FromId: {
      type: DataTypes.BIGINT,
      allowNull: true,
    },
    ApplicationNo: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FormName: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicationType: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantAddress: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantName: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantEmail: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantMobile: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPName: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPEmail: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPMobile: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPTel: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPFax: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Date: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    BlockID: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseCN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseCNFloor: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseCNUnit: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseENFloor: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseENUnit: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    NameOfSchoolCN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    NameOfSchoolEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    DescriptionOfSchool: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OtherSchoolDesc: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AgeOfStudent: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EstimatedNoOfStudent: {
      type: DataTypes.INTEGER,
      allowNull: true,
    },
    Sign: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ChineseNameOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EnglishNameOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EmailOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    MobileOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RegTypeOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CertRegNoOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ChineseNameOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EnglishNameOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EmailOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    MobileOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RegTypeOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CertRegNoOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ChineseNameOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EnglishNameOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EmailOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    MobileOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RegTypeOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CertRegNoOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Status: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Stage: {
      type: DataTypes.INTEGER,
      allowNull: true,
      defaultValue: 1,
    },
    SubmittedDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    InspectReq: {
      type: DataTypes.INTEGER,
      allowNull: true,
    },
    WithdrawReq: {
      type: DataTypes.INTEGER,
      allowNull: true,
    },
    BDLetterRefDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    BDLetterRefNo: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    SubmitRefDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    ApplicantPostTitle: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantAddressEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantTitle: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantNameEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantHKIC: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantTel: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantRepOrg: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantRepOrgEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPAddress: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPTitle: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    PhoneOfSchool: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantRefDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    FileDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    DateOfInspection: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    ApplicantDated: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    Category1Requirement: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Category2Requirement: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RegExpiryDateOfAp2: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    FaxOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    IdentityOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApList: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    SelfCertification: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CreatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    UpdatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "SchoolAppInfoModel",
    tableName: "SchoolApp_Infos",
    timestamps: true,
  }
);

module.exports = SchoolAppInfoModel;

================
File: bd-scs-nodejs-frontend-main/src/models/SchoolAppSubmission.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class SchoolAppSubmissionModel extends Model {}
SchoolAppSubmissionModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    FromId: {
      type: DataTypes.BIGINT,
      allowNull: true,
    },
    ApplicationNo: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    SubmissionId: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    FormName: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicationType: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantAddress: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantName: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantEmail: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantMobile: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPName: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPEmail: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPMobile: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPTel: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPFax: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Date: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    BlockID: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseCN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseCNFloor: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseCNUnit: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseENFloor: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfPremiseENUnit: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    NameOfSchoolCN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    NameOfSchoolEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    DescriptionOfSchool: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    OtherSchoolDesc: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AgeOfStudent: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EstimatedNoOfStudent: {
      type: DataTypes.INTEGER,
      allowNull: true,
    },
    Sign: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ChineseNameOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EnglishNameOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EmailOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    MobileOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RegTypeOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CertRegNoOfAp1: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ChineseNameOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EnglishNameOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EmailOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    MobileOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RegTypeOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CertRegNoOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ChineseNameOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EnglishNameOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EmailOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    MobileOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RegTypeOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CertRegNoOfRse: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Status: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    SubmittedDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    InspectReq: {
      type: DataTypes.INTEGER,
      allowNull: true,
    },
    WithdrawReq: {
      type: DataTypes.INTEGER,
      allowNull: true,
    },
    BDLetterRefDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    BDLetterRefNo: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    SubmitRefDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    ApplicantPostTitle: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantAddressEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantTitle: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantNameEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantHKIC: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantTel: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantRepOrg: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantRepOrgEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPAddress: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ContactPTitle: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    PhoneOfSchool: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApplicantRefDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    FileDate: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    RemoveStatus: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    DateOfInspection: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    ApplicantDated: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    Category1Requirement: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Category2Requirement: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    RegExpiryDateOfAp2: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    FaxOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    AddressOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    IdentityOfAp2: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ApList: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    SelfCertification: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CreatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    UpdatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Synced: {
      type: DataTypes.BOOLEAN,
      defaultValue: false,
    },
  },
  {
    sequelize,
    modelName: "SchoolAppSubmissionModel",
    tableName: "SchoolApp_Submissions",
    timestamps: true,
  }
);

module.exports = SchoolAppSubmissionModel;

================
File: bd-scs-nodejs-frontend-main/src/models/ScsMasterTable.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");
// ScsMasterTable Model
class ScsMasterTableModel extends Model {}

ScsMasterTableModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    Type: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    Code: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    Ordering: {
      type: DataTypes.BIGINT,
      allowNull: true,
    },
    DataValue: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CaptionEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CaptionTC: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CaptionSC: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Remarks: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    LongTextEN: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    LongTextTC: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    LongTextSC: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "ScsMasterTableModel",
    tableName: "ScsMasterTable",
    timestamps: true,
  }
);

module.exports = ScsMasterTableModel;

================
File: bd-scs-nodejs-frontend-main/src/models/Staff.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class StaffModel extends Model {}

StaffModel.init(
  {
    Id: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    UserId: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Password: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    EnglishName: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ChineseName: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Department: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Post: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Telephone: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Email: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Role: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    Status: {
      type: DataTypes.INTEGER,
      allowNull: true,
    },
    CreatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    UpdatedBy: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "StaffModel",
    tableName: "Staff",
    timestamps: true,
  }
);

module.exports = StaffModel;

================
File: bd-scs-nodejs-frontend-main/src/models/Sys_Meta_Data.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database"); // Adjust the path based on your project structure

class SysMetaDataModel extends Model {}

SysMetaDataModel.init(
  {
    SYS_META_DATA_ID: {
      type: DataTypes.BIGINT,
      primaryKey: true,
      autoIncrement: true,
    },
    REC_TYPE: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    CODE: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    PARENT_ID: {
      type: DataTypes.BIGINT,
      allowNull: false,
    },
    ENGLISH_DESCRIPTION: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CHINESE_DESCRIPTION: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    IS_ACTIVE: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    ORDERING: {
      type: DataTypes.BIGINT,
      allowNull: false,
    },
    CREATED_DT: {
      type: DataTypes.DATE,
      allowNull: true,
    },
    CREATED_POST: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CREATED_NAME: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    CREATED_SECTION: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    LAST_MODIFIED_DT: {
      type: DataTypes.DATE,
      allowNull: false,
    },
    LAST_MODIFIED_POST: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    LAST_MODIFIED_NAME: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    LAST_MODIFIED_SECTION: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    MULTI_INSP_FOR_LSO_IND: {
      type: DataTypes.STRING,
      allowNull: true,
    },
    REC_SRC: {
      type: DataTypes.STRING,
      allowNull: true,
    },
  },
  {
    sequelize,
    modelName: "SysMetaData",
    tableName: "Sys_Meta_Data",
    timestamps: false,
  }
);

module.exports = SysMetaDataModel;

================
File: bd-scs-nodejs-frontend-main/src/models/Test.js
================
const { DataTypes, Model } = require("sequelize");
const sequelize = require("../config/database");

class TestModel extends Model {}

TestModel.init(
  {
    name: {
      type: DataTypes.STRING,
      allowNull: false,
    },
    age: {
      type: DataTypes.INTEGER,
      allowNull: true,
    },
    email: {
      type: DataTypes.STRING,
      allowNull: false,
      validate: {
        isEmail: true,
      },
    },
  },
  {
    sequelize,
    modelName: "TestModel",
    tableName: "test_models", // Optional: specify the table name
    timestamps: true, // createdAt and updatedAt will be automatically managed
  }
);

module.exports = TestModel;

================
File: bd-scs-nodejs-frontend-main/src/routes/ApplicationController.js
================
var express = require("express");
var router = express.Router();
const SchoolAppSubmissionModel = require("../models/SchoolAppSubmission");
const SchoolAppInfoModel = require("../models/SchoolAppInfo");
const ScsMasterTableModel = require("../models/ScsMasterTable");
const BackendUpdateModel = require("../models/BackendUpdate");
const AttachmentModel = require("../models/Attachment");
const ApplicationFileModel = require("../models/Applica